{"mappings":"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","sources":["Documents/GitHub/bs3.illogicalapple.com/src/forkphorus.dist.js"],"sourcesContent":["\"use strict\";\n/*!\nThis file is generated from source files in https://github.com/forkphorus/forkphorus\nPlease see the README for more information.\n\nLicense for forkphorus:\nThe MIT License (MIT)\n\nCopyright (c) 2013-2017 Nathan Dinsmore\nCopyright (c) 2019-2021 Thomas Weber\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the \"Software\"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\nthe Software, and to permit persons to whom the Software is furnished to do so,\nsubject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\nFOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\nCOPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\nIN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\nCONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nParts of forkphorus are based on Sulfurous (https://sulfurous.aau.at/) and Scratch (https://scratch.mit.edu/)\n\nLicense for Sulfurous:\nThe MIT License (MIT)\nCopyright (c) 2013-2014 Nathan Dinsmore\nCopyright (c) 2016 Mittagskogel\nCopyright (c) 2017-2020 FRALEX\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the \"Software\"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\nthe Software, and to permit persons to whom the Software is furnished to do so,\nsubject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\nFOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\nCOPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\nIN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\nCONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nLicense for Scratch:\nCopyright (c) 2016, Massachusetts Institute of Technology\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n\n1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\n\n2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\n\n3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\nif (!('Promise' in window)) {\n    throw new Error('Browser does not support Promise');\n}\nvar P;\n(function (P) {\n    var config;\n    (function (config) {\n        config.debug = false;\n        config.useWebGL = false;\n        config.supportVideoSensing = false;\n        config.experimentalOptimizations = false;\n        config.scale = window.devicePixelRatio || 1;\n        config.PROJECT_API = 'https://projects.scratch.mit.edu/$id';\n    })(config = P.config || (P.config = {}));\n})(P || (P = {}));\nvar P;\n(function (P) {\n    var audio;\n    (function (audio) {\n        audio.context = (function () {\n            if (window.AudioContext) {\n                return new AudioContext();\n            }\n            else if (window.webkitAudioContext) {\n                return new window.webkitAudioContext();\n            }\n            else {\n                return null;\n            }\n        })();\n        if (audio.context) {\n            var volume = 0.5;\n            var globalNode = audio.context.createGain();\n            globalNode.gain.value = volume;\n            globalNode.connect(audio.context.destination);\n        }\n        audio.drums = [\n            { name: 'SnareDrum', baseRatio: 0.5946035575013605, loop: false, loopStart: null, loopEnd: null, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n            { name: 'Tom', baseRatio: 0.5946035575013605, loop: false, loopStart: null, loopEnd: null, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n            { name: 'SideStick', baseRatio: 0.5946035575013605, loop: false, loopStart: null, loopEnd: null, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n            { name: 'Crash', baseRatio: 0.8908987181403393, loop: false, loopStart: null, loopEnd: null, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n            { name: 'HiHatOpen', baseRatio: 0.9438743126816935, loop: false, loopStart: null, loopEnd: null, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n            { name: 'HiHatClosed', baseRatio: 0.5946035575013605, loop: false, loopStart: null, loopEnd: null, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n            { name: 'Tambourine', baseRatio: 0.5946035575013605, loop: false, loopStart: null, loopEnd: null, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n            { name: 'Clap', baseRatio: 0.5946035575013605, loop: false, loopStart: null, loopEnd: null, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n            { name: 'Claves', baseRatio: 0.5946035575013605, loop: false, loopStart: null, loopEnd: null, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n            { name: 'WoodBlock', baseRatio: 0.7491535384383408, loop: false, loopStart: null, loopEnd: null, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n            { name: 'Cowbell', baseRatio: 0.5946035575013605, loop: false, loopStart: null, loopEnd: null, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n            { name: 'Triangle', baseRatio: 0.8514452780229479, loop: true, loopStart: 0.7638548752834468, loopEnd: 0.7825396825396825, attackEnd: 0, holdEnd: 0, decayEnd: 2 },\n            { name: 'Bongo', baseRatio: 0.5297315471796477, loop: false, loopStart: null, loopEnd: null, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n            { name: 'Conga', baseRatio: 0.7954545454545454, loop: true, loopStart: 0.1926077097505669, loopEnd: 0.20403628117913833, attackEnd: 0, holdEnd: 0, decayEnd: 2 },\n            { name: 'Cabasa', baseRatio: 0.5946035575013605, loop: false, loopStart: null, loopEnd: null, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n            { name: 'GuiroLong', baseRatio: 0.5946035575013605, loop: false, loopStart: null, loopEnd: null, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n            { name: 'Vibraslap', baseRatio: 0.8408964152537145, loop: false, loopStart: null, loopEnd: null, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n            { name: 'Cuica', baseRatio: 0.7937005259840998, loop: false, loopStart: null, loopEnd: null, attackEnd: 0, holdEnd: 0, decayEnd: 0 }\n        ];\n        audio.instruments = [\n            [\n                { top: 38, name: 'AcousticPiano_As3', baseRatio: 0.5316313272700484, loop: true, loopStart: 0.465578231292517, loopEnd: 0.7733786848072562, attackEnd: 0, holdEnd: 0.1, decayEnd: 22.1 },\n                { top: 44, name: 'AcousticPiano_C4', baseRatio: 0.5905141892259927, loop: true, loopStart: 0.6334693877551021, loopEnd: 0.8605442176870748, attackEnd: 0, holdEnd: 0.1, decayEnd: 20.1 },\n                { top: 51, name: 'AcousticPiano_G4', baseRatio: 0.8843582887700535, loop: true, loopStart: 0.5532879818594104, loopEnd: 0.5609977324263039, attackEnd: 0, holdEnd: 0.08, decayEnd: 18.08 },\n                { top: 62, name: 'AcousticPiano_C6', baseRatio: 2.3557692307692304, loop: true, loopStart: 0.5914739229024943, loopEnd: 0.6020861678004535, attackEnd: 0, holdEnd: 0.08, decayEnd: 16.08 },\n                { top: 70, name: 'AcousticPiano_F5', baseRatio: 1.5776515151515151, loop: true, loopStart: 0.5634920634920635, loopEnd: 0.5879818594104308, attackEnd: 0, holdEnd: 0.04, decayEnd: 14.04 },\n                { top: 77, name: 'AcousticPiano_Ds6', baseRatio: 2.800762112139358, loop: true, loopStart: 0.560907029478458, loopEnd: 0.5836281179138322, attackEnd: 0, holdEnd: 0.02, decayEnd: 10.02 },\n                { top: 85, name: 'AcousticPiano_Ds6', baseRatio: 2.800762112139358, loop: true, loopStart: 0.560907029478458, loopEnd: 0.5836281179138322, attackEnd: 0, holdEnd: 0, decayEnd: 8 },\n                { top: 90, name: 'AcousticPiano_Ds6', baseRatio: 2.800762112139358, loop: true, loopStart: 0.560907029478458, loopEnd: 0.5836281179138322, attackEnd: 0, holdEnd: 0, decayEnd: 6 },\n                { top: 96, name: 'AcousticPiano_D7', baseRatio: 5.275119617224881, loop: true, loopStart: 0.3380498866213152, loopEnd: 0.34494331065759637, attackEnd: 0, holdEnd: 0, decayEnd: 3 },\n                { top: 128, name: 'AcousticPiano_D7', baseRatio: 5.275119617224881, loop: true, loopStart: 0.3380498866213152, loopEnd: 0.34494331065759637, attackEnd: 0, holdEnd: 0, decayEnd: 2 }\n            ], [\n                { top: 48, name: 'ElectricPiano_C2', baseRatio: 0.14870515241435123, loop: true, loopStart: 0.6956009070294784, loopEnd: 0.7873015873015873, attackEnd: 0, holdEnd: 0.08, decayEnd: 10.08 },\n                { top: 74, name: 'ElectricPiano_C4', baseRatio: 0.5945685670261941, loop: true, loopStart: 0.5181859410430839, loopEnd: 0.5449433106575964, attackEnd: 0, holdEnd: 0.04, decayEnd: 8.04 },\n                { top: 128, name: 'ElectricPiano_C4', baseRatio: 0.5945685670261941, loop: true, loopStart: 0.5181859410430839, loopEnd: 0.5449433106575964, attackEnd: 0, holdEnd: 0, decayEnd: 6 }\n            ], [\n                { top: 128, name: 'Organ_G2', baseRatio: 0.22283731584620914, loop: true, loopStart: 0.05922902494331066, loopEnd: 0.1510204081632653, attackEnd: 0, holdEnd: 0, decayEnd: 0 }\n            ], [{ top: 40, name: 'AcousticGuitar_F3', baseRatio: 0.3977272727272727, loop: true, loopStart: 1.6628117913832199, loopEnd: 1.6685260770975057, attackEnd: 0, holdEnd: 0, decayEnd: 15 },\n                { top: 56, name: 'AcousticGuitar_F3', baseRatio: 0.3977272727272727, loop: true, loopStart: 1.6628117913832199, loopEnd: 1.6685260770975057, attackEnd: 0, holdEnd: 0, decayEnd: 13.5 },\n                { top: 60, name: 'AcousticGuitar_F3', baseRatio: 0.3977272727272727, loop: true, loopStart: 1.6628117913832199, loopEnd: 1.6685260770975057, attackEnd: 0, holdEnd: 0, decayEnd: 12 },\n                { top: 67, name: 'AcousticGuitar_F3', baseRatio: 0.3977272727272727, loop: true, loopStart: 1.6628117913832199, loopEnd: 1.6685260770975057, attackEnd: 0, holdEnd: 0, decayEnd: 8.5 },\n                { top: 72, name: 'AcousticGuitar_F3', baseRatio: 0.3977272727272727, loop: true, loopStart: 1.6628117913832199, loopEnd: 1.6685260770975057, attackEnd: 0, holdEnd: 0, decayEnd: 7 },\n                { top: 83, name: 'AcousticGuitar_F3', baseRatio: 0.3977272727272727, loop: true, loopStart: 1.6628117913832199, loopEnd: 1.6685260770975057, attackEnd: 0, holdEnd: 0, decayEnd: 5.5 },\n                { top: 128, name: 'AcousticGuitar_F3', baseRatio: 0.3977272727272727, loop: true, loopStart: 1.6628117913832199, loopEnd: 1.6685260770975057, attackEnd: 0, holdEnd: 0, decayEnd: 4.5 }\n            ], [\n                { top: 40, name: 'ElectricGuitar_F3', baseRatio: 0.39615522817103843, loop: true, loopStart: 1.5733333333333333, loopEnd: 1.5848072562358, attackEnd: 0, holdEnd: 0, decayEnd: 15 },\n                { top: 56, name: 'ElectricGuitar_F3', baseRatio: 0.39615522817103843, loop: true, loopStart: 1.5733333333333333, loopEnd: 1.5848072562358277, attackEnd: 0, holdEnd: 0, decayEnd: 13.5 },\n                { top: 60, name: 'ElectricGuitar_F3', baseRatio: 0.39615522817103843, loop: true, loopStart: 1.5733333333333333, loopEnd: 1.5848072562358277, attackEnd: 0, holdEnd: 0, decayEnd: 12 },\n                { top: 67, name: 'ElectricGuitar_F3', baseRatio: 0.39615522817103843, loop: true, loopStart: 1.5733333333333333, loopEnd: 1.5848072562358277, attackEnd: 0, holdEnd: 0, decayEnd: 8.5 },\n                { top: 72, name: 'ElectricGuitar_F3', baseRatio: 0.39615522817103843, loop: true, loopStart: 1.5733333333333333, loopEnd: 1.5848072562358277, attackEnd: 0, holdEnd: 0, decayEnd: 7 },\n                { top: 83, name: 'ElectricGuitar_F3', baseRatio: 0.39615522817103843, loop: true, loopStart: 1.5733333333333333, loopEnd: 1.5848072562358277, attackEnd: 0, holdEnd: 0, decayEnd: 5.5 },\n                { top: 128, name: 'ElectricGuitar_F3', baseRatio: 0.39615522817103843, loop: true, loopStart: 1.5733333333333333, loopEnd: 1.5848072562358277, attackEnd: 0, holdEnd: 0, decayEnd: 4.5 }\n            ], [\n                { top: 34, name: 'ElectricBass_G1', baseRatio: 0.11111671034065712, loop: true, loopStart: 1.9007709750566892, loopEnd: 1.9212244897959183, attackEnd: 0, holdEnd: 0, decayEnd: 17 },\n                { top: 48, name: 'ElectricBass_G1', baseRatio: 0.11111671034065712, loop: true, loopStart: 1.9007709750566892, loopEnd: 1.9212244897959183, attackEnd: 0, holdEnd: 0, decayEnd: 14 },\n                { top: 64, name: 'ElectricBass_G1', baseRatio: 0.11111671034065712, loop: true, loopStart: 1.9007709750566892, loopEnd: 1.9212244897959183, attackEnd: 0, holdEnd: 0, decayEnd: 12 },\n                { top: 128, name: 'ElectricBass_G1', baseRatio: 0.11111671034065712, loop: true, loopStart: 1.9007709750566892, loopEnd: 1.9212244897959183, attackEnd: 0, holdEnd: 0, decayEnd: 10 }\n            ], [\n                { top: 38, name: 'Pizz_G2', baseRatio: 0.21979665071770335, loop: true, loopStart: 0.3879365079365079, loopEnd: 0.3982766439909297, attackEnd: 0, holdEnd: 0, decayEnd: 5 },\n                { top: 45, name: 'Pizz_G2', baseRatio: 0.21979665071770335, loop: true, loopStart: 0.3879365079365079, loopEnd: 0.3982766439909297, attackEnd: 0, holdEnd: 0.012, decayEnd: 4.012 },\n                { top: 56, name: 'Pizz_A3', baseRatio: 0.503654636820466, loop: true, loopStart: 0.5197278911564626, loopEnd: 0.5287528344671202, attackEnd: 0, holdEnd: 0, decayEnd: 4 },\n                { top: 64, name: 'Pizz_A3', baseRatio: 0.503654636820466, loop: true, loopStart: 0.5197278911564626, loopEnd: 0.5287528344671202, attackEnd: 0, holdEnd: 0, decayEnd: 3.2 },\n                { top: 72, name: 'Pizz_E4', baseRatio: 0.7479647218453188, loop: true, loopStart: 0.7947845804988662, loopEnd: 0.7978231292517007, attackEnd: 0, holdEnd: 0, decayEnd: 2.8 },\n                { top: 80, name: 'Pizz_E4', baseRatio: 0.7479647218453188, loop: true, loopStart: 0.7947845804988662, loopEnd: 0.7978231292517007, attackEnd: 0, holdEnd: 0, decayEnd: 2.2 },\n                { top: 128, name: 'Pizz_E4', baseRatio: 0.7479647218453188, loop: true, loopStart: 0.7947845804988662, loopEnd: 0.7978231292517007, attackEnd: 0, holdEnd: 0, decayEnd: 1.5 }\n            ], [\n                { top: 41, name: 'Cello_C2', baseRatio: 0.14870515241435123, loop: true, loopStart: 0.3876643990929705, loopEnd: 0.40294784580498866, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n                { top: 52, name: 'Cello_As2', baseRatio: 0.263755980861244, loop: true, loopStart: 0.3385487528344671, loopEnd: 0.35578231292517004, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n                { top: 62, name: 'Violin_D4', baseRatio: 0.6664047388781432, loop: true, loopStart: 0.48108843537414964, loopEnd: 0.5151927437641723, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n                { top: 75, name: 'Violin_A4', baseRatio: 0.987460815047022, loop: true, loopStart: 0.14108843537414967, loopEnd: 0.15029478458049886, attackEnd: 0.07, holdEnd: 0.07, decayEnd: 0.07 },\n                { top: 128, name: 'Violin_E5', baseRatio: 1.4885238523852387, loop: true, loopStart: 0.10807256235827664, loopEnd: 0.1126530612244898, attackEnd: 0, holdEnd: 0, decayEnd: 0 }\n            ], [\n                { top: 30, name: 'BassTrombone_A2_3', baseRatio: 0.24981872564125807, loop: true, loopStart: 0.061541950113378686, loopEnd: 0.10702947845804989, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n                { top: 40, name: 'BassTrombone_A2_2', baseRatio: 0.24981872564125807, loop: true, loopStart: 0.08585034013605441, loopEnd: 0.13133786848072562, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n                { top: 55, name: 'Trombone_B3', baseRatio: 0.5608240680183126, loop: true, loopStart: 0.12, loopEnd: 0.17673469387755103, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n                { top: 88, name: 'Trombone_B3', baseRatio: 0.5608240680183126, loop: true, loopStart: 0.12, loopEnd: 0.17673469387755103, attackEnd: 0.05, holdEnd: 0.05, decayEnd: 0.05 },\n                { top: 128, name: 'Trumpet_E5', baseRatio: 1.4959294436906376, loop: true, loopStart: 0.1307936507936508, loopEnd: 0.14294784580498865, attackEnd: 0, holdEnd: 0, decayEnd: 0 }\n            ], [\n                { top: 128, name: 'Clarinet_C4', baseRatio: 0.5940193965517241, loop: true, loopStart: 0.6594104308390023, loopEnd: 0.7014965986394558, attackEnd: 0, holdEnd: 0, decayEnd: 0 }\n            ], [\n                { top: 40, name: 'TenorSax_C3', baseRatio: 0.2971698113207547, loop: true, loopStart: 0.4053968253968254, loopEnd: 0.4895238095238095, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n                { top: 50, name: 'TenorSax_C3', baseRatio: 0.2971698113207547, loop: true, loopStart: 0.4053968253968254, loopEnd: 0.4895238095238095, attackEnd: 0.02, holdEnd: 0.02, decayEnd: 0.02 },\n                { top: 59, name: 'TenorSax_C3', baseRatio: 0.2971698113207547, loop: true, loopStart: 0.4053968253968254, loopEnd: 0.4895238095238095, attackEnd: 0.04, holdEnd: 0.04, decayEnd: 0.04 },\n                { top: 67, name: 'AltoSax_A3', baseRatio: 0.49814747876378096, loop: true, loopStart: 0.3875736961451247, loopEnd: 0.4103854875283447, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n                { top: 75, name: 'AltoSax_A3', baseRatio: 0.49814747876378096, loop: true, loopStart: 0.3875736961451247, loopEnd: 0.4103854875283447, attackEnd: 0.02, holdEnd: 0.02, decayEnd: 0.02 },\n                { top: 80, name: 'AltoSax_A3', baseRatio: 0.49814747876378096, loop: true, loopStart: 0.3875736961451247, loopEnd: 0.4103854875283447, attackEnd: 0.02, holdEnd: 0.02, decayEnd: 0.02 },\n                { top: 128, name: 'AltoSax_C6', baseRatio: 2.3782742681047764, loop: true, loopStart: 0.05705215419501134, loopEnd: 0.0838095238095238, attackEnd: 0, holdEnd: 0, decayEnd: 0 }\n            ], [\n                { top: 61, name: 'Flute_B5_2', baseRatio: 2.255113636363636, loop: true, loopStart: 0.08430839002267573, loopEnd: 0.10244897959183673, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n                { top: 128, name: 'Flute_B5_1', baseRatio: 2.255113636363636, loop: true, loopStart: 0.10965986394557824, loopEnd: 0.12780045351473923, attackEnd: 0, holdEnd: 0, decayEnd: 0 }\n            ], [\n                { top: 128, name: 'WoodenFlute_C5', baseRatio: 1.1892952324548416, loop: true, loopStart: 0.5181859410430839, loopEnd: 0.7131065759637188, attackEnd: 0, holdEnd: 0, decayEnd: 0 }\n            ], [\n                { top: 57, name: 'Bassoon_C3', baseRatio: 0.29700969827586204, loop: true, loopStart: 0.11011337868480725, loopEnd: 0.19428571428571428, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n                { top: 67, name: 'Bassoon_C3', baseRatio: 0.29700969827586204, loop: true, loopStart: 0.11011337868480725, loopEnd: 0.19428571428571428, attackEnd: 0.04, holdEnd: 0.04, decayEnd: 0.04 },\n                { top: 76, name: 'Bassoon_C3', baseRatio: 0.29700969827586204, loop: true, loopStart: 0.11011337868480725, loopEnd: 0.19428571428571428, attackEnd: 0.08, holdEnd: 0.08, decayEnd: 0.08 },\n                { top: 84, name: 'EnglishHorn_F3', baseRatio: 0.39601293103448276, loop: true, loopStart: 0.341859410430839, loopEnd: 0.4049886621315193, attackEnd: 0.04, holdEnd: 0.04, decayEnd: 0.04 },\n                { top: 128, name: 'EnglishHorn_D4', baseRatio: 0.6699684005833739, loop: true, loopStart: 0.22027210884353743, loopEnd: 0.23723356009070296, attackEnd: 0, holdEnd: 0, decayEnd: 0 }\n            ], [\n                { top: 39, name: 'Choir_F3', baseRatio: 0.3968814788643197, loop: true, loopStart: 0.6352380952380953, loopEnd: 1.8721541950113378, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n                { top: 50, name: 'Choir_F3', baseRatio: 0.3968814788643197, loop: true, loopStart: 0.6352380952380953, loopEnd: 1.8721541950113378, attackEnd: 0.04, holdEnd: 0.04, decayEnd: 0.04 },\n                { top: 61, name: 'Choir_F3', baseRatio: 0.3968814788643197, loop: true, loopStart: 0.6352380952380953, loopEnd: 1.8721541950113378, attackEnd: 0.06, holdEnd: 0.06, decayEnd: 0.06 },\n                { top: 72, name: 'Choir_F4', baseRatio: 0.7928898424161845, loop: true, loopStart: 0.7415419501133786, loopEnd: 2.1059410430839, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n                { top: 128, name: 'Choir_F5', baseRatio: 1.5879576065654504, loop: true, loopStart: 0.836281179138322, loopEnd: 2.0585487528344673, attackEnd: 0, holdEnd: 0, decayEnd: 0 }\n            ], [\n                { top: 38, name: 'Vibraphone_C3', baseRatio: 0.29829545454545453, loop: true, loopStart: 0.2812698412698413, loopEnd: 0.28888888888888886, attackEnd: 0, holdEnd: 0.1, decayEnd: 8.1 },\n                { top: 48, name: 'Vibraphone_C3', baseRatio: 0.29829545454545453, loop: true, loopStart: 0.2812698412698413, loopEnd: 0.28888888888888886, attackEnd: 0, holdEnd: 0.1, decayEnd: 7.6 },\n                { top: 59, name: 'Vibraphone_C3', baseRatio: 0.29829545454545453, loop: true, loopStart: 0.2812698412698413, loopEnd: 0.28888888888888886, attackEnd: 0, holdEnd: 0.06, decayEnd: 7.06 },\n                { top: 70, name: 'Vibraphone_C3', baseRatio: 0.29829545454545453, loop: true, loopStart: 0.2812698412698413, loopEnd: 0.28888888888888886, attackEnd: 0, holdEnd: 0.04, decayEnd: 6.04 },\n                { top: 78, name: 'Vibraphone_C3', baseRatio: 0.29829545454545453, loop: true, loopStart: 0.2812698412698413, loopEnd: 0.28888888888888886, attackEnd: 0, holdEnd: 0.02, decayEnd: 5.02 },\n                { top: 86, name: 'Vibraphone_C3', baseRatio: 0.29829545454545453, loop: true, loopStart: 0.2812698412698413, loopEnd: 0.28888888888888886, attackEnd: 0, holdEnd: 0, decayEnd: 4 },\n                { top: 128, name: 'Vibraphone_C3', baseRatio: 0.29829545454545453, loop: true, loopStart: 0.2812698412698413, loopEnd: 0.28888888888888886, attackEnd: 0, holdEnd: 0, decayEnd: 3 }\n            ], [\n                { top: 128, name: 'MusicBox_C4', baseRatio: 0.5937634640241276, loop: true, loopStart: 0.6475283446712018, loopEnd: 0.6666666666666666, attackEnd: 0, holdEnd: 0, decayEnd: 2 }\n            ], [\n                { top: 128, name: 'SteelDrum_D5', baseRatio: 1.3660402567543959, loop: false, loopStart: -0.000045351473922902495, loopEnd: -0.000045351473922902495, attackEnd: 0, holdEnd: 0, decayEnd: 2 }\n            ], [\n                { top: 128, name: 'Marimba_C4', baseRatio: 0.5946035575013605, loop: false, loopStart: -0.000045351473922902495, loopEnd: -0.000045351473922902495, attackEnd: 0, holdEnd: 0, decayEnd: 0 }\n            ], [\n                { top: 80, name: 'SynthLead_C4', baseRatio: 0.5942328422565577, loop: true, loopStart: 0.006122448979591836, loopEnd: 0.06349206349206349, attackEnd: 0, holdEnd: 0, decayEnd: 0 },\n                { top: 128, name: 'SynthLead_C6', baseRatio: 2.3760775862068964, loop: true, loopStart: 0.005623582766439909, loopEnd: 0.01614512471655329, attackEnd: 0, holdEnd: 0, decayEnd: 0 }\n            ], [\n                { top: 38, name: 'SynthPad_A3', baseRatio: 0.4999105065330231, loop: true, loopStart: 0.1910204081632653, loopEnd: 3.9917006802721087, attackEnd: 0.05, holdEnd: 0.05, decayEnd: 0.05 },\n                { top: 50, name: 'SynthPad_A3', baseRatio: 0.4999105065330231, loop: true, loopStart: 0.1910204081632653, loopEnd: 3.9917006802721087, attackEnd: 0.08, holdEnd: 0.08, decayEnd: 0.08 },\n                { top: 62, name: 'SynthPad_A3', baseRatio: 0.4999105065330231, loop: true, loopStart: 0.1910204081632653, loopEnd: 3.9917006802721087, attackEnd: 0.11, holdEnd: 0.11, decayEnd: 0.11 },\n                { top: 74, name: 'SynthPad_A3', baseRatio: 0.4999105065330231, loop: true, loopStart: 0.1910204081632653, loopEnd: 3.9917006802721087, attackEnd: 0.15, holdEnd: 0.15, decayEnd: 0.15 },\n                { top: 86, name: 'SynthPad_A3', baseRatio: 0.4999105065330231, loop: true, loopStart: 0.1910204081632653, loopEnd: 3.9917006802721087, attackEnd: 0.2, holdEnd: 0.2, decayEnd: 0.2 },\n                { top: 128, name: 'SynthPad_C6', baseRatio: 2.3820424708835755, loop: true, loopStart: 0.11678004535147392, loopEnd: 0.41732426303854875, attackEnd: 0, holdEnd: 0, decayEnd: 0 }\n            ]\n        ];\n        const SB2_SOUNDBANK_FILES = {\n            'AcousticGuitar_F3': 'sb2/instruments/AcousticGuitar_F3_22k.wav',\n            'AcousticPiano_As3': 'sb2/instruments/AcousticPiano(5)_A%233_22k.wav',\n            'AcousticPiano_C4': 'sb2/instruments/AcousticPiano(5)_C4_22k.wav',\n            'AcousticPiano_G4': 'sb2/instruments/AcousticPiano(5)_G4_22k.wav',\n            'AcousticPiano_F5': 'sb2/instruments/AcousticPiano(5)_F5_22k.wav',\n            'AcousticPiano_C6': 'sb2/instruments/AcousticPiano(5)_C6_22k.wav',\n            'AcousticPiano_Ds6': 'sb2/instruments/AcousticPiano(5)_D%236_22k.wav',\n            'AcousticPiano_D7': 'sb2/instruments/AcousticPiano(5)_D7_22k.wav',\n            'AltoSax_A3': 'sb2/instruments/AltoSax_A3_22K.wav',\n            'AltoSax_C6': 'sb2/instruments/AltoSax(3)_C6_22k.wav',\n            'Bassoon_C3': 'sb2/instruments/Bassoon_C3_22k.wav',\n            'BassTrombone_A2_2': 'sb2/instruments/BassTrombone_A2(2)_22k.wav',\n            'BassTrombone_A2_3': 'sb2/instruments/BassTrombone_A2(3)_22k.wav',\n            'Cello_C2': 'sb2/instruments/Cello(3b)_C2_22k.wav',\n            'Cello_As2': 'sb2/instruments/Cello(3)_A%232_22k.wav',\n            'Choir_F3': 'sb2/instruments/Choir(4)_F3_22k.wav',\n            'Choir_F4': 'sb2/instruments/Choir(4)_F4_22k.wav',\n            'Choir_F5': 'sb2/instruments/Choir(4)_F5_22k.wav',\n            'Clarinet_C4': 'sb2/instruments/Clarinet_C4_22k.wav',\n            'ElectricBass_G1': 'sb2/instruments/ElectricBass(2)_G1_22k.wav',\n            'ElectricGuitar_F3': 'sb2/instruments/ElectricGuitar(2)_F3(1)_22k.wav',\n            'ElectricPiano_C2': 'sb2/instruments/ElectricPiano_C2_22k.wav',\n            'ElectricPiano_C4': 'sb2/instruments/ElectricPiano_C4_22k.wav',\n            'EnglishHorn_D4': 'sb2/instruments/EnglishHorn(1)_D4_22k.wav',\n            'EnglishHorn_F3': 'sb2/instruments/EnglishHorn(1)_F3_22k.wav',\n            'Flute_B5_1': 'sb2/instruments/Flute(3)_B5(1)_22k.wav',\n            'Flute_B5_2': 'sb2/instruments/Flute(3)_B5(2)_22k.wav',\n            'Marimba_C4': 'sb2/instruments/Marimba_C4_22k.wav',\n            'MusicBox_C4': 'sb2/instruments/MusicBox_C4_22k.wav',\n            'Organ_G2': 'sb2/instruments/Organ(2)_G2_22k.wav',\n            'Pizz_A3': 'sb2/instruments/Pizz(2)_A3_22k.wav',\n            'Pizz_E4': 'sb2/instruments/Pizz(2)_E4_22k.wav',\n            'Pizz_G2': 'sb2/instruments/Pizz(2)_G2_22k.wav',\n            'SteelDrum_D5': 'sb2/instruments/SteelDrum_D5_22k.wav',\n            'SynthLead_C4': 'sb2/instruments/SynthLead(6)_C4_22k.wav',\n            'SynthLead_C6': 'sb2/instruments/SynthLead(6)_C6_22k.wav',\n            'SynthPad_A3': 'sb2/instruments/SynthPad(2)_A3_22k.wav',\n            'SynthPad_C6': 'sb2/instruments/SynthPad(2)_C6_22k.wav',\n            'TenorSax_C3': 'sb2/instruments/TenorSax(1)_C3_22k.wav',\n            'Trombone_B3': 'sb2/instruments/Trombone_B3_22k.wav',\n            'Trumpet_E5': 'sb2/instruments/Trumpet_E5_22k.wav',\n            'Vibraphone_C3': 'sb2/instruments/Vibraphone_C3_22k.wav',\n            'Violin_D4': 'sb2/instruments/Violin(2)_D4_22K.wav',\n            'Violin_A4': 'sb2/instruments/Violin(3)_A4_22k.wav',\n            'Violin_E5': 'sb2/instruments/Violin(3b)_E5_22k.wav',\n            'WoodenFlute_C5': 'sb2/instruments/WoodenFlute_C5_22k.wav',\n            'BassDrum': 'sb2/drums/BassDrum(1b)_22k.wav',\n            'Bongo': 'sb2/drums/Bongo_22k.wav',\n            'Cabasa': 'sb2/drums/Cabasa(1)_22k.wav',\n            'Clap': 'sb2/drums/Clap(1)_22k.wav',\n            'Claves': 'sb2/drums/Claves(1)_22k.wav',\n            'Conga': 'sb2/drums/Conga(1)_22k.wav',\n            'Cowbell': 'sb2/drums/Cowbell(3)_22k.wav',\n            'Crash': 'sb2/drums/Crash(2)_22k.wav',\n            'Cuica': 'sb2/drums/Cuica(2)_22k.wav',\n            'GuiroLong': 'sb2/drums/GuiroLong(1)_22k.wav',\n            'GuiroShort': 'sb2/drums/GuiroShort(1)_22k.wav',\n            'HiHatClosed': 'sb2/drums/HiHatClosed(1)_22k.wav',\n            'HiHatOpen': 'sb2/drums/HiHatOpen(2)_22k.wav',\n            'HiHatPedal': 'sb2/drums/HiHatPedal(1)_22k.wav',\n            'Maracas': 'sb2/drums/Maracas(1)_22k.wav',\n            'SideStick': 'sb2/drums/SideStick(1)_22k.wav',\n            'SnareDrum': 'sb2/drums/SnareDrum(1)_22k.wav',\n            'Tambourine': 'sb2/drums/Tambourine(3)_22k.wav',\n            'Tom': 'sb2/drums/Tom(1)_22k.wav',\n            'Triangle': 'sb2/drums/Triangle(1)_22k.wav',\n            'Vibraslap': 'sb2/drums/Vibraslap(1)_22k.wav',\n            'WoodBlock': 'sb2/drums/WoodBlock(1)_22k.wav'\n        };\n        const soundbank = {};\n        function loadSoundbankSB2(loader) {\n            if (!audio.context)\n                return Promise.resolve();\n            const promises = [];\n            for (const name in SB2_SOUNDBANK_FILES) {\n                if (!soundbank[name]) {\n                    const promise = P.utils.settled(loadSoundbankBuffer(name));\n                    promises.push(promise);\n                    if (loader) {\n                        loader.addTask(new P.io.PromiseTask(promise));\n                    }\n                }\n            }\n            return Promise.all(promises);\n        }\n        audio.loadSoundbankSB2 = loadSoundbankSB2;\n        function loadSoundbankBuffer(name) {\n            return P.io.getAssetManager().loadSoundbankFile(SB2_SOUNDBANK_FILES[name])\n                .then((buffer) => P.audio.decodeAudio(buffer))\n                .then((sound) => soundbank[name] = sound);\n        }\n        function playSpan(span, key, duration, connection) {\n            if (!audio.context) {\n                throw new Error('Cannot playSpan without an AudioContext');\n            }\n            const buffer = soundbank[span.name];\n            if (!buffer) {\n                throw new Error('No soundbank entry named: ' + span.name);\n            }\n            const source = audio.context.createBufferSource();\n            const note = audio.context.createGain();\n            source.buffer = buffer;\n            if (source.loop = span.loop) {\n                source.loopStart = span.loopStart;\n                source.loopEnd = span.loopEnd;\n            }\n            source.connect(note);\n            note.connect(connection);\n            const time = audio.context.currentTime;\n            source.playbackRate.value = Math.pow(2, (key - 69) / 12) / span.baseRatio;\n            const gain = note.gain;\n            gain.value = 0;\n            gain.setValueAtTime(0, time);\n            if (span.attackEnd < duration) {\n                gain.linearRampToValueAtTime(1, time + span.attackEnd);\n                if (span.decayTime > 0 && span.holdEnd < duration) {\n                    gain.linearRampToValueAtTime(1, time + span.holdEnd);\n                    if (span.decayEnd < duration) {\n                        gain.linearRampToValueAtTime(0, time + span.decayEnd);\n                    }\n                    else {\n                        gain.linearRampToValueAtTime(1 - (duration - span.holdEnd) / span.decayTime, time + duration);\n                    }\n                }\n                else {\n                    gain.linearRampToValueAtTime(1, time + duration);\n                }\n            }\n            else {\n                gain.linearRampToValueAtTime(1, time + duration);\n            }\n            gain.linearRampToValueAtTime(0, time + duration + 0.02267573696);\n            source.start(time);\n            source.stop(time + duration + 0.02267573696);\n            return source;\n        }\n        audio.playSpan = playSpan;\n        function connectNode(node) {\n            node.connect(globalNode);\n        }\n        audio.connectNode = connectNode;\n        const ADPCM_STEPS = [\n            7, 8, 9, 10, 11, 12, 13, 14, 16, 17,\n            19, 21, 23, 25, 28, 31, 34, 37, 41, 45,\n            50, 55, 60, 66, 73, 80, 88, 97, 107, 118,\n            130, 143, 157, 173, 190, 209, 230, 253, 279, 307,\n            337, 371, 408, 449, 494, 544, 598, 658, 724, 796,\n            876, 963, 1060, 1166, 1282, 1411, 1552, 1707, 1878, 2066,\n            2272, 2499, 2749, 3024, 3327, 3660, 4026, 4428, 4871, 5358,\n            5894, 6484, 7132, 7845, 8630, 9493, 10442, 11487, 12635, 13899,\n            15289, 16818, 18500, 20350, 22385, 24623, 27086, 29794, 32767,\n        ];\n        const ADPCM_INDEX = [-1, -1, -1, -1, 2, 4, 6, 8, -1, -1, -1, -1, 2, 4, 6, 8];\n        function decodeADPCMAudio(ab, cb) {\n            var dv = new DataView(ab);\n            if (dv.getUint32(0) !== 0x52494646 || dv.getUint32(8) !== 0x57415645) {\n                return cb(new Error('Unrecognized audio format'));\n            }\n            var blocks = {};\n            var i = 12, l = dv.byteLength - 8;\n            while (i < l) {\n                blocks[String.fromCharCode(dv.getUint8(i), dv.getUint8(i + 1), dv.getUint8(i + 2), dv.getUint8(i + 3))] = i;\n                i += 8 + dv.getUint32(i + 4, true);\n            }\n            var format = dv.getUint16(20, true);\n            var channels = dv.getUint16(22, true);\n            var sampleRate = dv.getUint32(24, true);\n            var byteRate = dv.getUint32(28, true);\n            var blockAlign = dv.getUint16(32, true);\n            var bitsPerSample = dv.getUint16(34, true);\n            if (format === 17) {\n                var samplesPerBlock = dv.getUint16(38, true);\n                var blockSize = ((samplesPerBlock - 1) / 2) + 4;\n                var frameCount = dv.getUint32(blocks.fact + 8, true);\n                var buffer = audio.context.createBuffer(1, frameCount, sampleRate);\n                var channel = buffer.getChannelData(0);\n                var sample, index = 0;\n                var step, code, delta;\n                var lastByte = -1;\n                var offset = blocks.data + 8;\n                i = offset;\n                var j = 0;\n                while (true) {\n                    if ((((i - offset) % blockSize) == 0) && (lastByte < 0)) {\n                        if (i >= dv.byteLength)\n                            break;\n                        sample = dv.getInt16(i, true);\n                        i += 2;\n                        index = dv.getUint8(i);\n                        i += 1;\n                        i++;\n                        if (index > 88)\n                            index = 88;\n                        channel[j++] = sample / 32767;\n                    }\n                    else {\n                        if (lastByte < 0) {\n                            if (i >= dv.byteLength)\n                                break;\n                            lastByte = dv.getUint8(i);\n                            i += 1;\n                            code = lastByte & 0xf;\n                        }\n                        else {\n                            code = (lastByte >> 4) & 0xf;\n                            lastByte = -1;\n                        }\n                        step = ADPCM_STEPS[index];\n                        delta = 0;\n                        if (code & 4)\n                            delta += step;\n                        if (code & 2)\n                            delta += step >> 1;\n                        if (code & 1)\n                            delta += step >> 2;\n                        delta += step >> 3;\n                        index += ADPCM_INDEX[code];\n                        if (index > 88)\n                            index = 88;\n                        if (index < 0)\n                            index = 0;\n                        sample += (code & 8) ? -delta : delta;\n                        if (sample > 32767)\n                            sample = 32767;\n                        if (sample < -32768)\n                            sample = -32768;\n                        channel[j++] = sample / 32768;\n                    }\n                }\n                return cb(null, buffer);\n            }\n            cb(new Error('Unrecognized WAV format ' + format));\n        }\n        function decodeAudio(ab) {\n            if (!audio.context) {\n                return Promise.reject(new Error('No audio context'));\n            }\n            return new Promise((resolve, reject) => {\n                decodeADPCMAudio(ab, function (err1, buffer) {\n                    if (buffer) {\n                        resolve(buffer);\n                        return;\n                    }\n                    audio.context.decodeAudioData(ab, function (buffer) {\n                        resolve(buffer);\n                    }, function (err2) {\n                        reject(`Could not decode audio: ${err1} | ${err2}`);\n                    });\n                });\n            });\n        }\n        audio.decodeAudio = decodeAudio;\n    })(audio = P.audio || (P.audio = {}));\n})(P || (P = {}));\nvar P;\n(function (P) {\n    var core;\n    (function (core) {\n        ;\n        class PenColor {\n            constructor() {\n                this.x = 0;\n                this.y = 0;\n                this.z = 255;\n                this.a = 1;\n                this.mode = 0;\n                this.css = 'rgba(0, 0, 255, 1)';\n            }\n            setRGBA(rgba) {\n                this.x = rgba >> 16 & 0xff;\n                this.y = rgba >> 8 & 0xff;\n                this.z = rgba & 0xff;\n                this.a = (rgba >> 24 & 0xff) / 0xff || 1;\n                this.css = 'rgba(' + this.x + ', ' + this.y + ', ' + this.z + ', ' + this.a + ')';\n                this.mode = 0;\n            }\n            setShiftedRGBA(rgba) {\n                this.setRGBA(rgba);\n                this.toHSVA();\n            }\n            toHSLA() {\n                switch (this.mode) {\n                    case 0: {\n                        this.mode = 1;\n                        const hsl = P.utils.rgbToHSL(this.x, this.y, this.z);\n                        this.x = hsl[0];\n                        this.y = hsl[1] * 100;\n                        this.z = hsl[2] * 100;\n                        break;\n                    }\n                    case 2: {\n                        this.mode = 1;\n                        const hsl = P.utils.hsvToHSL(this.x, this.y / 100, this.z / 100);\n                        this.x = hsl[0];\n                        this.y = hsl[1] * 100;\n                        this.z = hsl[2] * 100;\n                        break;\n                    }\n                }\n            }\n            toHSVA() {\n                switch (this.mode) {\n                    case 0: {\n                        this.mode = 2;\n                        const hsv = P.utils.rgbToHSV(this.x, this.y, this.z);\n                        this.x = hsv[0];\n                        this.y = hsv[1] * 100;\n                        this.z = hsv[2] * 100;\n                        break;\n                    }\n                    case 1: {\n                        this.mode = 2;\n                        const hsv = P.utils.hslToHSV(this.x, this.y / 100, this.z / 100);\n                        this.x = hsv[0];\n                        this.y = hsv[1] * 100;\n                        this.z = hsv[2] * 100;\n                        break;\n                    }\n                }\n            }\n            toParts() {\n                switch (this.mode) {\n                    case 0: {\n                        return [this.x, this.y, this.z, this.a];\n                    }\n                    case 2: {\n                        const rgb = P.utils.hsvToRGB(this.x / 360, this.y / 100, this.z / 100);\n                        return [rgb[0], rgb[1], rgb[2], this.a];\n                    }\n                    case 1: {\n                        const rgb = P.utils.hslToRGB(this.x / 360, this.y / 100, this.z / 100);\n                        return [rgb[0], rgb[1], rgb[2], this.a];\n                    }\n                }\n            }\n            toCSS() {\n                switch (this.mode) {\n                    case 0:\n                        return this.css;\n                    case 1:\n                        return 'hsla(' + this.x + ',' + this.y + '%,' + (this.z > 100 ? 200 - this.z : this.z) + '%,' + this.a + ')';\n                    case 2: {\n                        const rgb = P.utils.hsvToRGB(this.x / 360, this.y / 100, this.z / 100);\n                        return 'rgba(' + rgb[0] + ', ' + rgb[1] + ', ' + rgb[2] + ', ' + this.a + ')';\n                    }\n                }\n            }\n            setParam(param, value) {\n                this.toHSVA();\n                switch (param) {\n                    case 'color':\n                        this.x = (value * 360 / 100) % 360;\n                        if (this.x < 0)\n                            this.x += 360;\n                        break;\n                    case 'saturation':\n                        this.y = P.utils.clamp(value, 0, 100);\n                        break;\n                    case 'brightness':\n                        this.z = P.utils.clamp(value, 0, 100);\n                        break;\n                    case 'transparency':\n                        this.a = 1 - (value / 100);\n                        if (this.a > 1)\n                            this.a = 1;\n                        if (this.a < 0)\n                            this.a = 0;\n                        break;\n                }\n            }\n            changeParam(param, value) {\n                this.toHSVA();\n                switch (param) {\n                    case 'color':\n                        this.x = (this.x + value * 360 / 100) % 360;\n                        if (this.x < 0)\n                            this.x += 360;\n                        break;\n                    case 'saturation':\n                        this.y = P.utils.clamp(this.y + value, 0, 100);\n                        break;\n                    case 'brightness':\n                        this.z = P.utils.clamp(this.z + value, 0, 100);\n                        break;\n                    case 'transparency':\n                        this.a = Math.max(0, Math.min(1, this.a - value / 100));\n                        break;\n                }\n            }\n            copy(other) {\n                this.x = other.x;\n                this.y = other.y;\n                this.z = other.z;\n                this.a = other.a;\n                this.css = other.css;\n                this.mode = other.mode;\n            }\n        }\n        core.PenColor = PenColor;\n        class Base {\n            constructor() {\n                this.isStage = false;\n                this.isSprite = false;\n                this.isClone = false;\n                this.visible = true;\n                this.scratchX = 0;\n                this.scratchY = 0;\n                this.name = '';\n                this.costumes = [];\n                this.currentCostumeIndex = 0;\n                this.sounds = [];\n                this.soundRefs = {};\n                this.instrument = 0;\n                this.volume = 1;\n                this.node = null;\n                this.activeSounds = new Set();\n                this.watchers = {};\n                this.listWatchers = {};\n                this.vars = {};\n                this.lists = {};\n                this.saying = false;\n                this.thinking = false;\n                this.sayId = 0;\n                this.procedures = {};\n                this.listeners = {\n                    whenClicked: [],\n                    whenCloned: [],\n                    whenGreenFlag: [],\n                    whenIReceive: {},\n                    whenKeyPressed: {},\n                    whenSceneStarts: {},\n                    edgeActivated: [],\n                };\n                this.fns = [];\n                this.filters = {\n                    color: 0,\n                    fisheye: 0,\n                    whirl: 0,\n                    pixelate: 0,\n                    mosaic: 0,\n                    brightness: 0,\n                    ghost: 0,\n                };\n                this.soundFilters = {\n                    pitch: 0,\n                };\n                this.penSize = 1;\n                this.penColor = new PenColor();\n                this.isPenDown = false;\n            }\n            addSound(sound) {\n                this.soundRefs[sound.name] = sound;\n                this.sounds.push(sound);\n            }\n            showVariable(name, visible) {\n                let watcher = this.watchers[name];\n                if (!watcher) {\n                    const newWatcher = this.createVariableWatcher(this, name);\n                    if (!newWatcher) {\n                        return;\n                    }\n                    newWatcher.init();\n                    this.watchers[name] = watcher = newWatcher;\n                    this.stage.allWatchers.push(watcher);\n                }\n                watcher.setVisible(visible);\n            }\n            showList(name, visible) {\n                let watcher = this.listWatchers[name];\n                if (!watcher) {\n                    const newWatcher = this.createListWatcher(this, name);\n                    if (!newWatcher) {\n                        return;\n                    }\n                    newWatcher.init();\n                    this.listWatchers[name] = watcher = newWatcher;\n                    this.stage.allWatchers.push(watcher);\n                }\n                watcher.setVisible(visible);\n            }\n            showNextCostume() {\n                this.currentCostumeIndex = (this.currentCostumeIndex + 1) % this.costumes.length;\n                if (this.saying && isSprite(this))\n                    this.updateBubble();\n            }\n            showPreviousCostume() {\n                var length = this.costumes.length;\n                this.currentCostumeIndex = (this.currentCostumeIndex + length - 1) % length;\n                if (this.saying && isSprite(this))\n                    this.updateBubble();\n            }\n            getCostumeName() {\n                return this.costumes[this.currentCostumeIndex] ? this.costumes[this.currentCostumeIndex].name : '';\n            }\n            setCostume(costume) {\n                if (typeof costume !== 'number') {\n                    costume = '' + costume;\n                    for (var i = 0; i < this.costumes.length; i++) {\n                        if (this.costumes[i].name === costume) {\n                            this.currentCostumeIndex = i;\n                            if (this.saying && isSprite(this))\n                                this.updateBubble();\n                            return;\n                        }\n                    }\n                    if (costume === (this.isSprite ? 'next costume' : 'next backdrop')) {\n                        this.showNextCostume();\n                        return;\n                    }\n                    if (costume === (this.isSprite ? 'previous costume' : 'previous backdrop')) {\n                        this.showPreviousCostume();\n                        return;\n                    }\n                    if (!isFinite(costume) || !/\\d/.test(costume)) {\n                        return;\n                    }\n                }\n                if (Number.isNaN(costume) || costume === Infinity || costume === -Infinity) {\n                    costume = 1;\n                }\n                var i = (Math.floor(costume) - 1) % this.costumes.length;\n                if (i < 0)\n                    i += this.costumes.length;\n                this.currentCostumeIndex = i;\n                if (isSprite(this) && this.saying)\n                    this.updateBubble();\n            }\n            setFilter(name, value) {\n                switch (name) {\n                    case 'ghost':\n                        if (value < 0)\n                            value = 0;\n                        if (value > 100)\n                            value = 100;\n                        break;\n                    case 'brightness':\n                        if (value < -100)\n                            value = -100;\n                        if (value > 100)\n                            value = 100;\n                        break;\n                    case 'color':\n                        if (value === Infinity) {\n                            break;\n                        }\n                        value = value % 200;\n                        if (value < 0)\n                            value += 200;\n                        break;\n                }\n                this.filters[name] = value;\n            }\n            changeFilter(name, value) {\n                this.setFilter(name, this.filters[name] + value);\n            }\n            resetFilters() {\n                this.filters = {\n                    color: 0,\n                    fisheye: 0,\n                    whirl: 0,\n                    pixelate: 0,\n                    mosaic: 0,\n                    brightness: 0,\n                    ghost: 0\n                };\n                this.soundFilters = {\n                    pitch: 0\n                };\n            }\n            setSoundFilter(name, value) {\n                value = value || 0;\n                switch (name.toLowerCase()) {\n                    case 'pitch':\n                        this.soundFilters.pitch = value;\n                        if (!this.stage.removeLimits) {\n                            if (this.soundFilters.pitch > 360)\n                                this.soundFilters.pitch = 360;\n                            if (this.soundFilters.pitch < -360)\n                                this.soundFilters.pitch = -360;\n                        }\n                        break;\n                }\n            }\n            changeSoundFilter(name, value) {\n                switch (name.toLowerCase()) {\n                    case 'pitch':\n                        this.soundFilters.pitch += value;\n                        if (!this.stage.removeLimits) {\n                            if (this.soundFilters.pitch > 360)\n                                this.soundFilters.pitch = 360;\n                            if (this.soundFilters.pitch < -360)\n                                this.soundFilters.pitch = -360;\n                        }\n                        break;\n                }\n            }\n            resetSoundFilters() {\n                this.soundFilters = {\n                    pitch: 0,\n                };\n            }\n            getSound(name) {\n                if (typeof name === 'string') {\n                    var s = this.soundRefs[name];\n                    if (s)\n                        return s;\n                    name = parseInt(name, 10);\n                }\n                var l = this.sounds.length;\n                if (l && typeof name === 'number' && name === name) {\n                    var i = Math.round(name - 1) % l;\n                    if (i < 0)\n                        i += l;\n                    return this.sounds[i];\n                }\n            }\n            stopSounds() {\n                if (this.node) {\n                    for (const sound of this.activeSounds) {\n                        sound.stopped = true;\n                        if (sound.node) {\n                            sound.node.disconnect();\n                        }\n                    }\n                    this.activeSounds.clear();\n                    this.node.disconnect();\n                    this.node = null;\n                }\n            }\n            stopSoundsExcept(originBase) {\n                if (this.node) {\n                    for (const sound of this.activeSounds) {\n                        if (sound.base !== originBase) {\n                            if (sound.node) {\n                                sound.node.disconnect();\n                            }\n                            sound.stopped = true;\n                            this.activeSounds.delete(sound);\n                        }\n                    }\n                }\n            }\n            ask(question) {\n                var stage = this.stage;\n                if (question) {\n                    if (this.visible && isSprite(this)) {\n                        this.say(question);\n                        stage.promptTitle.style.display = 'none';\n                    }\n                    else {\n                        stage.promptTitle.style.display = 'block';\n                        stage.promptTitle.textContent = question;\n                    }\n                }\n                else {\n                    stage.promptTitle.style.display = 'none';\n                }\n                stage.hidePrompt = false;\n                stage.prompter.style.display = 'block';\n                stage.prompt.value = '';\n                stage.prompt.focus();\n            }\n            say(text, thinking = false) {\n                text = '' + text;\n                if (text.length === 0) {\n                    this.saying = false;\n                    if (this.bubbleContainer)\n                        this.bubbleContainer.style.display = 'none';\n                    return ++this.sayId;\n                }\n                this.saying = true;\n                this.thinking = thinking;\n                if (!this.bubbleContainer) {\n                    this.bubbleContainer = document.createElement('div');\n                    this.bubbleContainer.style.maxWidth = (127 / 14) + 'em';\n                    this.bubbleContainer.style.minWidth = (48 / 14) + 'em';\n                    this.bubbleContainer.style.padding = (8 / 14) + 'em ' + (10 / 14) + 'em';\n                    this.bubbleContainer.style.border = (3 / 14) + 'em solid rgb(160, 160, 160)';\n                    this.bubbleContainer.style.borderRadius = (10 / 14) + 'em';\n                    this.bubbleContainer.style.background = '#fff';\n                    this.bubbleContainer.style.position = 'absolute';\n                    this.bubbleContainer.style.font = 'bold 1.4em sans-serif';\n                    this.bubbleContainer.style.whiteSpace = 'pre-wrap';\n                    this.bubbleContainer.style.wordWrap = 'break-word';\n                    this.bubbleContainer.style.textAlign = 'center';\n                    this.bubbleContainer.style.cursor = 'default';\n                    this.bubbleContainer.style.pointerEvents = 'auto';\n                    this.bubbleContainer.appendChild(this.bubbleText = document.createTextNode(''));\n                    this.bubbleContainer.appendChild(this.bubblePointer = document.createElement('div'));\n                    this.bubblePointer.style.position = 'absolute';\n                    this.bubblePointer.style.height = (21 / 14) + 'em';\n                    this.bubblePointer.style.width = (44 / 14) + 'em';\n                    this.bubblePointer.style.background = `url(\"${P.io.config.localPath}icons.svg\")`;\n                    this.bubblePointer.style.backgroundSize = (384 / 14) + 'em ' + (64 / 14) + 'em';\n                    this.bubblePointer.style.backgroundPositionY = (-4 / 14) + 'em';\n                    this.stage.ui.appendChild(this.bubbleContainer);\n                }\n                this.bubblePointer.style.backgroundPositionX = (thinking ? -323 : -259) / 14 + 'em';\n                this.bubbleContainer.style.display = 'block';\n                this.bubbleText.nodeValue = text;\n                this.updateBubble();\n                return ++this.sayId;\n            }\n            updateBubble() {\n                if (!this.visible || !this.saying) {\n                    this.bubbleContainer.style.display = 'none';\n                    return;\n                }\n                this.bubbleContainer.style.display = 'block';\n                const b = this.rotatedBounds();\n                const left = 240 + b.right;\n                var bottom = 180 + b.top;\n                const bcr = this.bubbleContainer.getBoundingClientRect();\n                const height = (bcr.bottom - bcr.top) / this.stage.zoom;\n                const width = (bcr.right - bcr.left) / this.stage.zoom;\n                this.bubblePointer.style.top = ((height - 6) / 14) + 'em';\n                if (left + width + 2 > 480) {\n                    var d = (240 - b.left) / 14;\n                    if (d > 25)\n                        d = 25;\n                    this.bubbleContainer.style.right = d + 'em';\n                    this.bubbleContainer.style.left = 'auto';\n                    this.bubblePointer.style.right = (3 / 14) + 'em';\n                    this.bubblePointer.style.left = 'auto';\n                    this.bubblePointer.style.backgroundPositionY = (-36 / 14) + 'em';\n                }\n                else {\n                    this.bubbleContainer.style.left = (left / 14) + 'em';\n                    this.bubbleContainer.style.right = 'auto';\n                    this.bubblePointer.style.left = (3 / 14) + 'em';\n                    this.bubblePointer.style.right = 'auto';\n                    this.bubblePointer.style.backgroundPositionY = (-4 / 14) + 'em';\n                }\n                if (bottom + height + 2 > 360) {\n                    bottom = 360 - height - 2;\n                }\n                if (bottom < 19) {\n                    bottom = 19;\n                }\n                this.bubbleContainer.style.bottom = (bottom / 14) + 'em';\n            }\n            remove() {\n                if (this.bubbleContainer) {\n                    this.stage.ui.removeChild(this.bubbleContainer);\n                }\n                if (this.node && this.isClone && !this.isStage) {\n                    for (const sound of this.activeSounds) {\n                        if (sound.node) {\n                            sound.node.disconnect();\n                        }\n                        sound.stopped = true;\n                    }\n                    this.activeSounds.clear();\n                    this.node.disconnect();\n                    this.node.connect(this.stage.getAudioNode());\n                    this.node = null;\n                }\n            }\n            getAudioNode() {\n                if (this.node) {\n                    return this.node;\n                }\n                if (!P.audio.context) {\n                    throw new Error('No audio context');\n                }\n                this.node = P.audio.context.createGain();\n                this.node.gain.value = this.volume;\n                P.audio.connectNode(this.node);\n                return this.node;\n            }\n            createVariableWatcher(target, variableName) {\n                return null;\n            }\n            createListWatcher(target, listName) {\n                return null;\n            }\n            dotPen() {\n                this.stage.renderer.penDot(this.penColor, this.penSize, this.scratchX, this.scratchY);\n            }\n            stamp() {\n                this.stage.renderer.penStamp(this);\n            }\n            addWhenKeyPressedHandler(key, fn) {\n                if (this.listeners.whenKeyPressed[key]) {\n                    this.listeners.whenKeyPressed[key].push(fn);\n                }\n                else {\n                    this.listeners.whenKeyPressed[key] = [fn];\n                }\n            }\n        }\n        core.Base = Base;\n        class Stage extends Base {\n            constructor() {\n                super();\n                this.stage = this;\n                this.isStage = true;\n                this.children = [];\n                this.allWatchers = [];\n                this.answer = '';\n                this.promptId = 0;\n                this.nextPromptId = 0;\n                this.hidePrompt = false;\n                this.zoom = 1;\n                this.rawMouseX = 0;\n                this.rawMouseY = 0;\n                this.mouseX = 0;\n                this.mouseY = 0;\n                this.mousePressed = false;\n                this.tempoBPM = 60;\n                this.username = '';\n                this.counter = 0;\n                this.cloudHandler = null;\n                this.cloudVariables = [];\n                this.microphone = null;\n                this.tts = null;\n                this.extensions = [];\n                this.useSpriteFencing = false;\n                this.removeLimits = false;\n                this.runtime = new P.runtime.Runtime(this);\n                this.keys = [];\n                this.keys.any = 0;\n                this.root = document.createElement('div');\n                this.root.classList.add('forkphorus-root');\n                if (P.config.useWebGL) {\n                    this.renderer = new P.renderer.webgl.WebGLProjectRenderer(this);\n                }\n                else {\n                    this.renderer = new P.renderer.canvas2d.ProjectRenderer2D(this);\n                }\n                this.renderer.resize(1);\n                this.renderer.init(this.root);\n                this.canvas = this.renderer.canvas;\n                this.ui = document.createElement('div');\n                this.root.appendChild(this.ui);\n                this.ui.style.pointerEvents = 'none';\n                this.canvas.tabIndex = 0;\n                this.canvas.style.outline = 'none';\n                this.prompter = document.createElement('div');\n                this.ui.appendChild(this.prompter);\n                this.prompter.style.zIndex = '1';\n                this.prompter.style.pointerEvents = 'auto';\n                this.prompter.style.position = 'absolute';\n                this.prompter.style.left =\n                    this.prompter.style.right = '1.4em';\n                this.prompter.style.bottom = '.6em';\n                this.prompter.style.padding = '.5em 3.0em .5em .5em';\n                this.prompter.style.border = '.3em solid rgb(46, 174, 223)';\n                this.prompter.style.borderRadius = '.8em';\n                this.prompter.style.background = '#fff';\n                this.prompter.style.display = 'none';\n                this.promptTitle = document.createElement('div');\n                this.prompter.appendChild(this.promptTitle);\n                this.promptTitle.textContent = '';\n                this.promptTitle.style.cursor = 'default';\n                this.promptTitle.style.font = 'bold 1.3em sans-serif';\n                this.promptTitle.style.margin = '0 ' + (-25 / 13) + 'em ' + (5 / 13) + 'em 0';\n                this.promptTitle.style.whiteSpace = 'pre';\n                this.promptTitle.style.overflow = 'hidden';\n                this.promptTitle.style.textOverflow = 'ellipsis';\n                this.prompt = document.createElement('input');\n                this.prompter.appendChild(this.prompt);\n                this.prompt.style.border = '0';\n                this.prompt.style.background = '#eee';\n                this.prompt.style.boxSizing = 'border-box';\n                this.prompt.style.font = '1.3em sans-serif';\n                this.prompt.style.padding = '0 ' + (3 / 13) + 'em';\n                this.prompt.style.outline = '0';\n                this.prompt.style.margin = '0';\n                this.prompt.style.width = '100%';\n                this.prompt.style.height = '' + (20 / 13) + 'em';\n                this.prompt.style.display = 'block';\n                this.prompt.style.borderRadius = '0';\n                this.prompt.style.boxShadow = 'inset ' + (1 / 13) + 'em ' + (1 / 13) + 'em ' + (2 / 13) + 'em rgba(0, 0, 0, .2), inset ' + (-1 / 13) + 'em ' + (-1 / 13) + 'em ' + (1 / 13) + 'em rgba(255, 255, 255, .2)';\n                this.prompt.style.webkitAppearance = 'none';\n                this.promptButton = document.createElement('div');\n                this.prompter.appendChild(this.promptButton);\n                this.promptButton.style.width = '2.2em';\n                this.promptButton.style.height = '2.2em';\n                this.promptButton.style.position = 'absolute';\n                this.promptButton.style.right = '.4em';\n                this.promptButton.style.bottom = '.4em';\n                this.promptButton.style.background = `url(\"${P.io.config.localPath}icons.svg\") -22.8em -0.4em`;\n                this.promptButton.style.backgroundSize = '38.4em 6.4em';\n                this.addEventListeners();\n            }\n            addEventListeners() {\n                this._onmousedown = this._onmousedown.bind(this);\n                this._onmouseup = this._onmouseup.bind(this);\n                this._onmousemove = this._onmousemove.bind(this);\n                this._ontouchstart = this._ontouchstart.bind(this);\n                this._ontouchend = this._ontouchend.bind(this);\n                this._ontouchmove = this._ontouchmove.bind(this);\n                document.addEventListener('mousedown', this._onmousedown);\n                document.addEventListener('mouseup', this._onmouseup);\n                document.addEventListener('mousemove', this._onmousemove);\n                document.addEventListener('touchstart', this._ontouchstart, { passive: false });\n                document.addEventListener('touchend', this._ontouchend);\n                document.addEventListener('touchmove', this._ontouchmove);\n                this.root.addEventListener('wheel', this._onwheel.bind(this));\n                this.root.addEventListener('keyup', this._onkeyup.bind(this));\n                this.root.addEventListener('keydown', this._onkeydown.bind(this));\n                this.promptButton.addEventListener('touchstart', this.submitPrompt.bind(this));\n                this.promptButton.addEventListener('mousedown', this.submitPrompt.bind(this));\n                this.prompt.addEventListener('keydown', (e) => {\n                    if (e.keyCode === 13)\n                        this.submitPrompt();\n                });\n            }\n            removeEventListeners() {\n                document.removeEventListener('mousedown', this._onmousedown);\n                document.removeEventListener('mouseup', this._onmouseup);\n                document.removeEventListener('mousemove', this._onmousemove);\n                document.removeEventListener('touchstart', this._ontouchstart);\n                document.removeEventListener('touchend', this._ontouchend);\n                document.removeEventListener('touchmove', this._ontouchmove);\n            }\n            _onwheel(e) {\n                if (e.deltaY > 0) {\n                    this.runtime.trigger('whenKeyPressed', \"down arrow\");\n                }\n                else if (e.deltaY < 0) {\n                    this.runtime.trigger('whenKeyPressed', \"up arrow\");\n                }\n            }\n            keyEventToCode(e) {\n                const key = e.key || '';\n                switch (key) {\n                    case ' ': return \"space\";\n                    case 'Enter': return \"enter\";\n                    case 'ArrowLeft':\n                    case 'Left': return \"left arrow\";\n                    case 'ArrowUp':\n                    case 'Up': return \"up arrow\";\n                    case 'ArrowRight':\n                    case 'Right': return \"right arrow\";\n                    case 'ArrowDown':\n                    case 'Down': return \"down arrow\";\n                    case 'Escape': return \"esc\";\n                    case 'Tab': return \"tab\";\n                    case 'Backspace': return \"backspace\";\n                    case 'Delete': return \"delete\";\n                    case 'Shift': return \"_shift\";\n                    case 'Control': return \"control\";\n                    case 'Insert': return \"insert\";\n                    case 'Home': return \"home\";\n                    case 'End': return \"end\";\n                    case 'PageUp': return \"page up\";\n                    case 'PageDown': return \"page down\";\n                }\n                if (key.length !== 1) {\n                    return null;\n                }\n                return '' + key.toLowerCase().charCodeAt(0);\n            }\n            _onkeyup(e) {\n                const c = this.keyEventToCode(e);\n                if (c === null)\n                    return;\n                if (this.keys[c])\n                    this.keys.any--;\n                this.keys[c] = false;\n                e.stopPropagation();\n                if (e.target === this.canvas) {\n                    e.preventDefault();\n                }\n            }\n            _onkeydown(e) {\n                const c = this.keyEventToCode(e);\n                if (c === null)\n                    return;\n                if (c == \"tab\" && !e.shiftKey)\n                    return;\n                if (!this.keys[c])\n                    this.keys.any++;\n                this.keys[c] = true;\n                if (e.ctrlKey || e.altKey || e.metaKey || c === \"esc\")\n                    return;\n                e.stopPropagation();\n                if (e.target === this.canvas) {\n                    e.preventDefault();\n                    this.runtime.trigger('whenKeyPressed', c);\n                }\n            }\n            _onmousedown(e) {\n                if (!this.runtime.isRunning)\n                    return;\n                this.updateMousePosition(e);\n                this.mousePressed = true;\n                if (e.target === this.canvas) {\n                    this.clickMouse();\n                    e.preventDefault();\n                    this.canvas.focus();\n                }\n                this.onmousedown(e);\n            }\n            _onmouseup(e) {\n                if (!this.runtime.isRunning)\n                    return;\n                this.updateMousePosition(e);\n                this.releaseMouse();\n                this.onmouseup(e);\n            }\n            _onmousemove(e) {\n                if (!this.runtime.isRunning)\n                    return;\n                this.updateMousePosition(e);\n                this.onmousemove(e);\n            }\n            _ontouchend(e) {\n                if (!this.runtime.isRunning)\n                    return;\n                this.releaseMouse();\n                for (var i = 0; i < e.changedTouches.length; i++) {\n                    const t = e.changedTouches[i];\n                    this.ontouch(e, t);\n                }\n            }\n            _ontouchstart(e) {\n                if (!this.runtime.isRunning)\n                    return;\n                this.mousePressed = true;\n                for (var i = 0; i < e.changedTouches.length; i++) {\n                    const t = e.changedTouches[i];\n                    this.updateMousePosition(t);\n                    if (e.target === this.canvas) {\n                        this.clickMouse();\n                    }\n                    this.ontouch(e, t);\n                }\n                if (e.target === this.canvas)\n                    e.preventDefault();\n            }\n            _ontouchmove(e) {\n                if (!this.runtime.isRunning)\n                    return;\n                this.updateMousePosition(e.changedTouches[0]);\n                for (var i = 0; i < e.changedTouches.length; i++) {\n                    const t = e.changedTouches[i];\n                    this.ontouch(e, t);\n                }\n            }\n            ontouch(e, t) { }\n            onmousedown(e) { }\n            onmouseup(e) { }\n            onmousemove(e) { }\n            destroy() {\n                this.runtime.stopAll();\n                this.runtime.pause();\n                this.stopAllSounds();\n                for (const extension of this.extensions) {\n                    extension.destroy();\n                }\n                this.renderer.destroy();\n                this.removeEventListeners();\n            }\n            pauseExtensions() {\n                for (const extension of this.extensions) {\n                    extension.onpause();\n                }\n            }\n            startExtensions() {\n                for (const extension of this.extensions) {\n                    extension.onstart();\n                }\n            }\n            updateExtensions() {\n                if (this.extensions.length) {\n                    for (const extension of this.extensions) {\n                        extension.update();\n                    }\n                }\n            }\n            focus() {\n                if (this.promptId < this.nextPromptId) {\n                    this.prompt.focus();\n                }\n                else {\n                    this.canvas.focus();\n                }\n            }\n            updateMousePosition(e) {\n                var rect = this.canvas.getBoundingClientRect();\n                var x = (e.clientX - rect.left) / this.zoom - 240;\n                var y = 180 - (e.clientY - rect.top) / this.zoom;\n                this.rawMouseX = x;\n                this.rawMouseY = y;\n                if (x < -240)\n                    x = -240;\n                if (x > 240)\n                    x = 240;\n                if (y < -180)\n                    y = -180;\n                if (y > 180)\n                    y = 180;\n                this.mouseX = Math.round(x);\n                this.mouseY = Math.round(y);\n            }\n            setZoom(zoom) {\n                if (this.zoom === zoom)\n                    return;\n                this.renderer.resize(zoom);\n                this.root.style.width = (480 * zoom | 0) + 'px';\n                this.root.style.height = (360 * zoom | 0) + 'px';\n                this.root.style.fontSize = (zoom * 10) + 'px';\n                this.zoom = zoom;\n                for (const watcher of this.allWatchers) {\n                    if (watcher instanceof P.sb3.Scratch3ListWatcher) {\n                        watcher.updateList();\n                    }\n                }\n            }\n            clickMouse() {\n                this.mouseSprite = undefined;\n                for (var i = this.children.length; i--;) {\n                    var c = this.children[i];\n                    if (c.visible && c.filters.ghost < 100 && c.touching(\"_mouse_\")) {\n                        if (c.isDraggable) {\n                            this.mouseSprite = c;\n                            c.mouseDown();\n                        }\n                        else {\n                            this.runtime.triggerFor(c, 'whenClicked');\n                        }\n                        return;\n                    }\n                }\n                this.runtime.triggerFor(this, 'whenClicked');\n            }\n            releaseMouse() {\n                this.mousePressed = false;\n                if (this.mouseSprite) {\n                    this.mouseSprite.mouseUp();\n                    this.mouseSprite = undefined;\n                }\n            }\n            setFilter(name, value) {\n                super.setFilter(name, value);\n                this.renderer.onStageFiltersChanged();\n            }\n            resetFilters() {\n                super.resetFilters();\n                this.renderer.onStageFiltersChanged();\n            }\n            getObject(name) {\n                for (var i = 0; i < this.children.length; i++) {\n                    var c = this.children[i];\n                    if (c.name === name && !c.isClone) {\n                        return c;\n                    }\n                }\n                if (name === \"_stage_\" || name === this.name) {\n                    return this;\n                }\n                return null;\n            }\n            getObjects(name) {\n                const result = [];\n                for (var i = 0; i < this.children.length; i++) {\n                    if (this.children[i].name === name) {\n                        result.push(this.children[i]);\n                    }\n                }\n                return result;\n            }\n            getPosition(name) {\n                switch (name) {\n                    case \"_mouse_\": return {\n                        x: this.mouseX,\n                        y: this.mouseY,\n                    };\n                    case \"_random_\": return {\n                        x: Math.round(480 * Math.random() - 240),\n                        y: Math.round(360 * Math.random() - 180),\n                    };\n                }\n                const sprite = this.getObject(name);\n                if (!sprite)\n                    return null;\n                return {\n                    x: sprite.scratchX,\n                    y: sprite.scratchY,\n                };\n            }\n            draw() {\n                this.renderer.drawFrame();\n                for (var i = this.allWatchers.length; i--;) {\n                    var w = this.allWatchers[i];\n                    if (w.visible) {\n                        w.update();\n                    }\n                }\n                if (this.hidePrompt) {\n                    this.hidePrompt = false;\n                    this.prompter.style.display = 'none';\n                    this.canvas.focus();\n                }\n            }\n            showVideo(visible) {\n                if (P.config.supportVideoSensing) {\n                    if (visible) {\n                        if (!this.videoElement) {\n                            this.videoElement = document.createElement('video');\n                            this.videoElement.onloadedmetadata = () => {\n                                this.videoElement.play();\n                            };\n                            this.videoElement.style.opacity = '0.5';\n                            this.root.insertBefore(this.videoElement, this.canvas);\n                            navigator.mediaDevices.getUserMedia({ video: true, audio: false })\n                                .then((stream) => this.videoElement.srcObject = stream);\n                        }\n                        this.videoElement.style.display = 'block';\n                    }\n                    else {\n                        if (this.videoElement) {\n                            this.videoElement.style.display = 'none';\n                        }\n                    }\n                }\n            }\n            addExtension(extension) {\n                this.extensions.push(extension);\n            }\n            initMicrophone() {\n                if (!this.microphone) {\n                    this.microphone = new P.ext.microphone.MicrophoneExtension(this);\n                    this.addExtension(this.microphone);\n                }\n            }\n            initTextToSpeech() {\n                if (!this.tts) {\n                    this.tts = new P.ext.tts.TextToSpeechExtension(this);\n                    this.addExtension(this.tts);\n                }\n            }\n            setCloudHandler(cloudHandler) {\n                this.cloudHandler = cloudHandler;\n                this.addExtension(cloudHandler);\n            }\n            stopAllSounds() {\n                for (var children = this.children, i = children.length; i--;) {\n                    children[i].stopSounds();\n                }\n                this.stopSounds();\n            }\n            removeAllClones() {\n                var i = this.children.length;\n                while (i--) {\n                    if (this.children[i].isClone) {\n                        this.children[i].remove();\n                        this.children.splice(i, 1);\n                    }\n                }\n            }\n            moveTo() {\n            }\n            gotoObject() {\n            }\n            forward() {\n            }\n            setDirection(direction) {\n            }\n            rotatedBounds() {\n                return {\n                    top: 0,\n                    bottom: 0,\n                    left: 0,\n                    right: 0,\n                };\n            }\n            touching(thing) {\n                if (thing == \"_mouse_\") {\n                    return true;\n                }\n                return false;\n            }\n            touchingColor(color) {\n                return false;\n            }\n            colorTouchingColor(colorA, colorB) {\n                return false;\n            }\n            submitPrompt() {\n                if (this.promptId < this.nextPromptId) {\n                    this.answer = this.prompt.value;\n                    this.promptId += 1;\n                    if (this.promptId >= this.nextPromptId) {\n                        this.hidePrompt = true;\n                    }\n                }\n            }\n            clearPen() {\n                this.renderer.penClear();\n            }\n        }\n        core.Stage = Stage;\n        class Sprite extends Base {\n            constructor(stage) {\n                super();\n                this.isSprite = true;\n                this.isClone = false;\n                this.direction = 90;\n                this.rotationStyle = 0;\n                this.isDraggable = false;\n                this.isDragging = false;\n                this.scale = 1;\n                this.dragStartX = 0;\n                this.dragStartY = 0;\n                this.dragOffsetX = 0;\n                this.dragOffsetY = 0;\n                this.stage = stage;\n            }\n            mouseDown() {\n                this.dragStartX = this.scratchX;\n                this.dragStartY = this.scratchY;\n                this.dragOffsetX = this.scratchX - this.stage.mouseX;\n                this.dragOffsetY = this.scratchY - this.stage.mouseY;\n                this.isDragging = true;\n            }\n            mouseUp() {\n                if (this.isDragging && this.scratchX === this.dragStartX && this.scratchY === this.dragStartY) {\n                    this.stage.runtime.triggerFor(this, 'whenClicked');\n                }\n                this.isDragging = false;\n            }\n            rotatedBounds() {\n                const costume = this.costumes[this.currentCostumeIndex];\n                const scale = costume.scale * this.scale;\n                var left = -costume.rotationCenterX * scale;\n                var top = costume.rotationCenterY * scale;\n                var right = left + costume.width * scale;\n                var bottom = top - costume.height * scale;\n                if (this.rotationStyle !== 0) {\n                    if (this.rotationStyle === 1 && this.direction < 0) {\n                        right = -left;\n                        left = right - costume.width * costume.scale * this.scale;\n                    }\n                    return {\n                        left: this.scratchX + left,\n                        right: this.scratchX + right,\n                        top: this.scratchY + top,\n                        bottom: this.scratchY + bottom\n                    };\n                }\n                const mSin = Math.sin(this.direction * Math.PI / 180);\n                const mCos = Math.cos(this.direction * Math.PI / 180);\n                const tlX = mSin * left - mCos * top;\n                const tlY = mCos * left + mSin * top;\n                const trX = mSin * right - mCos * top;\n                const trY = mCos * right + mSin * top;\n                const blX = mSin * left - mCos * bottom;\n                const blY = mCos * left + mSin * bottom;\n                const brX = mSin * right - mCos * bottom;\n                const brY = mCos * right + mSin * bottom;\n                return {\n                    left: this.scratchX + Math.min(tlX, trX, blX, brX),\n                    right: this.scratchX + Math.max(tlX, trX, blX, brX),\n                    top: this.scratchY + Math.max(tlY, trY, blY, brY),\n                    bottom: this.scratchY + Math.min(tlY, trY, blY, brY)\n                };\n            }\n            showRotatedBounds() {\n                var bounds = this.rotatedBounds();\n                var div = document.createElement('div');\n                div.style.outline = '1px solid red';\n                div.style.position = 'absolute';\n                div.style.left = (240 + bounds.left) + 'px';\n                div.style.top = (180 - bounds.top) + 'px';\n                div.style.width = (bounds.right - bounds.left) + 'px';\n                div.style.height = (bounds.top - bounds.bottom) + 'px';\n                this.stage.canvas.parentNode.appendChild(div);\n            }\n            createVariableWatcher(target, variableName) {\n                return this.stage.createVariableWatcher(target, variableName);\n            }\n            forward(steps) {\n                const d = (90 - this.direction) * Math.PI / 180;\n                this.moveTo(this.scratchX + steps * Math.cos(d), this.scratchY + steps * Math.sin(d));\n            }\n            keepInView() {\n                const rb = this.rotatedBounds();\n                const width = rb.right - rb.left;\n                const height = rb.top - rb.bottom;\n                const bounds = Math.min(15, Math.floor(Math.min(width, height) / 2));\n                if (rb.right - bounds < -240) {\n                    this.scratchX -= rb.right - bounds + 240;\n                }\n                if (rb.left + bounds > 240) {\n                    this.scratchX -= rb.left + bounds - 240;\n                }\n                if (rb.bottom + bounds > 180) {\n                    this.scratchY -= rb.bottom + bounds - 180;\n                }\n                if (rb.top - bounds < -180) {\n                    this.scratchY -= rb.top - bounds + 180;\n                }\n            }\n            moveTo(x, y) {\n                var ox = this.scratchX;\n                var oy = this.scratchY;\n                if (ox === x && oy === y && !this.isPenDown) {\n                    return;\n                }\n                this.scratchX = x;\n                this.scratchY = y;\n                if (this.stage.useSpriteFencing) {\n                    this.keepInView();\n                }\n                if (this.isPenDown && !this.isDragging) {\n                    this.stage.renderer.penLine(this.penColor, this.penSize, ox, oy, x, y);\n                }\n                if (this.saying) {\n                    this.updateBubble();\n                }\n            }\n            setDirection(degrees) {\n                if (!isFinite(degrees))\n                    return;\n                var d = degrees % 360;\n                if (d > 180)\n                    d -= 360;\n                if (d <= -180)\n                    d += 360;\n                this.direction = d;\n                if (this.saying)\n                    this.updateBubble();\n            }\n            clone() {\n                const clone = this._clone();\n                clone.isClone = true;\n                for (const key of Object.keys(this.vars)) {\n                    clone.vars[key] = this.vars[key];\n                }\n                for (const key of Object.keys(this.lists)) {\n                    clone.lists[key] = this.lists[key].slice(0);\n                }\n                clone.filters = {\n                    color: this.filters.color,\n                    fisheye: this.filters.fisheye,\n                    whirl: this.filters.whirl,\n                    pixelate: this.filters.pixelate,\n                    mosaic: this.filters.mosaic,\n                    brightness: this.filters.brightness,\n                    ghost: this.filters.ghost\n                };\n                clone.procedures = this.procedures;\n                clone.listeners = this.listeners;\n                clone.fns = this.fns;\n                clone.name = this.name;\n                clone.costumes = this.costumes;\n                clone.currentCostumeIndex = this.currentCostumeIndex;\n                clone.sounds = this.sounds;\n                clone.soundRefs = this.soundRefs;\n                clone.direction = this.direction;\n                clone.instrument = this.instrument;\n                clone.isDraggable = this.isDraggable;\n                clone.rotationStyle = this.rotationStyle;\n                clone.scale = this.scale;\n                clone.volume = this.volume;\n                clone.scratchX = this.scratchX;\n                clone.scratchY = this.scratchY;\n                clone.visible = this.visible;\n                clone.penSize = this.penSize;\n                clone.penColor.copy(this.penColor);\n                clone.isPenDown = this.isPenDown;\n                clone.watchers = this.watchers;\n                clone.listWatchers = this.listWatchers;\n                return clone;\n            }\n            touching(thing) {\n                if (thing === \"_mouse_\") {\n                    const x = this.stage.rawMouseX;\n                    const y = this.stage.rawMouseY;\n                    return this.stage.renderer.spriteTouchesPoint(this, x, y);\n                }\n                else if (thing === \"_edge_\") {\n                    const bounds = this.rotatedBounds();\n                    return bounds.left <= -240 || bounds.right >= 240 || bounds.top >= 180 || bounds.bottom <= -180;\n                }\n                else {\n                    if (!this.visible)\n                        return false;\n                    const sprites = this.stage.getObjects(thing);\n                    return this.stage.renderer.spritesIntersect(this, sprites);\n                }\n            }\n            touchingColor(color) {\n                return this.stage.renderer.spriteTouchesColor(this, color);\n            }\n            colorTouchingColor(sourceColor, touchingColor) {\n                return this.stage.renderer.spriteColorTouchesColor(this, sourceColor, touchingColor);\n            }\n            bounceOffEdge() {\n                var b = this.rotatedBounds();\n                var dl = 240 + b.left;\n                var dt = 180 - b.top;\n                var dr = 240 - b.right;\n                var db = 180 + b.bottom;\n                var d = Math.min(dl, dt, dr, db);\n                if (d > 0)\n                    return;\n                var dir = this.direction * Math.PI / 180;\n                var dx = Math.sin(dir);\n                var dy = -Math.cos(dir);\n                switch (d) {\n                    case dl:\n                        dx = Math.max(0.2, Math.abs(dx));\n                        break;\n                    case dt:\n                        dy = Math.max(0.2, Math.abs(dy));\n                        break;\n                    case dr:\n                        dx = -Math.max(0.2, Math.abs(dx));\n                        break;\n                    case db:\n                        dy = -Math.max(0.2, Math.abs(dy));\n                        break;\n                }\n                this.direction = Math.atan2(dy, dx) * 180 / Math.PI + 90;\n                if (this.saying)\n                    this.updateBubble();\n            }\n            distanceTo(thing) {\n                const p = this.stage.getPosition(thing);\n                if (!p) {\n                    return 10000;\n                }\n                const x = p.x;\n                const y = p.y;\n                return Math.sqrt((this.scratchX - x) * (this.scratchX - x) + (this.scratchY - y) * (this.scratchY - y));\n            }\n            gotoObject(thing) {\n                const position = this.stage.getPosition(thing);\n                if (!position) {\n                    return 0;\n                }\n                this.moveTo(position.x, position.y);\n            }\n            pointTowards(thing) {\n                const position = this.stage.getPosition(thing);\n                if (!position) {\n                    return 0;\n                }\n                const dx = position.x - this.scratchX;\n                const dy = position.y - this.scratchY;\n                const dir = dx === 0 && dy === 0 ? 90 : Math.atan2(dx, dy) * 180 / Math.PI;\n                if (!isFinite(dir))\n                    return;\n                this.direction = dir;\n                if (this.saying)\n                    this.updateBubble();\n            }\n        }\n        core.Sprite = Sprite;\n        class Costume {\n            constructor(costumeData) {\n                this.name = costumeData.name;\n                this.scale = 1 / costumeData.bitmapResolution;\n                this.rotationCenterX = costumeData.rotationCenterX;\n                this.rotationCenterY = costumeData.rotationCenterY;\n            }\n        }\n        core.Costume = Costume;\n        class BitmapCostume extends Costume {\n            constructor(image, options) {\n                super(options);\n                if (image.tagName === 'CANVAS') {\n                    const ctx = image.getContext('2d');\n                    if (!ctx) {\n                        throw new Error(`Cannot get 2d rendering context of costume image, despite it already being a canvas \"${this.name}\"`);\n                    }\n                    this.ctx = ctx;\n                }\n                this.image = image;\n                this.width = image.width;\n                this.height = image.height;\n                this.isScalable = false;\n            }\n            getContext() {\n                if (this.ctx) {\n                    return this.ctx;\n                }\n                const canvas = document.createElement('canvas');\n                const ctx = canvas.getContext('2d');\n                if (!ctx) {\n                    throw new Error(`cannot get 2d rendering context in getContext on Bitmap \"${this.name}\"`);\n                }\n                canvas.width = this.width;\n                canvas.height = this.height;\n                ctx.drawImage(this.image, 0, 0);\n                this.ctx = ctx;\n                return ctx;\n            }\n            getImage() {\n                return this.image;\n            }\n            requestSize(scale) {\n                throw new Error(`requestSize is not implemented on BitmapCostume \"${this.name}\" isScalable=${this.isScalable}`);\n            }\n        }\n        core.BitmapCostume = BitmapCostume;\n        class VectorCostume extends Costume {\n            constructor(svg, options) {\n                super(options);\n                if (svg.height < 1 || svg.width < 1) {\n                    svg = new Image(1, 1);\n                }\n                this.isScalable = true;\n                this.width = svg.width;\n                this.height = svg.height;\n                this.svg = svg;\n                this.maxScale = this.calculateMaxScale();\n                this.currentScale = Math.min(1, this.maxScale);\n            }\n            calculateMaxScale() {\n                if (VectorCostume.MAX_SIZE / this.width < VectorCostume.MAX_SCALE) {\n                    return VectorCostume.MAX_SIZE / this.width;\n                }\n                if (VectorCostume.MAX_SIZE / this.height < VectorCostume.MAX_SCALE) {\n                    return VectorCostume.MAX_SIZE / this.height;\n                }\n                return VectorCostume.MAX_SCALE;\n            }\n            render() {\n                const width = Math.floor(Math.max(1, this.width * this.currentScale));\n                const height = Math.floor(Math.max(1, this.height * this.currentScale));\n                if (!this.canvas) {\n                    const canvas = document.createElement('canvas');\n                    canvas.width = width;\n                    canvas.height = height;\n                    const ctx = canvas.getContext('2d');\n                    if (!ctx) {\n                        const fmt = (n) => Math.round(n * 100) / 100;\n                        throw new Error(`cannot get 2d rendering context in initCanvas on Vector \"${this.name}\" @ ${fmt(this.currentScale)}/${fmt(this.maxScale)} | ${width}x${height}`);\n                    }\n                    this.canvas = canvas;\n                    this.ctx = ctx;\n                }\n                else {\n                    this.canvas.width = width;\n                    this.canvas.height = height;\n                }\n                this.ctx.drawImage(this.svg, 0, 0, width, height);\n            }\n            requestSize(costumeScale) {\n                if (VectorCostume.DISABLE_RASTERIZE) {\n                    return;\n                }\n                const scale = Math.min(Math.ceil(costumeScale), this.maxScale);\n                if (this.currentScale < scale) {\n                    this.currentScale = scale;\n                    this.render();\n                }\n            }\n            getContext() {\n                if (this.ctx) {\n                    return this.ctx;\n                }\n                this.render();\n                return this.ctx;\n            }\n            getImage() {\n                if (VectorCostume.DISABLE_RASTERIZE) {\n                    return this.svg;\n                }\n                if (this.canvas) {\n                    return this.canvas;\n                }\n                this.render();\n                return this.canvas;\n            }\n        }\n        VectorCostume.MAX_SCALE = 16;\n        VectorCostume.MAX_SIZE = 2048;\n        VectorCostume.DISABLE_RASTERIZE = false;\n        core.VectorCostume = VectorCostume;\n        if (/^((?!chrome|android).)*safari/i.test(navigator.userAgent)) {\n            console.log('Vector rasterization is disabled. This may affect performance.');\n            VectorCostume.DISABLE_RASTERIZE = true;\n        }\n        class Sound {\n            constructor(data) {\n                this.source = null;\n                if (!data.buffer)\n                    throw new Error('no AudioBuffer');\n                this.name = data.name;\n                this.buffer = data.buffer;\n                this.duration = this.buffer.duration;\n            }\n            createSourceNode() {\n                if (this.source) {\n                    this.source.disconnect();\n                }\n                const source = P.audio.context.createBufferSource();\n                this.source = source;\n                this.source.buffer = this.buffer;\n                this.source.addEventListener('ended', () => {\n                    source.ended = true;\n                });\n                this.source.start();\n                return this.source;\n            }\n        }\n        core.Sound = Sound;\n        class Watcher {\n            constructor(stage, targetName) {\n                this.valid = true;\n                this.visible = true;\n                this.x = 0;\n                this.y = 0;\n                this.stage = stage;\n                this.targetName = targetName;\n            }\n            init() {\n                this.target = this.stage.getObject(this.targetName) || this.stage;\n            }\n            setVisible(visible) {\n                this.visible = visible;\n            }\n        }\n        core.Watcher = Watcher;\n        class Procedure {\n            constructor(fn, warp, inputs) {\n                this.fn = fn;\n                this.warp = warp;\n                this.inputs = inputs;\n            }\n        }\n        core.Procedure = Procedure;\n        function isSprite(base) {\n            return base.isSprite;\n        }\n        core.isSprite = isSprite;\n    })(core = P.core || (P.core = {}));\n})(P || (P = {}));\nvar P;\n(function (P) {\n    var fonts;\n    (function (fonts_1) {\n        const fontFamilyCache = {};\n        fonts_1.scratch3 = {\n            'Marker': 'fonts/Knewave-Regular.woff',\n            'Handwriting': 'fonts/Handlee-Regular.woff',\n            'Pixel': 'fonts/Grand9K-Pixel.ttf',\n            'Curly': 'fonts/Griffy-Regular.woff',\n            'Serif': 'fonts/SourceSerifPro-Regular.woff',\n            'Sans Serif': 'fonts/NotoSans-Regular.woff',\n        };\n        function loadLocalFont(fontFamily, src) {\n            if (fontFamilyCache[fontFamily]) {\n                return Promise.resolve(fontFamilyCache[fontFamily]);\n            }\n            return P.io.getAssetManager().loadFont(src)\n                .then((blob) => P.io.readers.toDataURL(blob))\n                .then((url) => {\n                fontFamilyCache[fontFamily] = url;\n                return url;\n            });\n        }\n        fonts_1.loadLocalFont = loadLocalFont;\n        function getFont(fontFamily) {\n            if (!(fontFamily in fontFamilyCache)) {\n                return null;\n            }\n            return fontFamilyCache[fontFamily];\n        }\n        function getCSSFontFace(fontFamily, src) {\n            return `@font-face { font-family: \"${fontFamily}\"; src: url(\"${src}\"); }`;\n        }\n        function addFontRules(svg, fonts) {\n            const cssRules = [];\n            for (const fontName of fonts) {\n                const font = getFont(fontName);\n                if (!font) {\n                    console.warn('unknown font from cache', fontName);\n                    continue;\n                }\n                cssRules.push(getCSSFontFace(fontName, font));\n            }\n            const doc = svg.ownerDocument;\n            const defs = doc.createElementNS('http://www.w3.org/2000/svg', 'defs');\n            const style = doc.createElementNS('http://www.w3.org/2000/svg', 'style');\n            style.innerHTML = cssRules.join('\\n');\n            defs.appendChild(style);\n            svg.appendChild(style);\n        }\n        fonts_1.addFontRules = addFontRules;\n        function loadWebFont(name) {\n            const observer = new FontFaceObserver(name);\n            return observer.load();\n        }\n        fonts_1.loadWebFont = loadWebFont;\n    })(fonts = P.fonts || (P.fonts = {}));\n})(P || (P = {}));\nvar P;\n(function (P) {\n    var i18n;\n    (function (i18n) {\n        'use strict';\n        const SUPPORTED_LANGUAGES = ['en', 'es'];\n        const DEFAULT_LANGUAGE = 'en';\n        function getLanguage() {\n            let language = navigator.language;\n            if (language.indexOf('-') > -1) {\n                language = language.substring(0, language.indexOf('-'));\n            }\n            if (SUPPORTED_LANGUAGES.indexOf(language) === -1) {\n                language = DEFAULT_LANGUAGE;\n            }\n            return language;\n        }\n        const translations = {};\n        const defaultTranslations = {};\n        const language = getLanguage();\n        function translate(messageId) {\n            if (translations[messageId]) {\n                return translations[messageId];\n            }\n            if (defaultTranslations[messageId]) {\n                return defaultTranslations[messageId];\n            }\n            console.warn('Missing translation:', messageId);\n            return '## ' + messageId + ' ##';\n        }\n        i18n.translate = translate;\n        function translateElement(element) {\n            const translatable = element.querySelectorAll('[data-i18n]');\n            for (var i = 0; i < translatable.length; i++) {\n                const el = translatable[i];\n                const messageId = el.getAttribute('data-i18n');\n                if (messageId === null)\n                    continue;\n                const result = translate(messageId);\n                el.textContent = result;\n            }\n        }\n        i18n.translateElement = translateElement;\n        function merge(into, source) {\n            for (const key of Object.keys(source)) {\n                into[key] = source[key];\n            }\n        }\n        function addTranslations(importedLanguage, importedTranslations) {\n            if (importedLanguage === language) {\n                merge(translations, importedTranslations);\n            }\n            else if (importedLanguage === DEFAULT_LANGUAGE) {\n                merge(defaultTranslations, importedTranslations);\n            }\n        }\n        i18n.addTranslations = addTranslations;\n        addTranslations('en', {\n            'player.controls.turboIndicator': 'Turbo Mode',\n            'player.controls.fullscreen.title': 'Click to fullscreen player, Shift+click to just maximize.',\n            'player.controls.flag.title': 'Shift+click to enable turbo mode.',\n            'player.controls.flag.title.enabled': 'Turbo mode is enabled. Shift+click to disable turbo mode.',\n            'player.controls.flag.title.disabled': 'Turbo mode is disabled. Shift+click to enable turbo mode.',\n            'player.errorhandler.error': 'An internal error occurred. <a $attrs>Click here</a> to file a bug report.',\n            'player.errorhandler.error.doesnotexist': 'There is no project with ID $id. It was probably deleted, never existed, or you made a typo.',\n            'player.errorhandler.error.doesnotexistlegacy': 'The project with ID $id can not be used with legacy mode enabled. Turn off legacy mode to use this project.',\n        });\n    })(i18n = P.i18n || (P.i18n = {}));\n})(P || (P = {}));\nvar P;\n(function (P) {\n    var io;\n    (function (io) {\n        io.config = {\n            localPath: '',\n        };\n        if (['http:', 'https:'].indexOf(location.protocol) === -1) {\n            io.config.localPath = 'https://forkphorus.github.io/';\n        }\n        let readers;\n        (function (readers) {\n            function toArrayBuffer(object) {\n                return new Promise((resolve, reject) => {\n                    const fileReader = new FileReader();\n                    fileReader.onloadend = function () {\n                        resolve(fileReader.result);\n                    };\n                    fileReader.onerror = function (err) {\n                        reject(new Error('Could not read object as ArrayBuffer'));\n                    };\n                    fileReader.readAsArrayBuffer(object);\n                });\n            }\n            readers.toArrayBuffer = toArrayBuffer;\n            function toDataURL(object) {\n                return new Promise((resolve, reject) => {\n                    const fileReader = new FileReader();\n                    fileReader.onloadend = function () {\n                        resolve(fileReader.result);\n                    };\n                    fileReader.onerror = function (err) {\n                        reject(new Error('Could not read object as data: URL'));\n                    };\n                    fileReader.readAsDataURL(object);\n                });\n            }\n            readers.toDataURL = toDataURL;\n            function toText(object) {\n                return new Promise((resolve, reject) => {\n                    const fileReader = new FileReader();\n                    fileReader.onloadend = function () {\n                        resolve(fileReader.result);\n                    };\n                    fileReader.onerror = function (err) {\n                        reject(new Error('Could not read object as text'));\n                    };\n                    fileReader.readAsText(object);\n                });\n            }\n            readers.toText = toText;\n        })(readers = io.readers || (io.readers = {}));\n        class FetchingAssetManager {\n            constructor() {\n                this.soundbankSource = 'soundbank/';\n            }\n            loadSoundbankFile(src) {\n                return this.loadArrayBuffer(this.soundbankSource + src);\n            }\n            loadFont(src) {\n                return this.loadBlob(src);\n            }\n            loadArrayBuffer(src) {\n                return new Request(io.config.localPath + src).load('arraybuffer');\n            }\n            loadBlob(src) {\n                return new Request(io.config.localPath + src).load('blob');\n            }\n        }\n        var globalAssetManager = new FetchingAssetManager();\n        function getAssetManager() {\n            return globalAssetManager;\n        }\n        io.getAssetManager = getAssetManager;\n        function setAssetManager(newManager) {\n            globalAssetManager = newManager;\n        }\n        io.setAssetManager = setAssetManager;\n        class Throttler {\n            constructor() {\n                this.maxConcurrentTasks = 20;\n                this.concurrentTasks = 0;\n                this.queue = [];\n            }\n            startNextTask() {\n                if (this.queue.length === 0)\n                    return;\n                if (this.concurrentTasks >= this.maxConcurrentTasks)\n                    return;\n                const fn = this.queue.shift();\n                this.concurrentTasks++;\n                fn();\n            }\n            run(fn) {\n                return new Promise((resolve, reject) => {\n                    const run = () => {\n                        fn()\n                            .then((r) => {\n                            this.concurrentTasks--;\n                            this.startNextTask();\n                            resolve(r);\n                        })\n                            .catch((e) => {\n                            this.concurrentTasks--;\n                            this.startNextTask();\n                            reject(e);\n                        });\n                    };\n                    if (this.concurrentTasks < this.maxConcurrentTasks) {\n                        this.concurrentTasks++;\n                        run();\n                    }\n                    else {\n                        this.queue.push(run);\n                    }\n                });\n            }\n        }\n        const requestThrottler = new Throttler();\n        class AbstractTask {\n            setLoader(loader) {\n                this.loader = loader;\n            }\n            updateLoaderProgress() {\n                if (this.loader) {\n                    this.loader.updateProgress();\n                }\n            }\n        }\n        io.AbstractTask = AbstractTask;\n        class Retry extends AbstractTask {\n            constructor() {\n                super(...arguments);\n                this.aborted = false;\n                this.retries = 0;\n                this.maxAttempts = 4;\n            }\n            async try(handle) {\n                let lastErr;\n                for (let i = 0; i < this.maxAttempts; i++) {\n                    this.retries = i;\n                    try {\n                        return await handle();\n                    }\n                    catch (err) {\n                        if (this.aborted) {\n                            throw err;\n                        }\n                        lastErr = err;\n                        const retryIn = 2 ** i * 500 * Math.random() + 50;\n                        console.warn(`Attempt #${i + 1} to ${this.getRetryWarningDescription()} failed, trying again in ${retryIn}ms`, err);\n                        await P.utils.sleep(retryIn);\n                    }\n                }\n                throw lastErr;\n            }\n            setMaxAttempts(attempts) {\n                this.maxAttempts = attempts;\n                return this;\n            }\n            getRetryWarningDescription() {\n                return 'complete task';\n            }\n            abort() {\n                this.aborted = true;\n            }\n        }\n        io.Retry = Retry;\n        class HTTPError extends Error {\n            constructor(message, status) {\n                super(message);\n                this.status = status;\n            }\n        }\n        class Request extends Retry {\n            constructor(urls) {\n                super();\n                this.shouldIgnoreErrors = false;\n                this.complete = false;\n                this.status = 0;\n                this.xhr = null;\n                this.urls = Array.isArray(urls) ? urls : [urls];\n            }\n            isComplete() {\n                return this.complete;\n            }\n            abort() {\n                super.abort();\n                if (this.xhr) {\n                    this.xhr.abort();\n                }\n            }\n            ignoreErrors() {\n                this.shouldIgnoreErrors = true;\n                return this;\n            }\n            getStatus() {\n                return this.status;\n            }\n            async _load() {\n                if (this.aborted) {\n                    return Promise.reject(new Error(`Cannot download ${this.urls[0]} -- aborted.`));\n                }\n                const tryURL = (url) => new Promise((resolve, reject) => {\n                    const xhr = new XMLHttpRequest();\n                    xhr.open('GET', url);\n                    xhr.responseType = this.responseType;\n                    this.xhr = xhr;\n                    xhr.onload = () => {\n                        this.status = xhr.status;\n                        if (Request.acceptableResponseCodes.indexOf(xhr.status) !== -1 || this.shouldIgnoreErrors) {\n                            resolve(xhr.response);\n                        }\n                        else {\n                            reject(new HTTPError(`HTTP Error ${xhr.status} while downloading ${this.urls[0]}`, xhr.status));\n                        }\n                    };\n                    xhr.onloadend = (e) => {\n                        this.xhr = null;\n                        this.complete = true;\n                        this.updateLoaderProgress();\n                    };\n                    xhr.onerror = (err) => {\n                        reject(new Error(`Error while downloading ${url} (error) (r=${this.retries} s=${xhr.readyState}/${xhr.status}/${xhr.statusText})`));\n                    };\n                    xhr.onabort = (err) => {\n                        this.aborted = true;\n                        reject(new Error(`Error while downloading ${url} (abort)`));\n                    };\n                    xhr.send();\n                });\n                let errorToThrow;\n                for (const url of this.urls) {\n                    try {\n                        return await tryURL(url);\n                    }\n                    catch (e) {\n                        if (!errorToThrow || (e instanceof HTTPError && !(errorToThrow instanceof HTTPError))) {\n                            errorToThrow = e;\n                        }\n                    }\n                }\n                throw errorToThrow;\n            }\n            load(type) {\n                this.responseType = type;\n                return requestThrottler.run(() => this.try(() => this._load()));\n            }\n            getRetryWarningDescription() {\n                return `download ${this.urls[0]}`;\n            }\n        }\n        Request.acceptableResponseCodes = [0, 200];\n        io.Request = Request;\n        class Img extends Retry {\n            constructor(src) {\n                super();\n                this.src = src;\n                this.complete = false;\n            }\n            isComplete() {\n                return this.complete;\n            }\n            _load() {\n                if (this.aborted) {\n                    return Promise.reject(new Error(`Cannot download ${this.src} -- aborted.`));\n                }\n                return new Promise((resolve, reject) => {\n                    const image = new Image();\n                    image.onload = () => {\n                        this.complete = true;\n                        this.updateLoaderProgress();\n                        image.onload = null;\n                        image.onerror = null;\n                        resolve(image);\n                    };\n                    image.onerror = () => {\n                        image.onload = null;\n                        image.onerror = null;\n                        reject(new Error(`Failed to load image: ${image.src} (r=${this.retries})`));\n                    };\n                    image.crossOrigin = 'anonymous';\n                    setTimeout(() => {\n                        image.src = this.src;\n                    });\n                });\n            }\n            load() {\n                return requestThrottler.run(() => this.try(() => this._load()));\n            }\n            getRetryWarningDescription() {\n                return `download image ${this.src}`;\n            }\n        }\n        io.Img = Img;\n        class Manual extends AbstractTask {\n            constructor() {\n                super(...arguments);\n                this.complete = false;\n                this.aborted = false;\n            }\n            markComplete() {\n                this.complete = true;\n                this.updateLoaderProgress();\n            }\n            isComplete() {\n                return this.complete;\n            }\n            abort() {\n                this.aborted = true;\n            }\n        }\n        io.Manual = Manual;\n        class PromiseTask extends Manual {\n            constructor(promise) {\n                super();\n                promise.then(() => this.markComplete());\n            }\n        }\n        io.PromiseTask = PromiseTask;\n        class Loader {\n            constructor() {\n                this._tasks = [];\n                this.aborted = false;\n                this.error = false;\n            }\n            calculateProgress() {\n                if (this.aborted) {\n                    return 1;\n                }\n                const totalTasks = this._tasks.length;\n                if (totalTasks === 0) {\n                    return 0;\n                }\n                let finishedTasks = 0;\n                for (const task of this._tasks) {\n                    if (task.isComplete()) {\n                        finishedTasks++;\n                    }\n                }\n                return finishedTasks / totalTasks;\n            }\n            updateProgress() {\n                if (this.error) {\n                    return;\n                }\n                const progress = this.calculateProgress();\n                this.onprogress(progress);\n            }\n            resetTasks() {\n                this._tasks = [];\n                this.updateProgress();\n            }\n            addTask(task) {\n                this._tasks.push(task);\n                task.setLoader(this);\n                return task;\n            }\n            abort() {\n                this.aborted = true;\n                for (const task of this._tasks) {\n                    task.abort();\n                }\n            }\n            cleanup() {\n                for (const task of this._tasks) {\n                    task.setLoader(null);\n                }\n                this._tasks.length = 0;\n            }\n            onprogress(progress) {\n            }\n        }\n        io.Loader = Loader;\n    })(io = P.io || (P.io = {}));\n})(P || (P = {}));\nvar P;\n(function (P) {\n    var json;\n    (function (json) {\n        class JSONParser {\n            constructor(source) {\n                this.source = source;\n                this.index = 0;\n            }\n            parse() {\n                return this.parseValue();\n            }\n            lineInfo() {\n                let line = 0;\n                let column = 0;\n                for (var i = 0; i < this.index; i++) {\n                    if (this.source[i] === '\\n') {\n                        line++;\n                        column = 0;\n                    }\n                    else {\n                        column++;\n                    }\n                }\n                return { line: line + 1, column: column + 1 };\n            }\n            error(message) {\n                const { line, column } = this.lineInfo();\n                throw new SyntaxError(`JSONParser: ${message} (Line ${line} Column ${column})`);\n            }\n            char() {\n                return this.charAt(this.index);\n            }\n            charAt(index) {\n                if (index >= this.source.length) {\n                    this.error('Unexpected end of input');\n                }\n                return this.source[index];\n            }\n            next() {\n                this.index++;\n            }\n            expect(char) {\n                if (this.char() !== char) {\n                    this.error(`Expected '${char}' but found '${this.char()}'`);\n                }\n                this.next();\n            }\n            peek(length = 1, offset = 1) {\n                if (length === 1)\n                    return this.charAt(this.index + offset);\n                let result = '';\n                for (var i = 0; i < length; i++) {\n                    result += this.charAt(this.index + offset + i);\n                }\n                return result;\n            }\n            skipWhitespace() {\n                while (/\\s/.test(this.char())) {\n                    this.next();\n                }\n            }\n            parseValue() {\n                this.skipWhitespace();\n                const char = this.char();\n                switch (char) {\n                    case '\"': return this.parseString();\n                    case '{': return this.parseObject();\n                    case '[': return this.parseList();\n                    case '0':\n                    case '1':\n                    case '2':\n                    case '3':\n                    case '4':\n                    case '5':\n                    case '6':\n                    case '7':\n                    case '8':\n                    case '9':\n                    case '-':\n                        return this.parseNumber();\n                    default: return this.parseWord();\n                }\n            }\n            parseWord() {\n                if (this.peek(4, 0) === 'null') {\n                    for (var i = 0; i < 4; i++)\n                        this.next();\n                    return null;\n                }\n                if (this.peek(4, 0) === 'true') {\n                    for (var i = 0; i < 4; i++)\n                        this.next();\n                    return true;\n                }\n                if (this.peek(5, 0) === 'false') {\n                    for (var i = 0; i < 5; i++)\n                        this.next();\n                    return false;\n                }\n                if (this.peek(8, 0) === 'Infinity') {\n                    for (var i = 0; i < 8; i++)\n                        this.next();\n                    return Infinity;\n                }\n                if (this.peek(9, 0) === '-Infinity') {\n                    for (var i = 0; i < 9; i++)\n                        this.next();\n                    return -Infinity;\n                }\n                if (this.peek(3, 0) === 'NaN') {\n                    for (var i = 0; i < 3; i++)\n                        this.next();\n                    return NaN;\n                }\n                this.error(`Unknown word (starts with ${this.char()})`);\n            }\n            parseNumber() {\n                let number = '';\n                while (true) {\n                    number += this.char();\n                    if (/[\\d\\.e+-]/i.test(this.peek())) {\n                        this.next();\n                    }\n                    else {\n                        break;\n                    }\n                }\n                this.next();\n                const value = +number;\n                if (Number.isNaN(value)) {\n                    this.error('Not a number: ' + number);\n                }\n                return value;\n            }\n            parseString() {\n                this.expect('\"');\n                let result = '';\n                if (this.char() === '\"') {\n                    this.next();\n                    return '';\n                }\n                while (true) {\n                    const char = this.char();\n                    if (char === '\\\\') {\n                        this.next();\n                        switch (this.char()) {\n                            case '\"':\n                                result += '\"';\n                                break;\n                            case '/':\n                                result += '/';\n                                break;\n                            case '\\\\':\n                                result += '\\\\';\n                                break;\n                            case 'b':\n                                result += '\\b';\n                                break;\n                            case 'f':\n                                result += '\\f';\n                                break;\n                            case 'n':\n                                result += '\\n';\n                                break;\n                            case 'r':\n                                result += '\\r';\n                                break;\n                            case 't':\n                                result += '\\t';\n                                break;\n                            case 'u': {\n                                let hexString = '';\n                                for (var i = 0; i < 4; i++) {\n                                    this.next();\n                                    const char = this.char();\n                                    if (!/[0-9a-f]/i.test(char)) {\n                                        this.error('Invalid hex code: ' + char);\n                                    }\n                                    hexString += char;\n                                }\n                                const hexNumber = Number.parseInt(hexString, 16);\n                                const letter = String.fromCharCode(hexNumber);\n                                result += letter;\n                                break;\n                            }\n                            default: this.error('Invalid escape code: \\\\' + this.char());\n                        }\n                    }\n                    else {\n                        result += char;\n                    }\n                    if (this.peek() === '\"') {\n                        break;\n                    }\n                    this.next();\n                }\n                this.next();\n                this.expect('\"');\n                return result;\n            }\n            parseList() {\n                this.expect('[');\n                this.skipWhitespace();\n                if (this.char() === ']') {\n                    this.next();\n                    return [];\n                }\n                const result = [];\n                while (true) {\n                    this.skipWhitespace();\n                    const value = this.parseValue();\n                    result.push(value);\n                    this.skipWhitespace();\n                    if (this.char() === ']') {\n                        break;\n                    }\n                    this.expect(',');\n                }\n                this.expect(']');\n                return result;\n            }\n            parseObject() {\n                this.expect('{');\n                this.skipWhitespace();\n                if (this.char() === '}') {\n                    this.next();\n                    return {};\n                }\n                const result = Object.create(null);\n                while (true) {\n                    this.skipWhitespace();\n                    const key = this.parseString();\n                    this.skipWhitespace();\n                    this.expect(':');\n                    const value = this.parseValue();\n                    result[key] = value;\n                    this.skipWhitespace();\n                    if (this.char() === '}') {\n                        break;\n                    }\n                    this.expect(',');\n                }\n                this.expect('}');\n                return result;\n            }\n        }\n        function parse(source) {\n            if (!/^\\s*{/.test(source)) {\n                throw new Error('The input does not seem to be a JSON object');\n            }\n            try {\n                return JSON.parse(source);\n            }\n            catch (firstError) {\n                console.warn('JSON.parse failed. Trying alternative parser', firstError);\n                try {\n                    const parser = new JSONParser(source);\n                    return parser.parse();\n                }\n                catch (secondError) {\n                    console.warn('Alternative parser failed', secondError);\n                    throw firstError;\n                }\n            }\n        }\n        json.parse = parse;\n    })(json = P.json || (P.json = {}));\n})(P || (P = {}));\nvar P;\n(function (P) {\n    var utils;\n    (function (utils) {\n        function parseRotationStyle(style) {\n            switch (style) {\n                case 'leftRight':\n                case 'left-right':\n                    return 1;\n                case 'none':\n                case 'don\\'t rotate':\n                    return 2;\n                case 'normal':\n                case 'all around':\n                    return 0;\n            }\n            console.warn('unknown rotation style', style);\n            return 0;\n        }\n        utils.parseRotationStyle = parseRotationStyle;\n        function rgbToHSL(r, g, b) {\n            r /= 255;\n            g /= 255;\n            b /= 255;\n            var min = Math.min(r, g, b);\n            var max = Math.max(r, g, b);\n            if (min === max) {\n                return [0, 0, r];\n            }\n            var c = max - min;\n            var l = (min + max) / 2;\n            var s = c / (1 - Math.abs(2 * l - 1));\n            var h;\n            switch (max) {\n                case r:\n                    h = ((g - b) / c + 6) % 6;\n                    break;\n                case g:\n                    h = (b - r) / c + 2;\n                    break;\n                case b:\n                    h = (r - g) / c + 4;\n                    break;\n            }\n            h *= 60;\n            return [h, s, l];\n        }\n        utils.rgbToHSL = rgbToHSL;\n        function rgbToHSV(r, g, b) {\n            r /= 255;\n            g /= 255;\n            b /= 255;\n            var max = Math.max(r, g, b), min = Math.min(r, g, b);\n            var h, s, v = max;\n            var d = max - min;\n            s = max == 0 ? 0 : d / max;\n            if (max == min) {\n                h = 0;\n            }\n            else {\n                switch (max) {\n                    case r:\n                        h = (g - b) / d + (g < b ? 6 : 0);\n                        break;\n                    case g:\n                        h = (b - r) / d + 2;\n                        break;\n                    case b:\n                        h = (r - g) / d + 4;\n                        break;\n                }\n                h /= 6;\n            }\n            return [h * 360, s, v];\n        }\n        utils.rgbToHSV = rgbToHSV;\n        function hsvToRGB(h, s, v) {\n            var r, g, b;\n            var i = Math.floor(h * 6);\n            var f = h * 6 - i;\n            var p = v * (1 - s);\n            var q = v * (1 - f * s);\n            var t = v * (1 - (1 - f) * s);\n            switch (i % 6) {\n                case 0:\n                    r = v, g = t, b = p;\n                    break;\n                case 1:\n                    r = q, g = v, b = p;\n                    break;\n                case 2:\n                    r = p, g = v, b = t;\n                    break;\n                case 3:\n                    r = p, g = q, b = v;\n                    break;\n                case 4:\n                    r = t, g = p, b = v;\n                    break;\n                case 5:\n                    r = v, g = p, b = q;\n                    break;\n            }\n            return [r * 255 | 0, g * 255 | 0, b * 255 | 0];\n        }\n        utils.hsvToRGB = hsvToRGB;\n        function hslToRGB(h, s, l) {\n            var r, g, b;\n            if (s == 0) {\n                r = g = b = l;\n            }\n            else {\n                function hue2rgb(p, q, t) {\n                    if (t < 0)\n                        t += 1;\n                    if (t > 1)\n                        t -= 1;\n                    if (t < 1 / 6)\n                        return p + (q - p) * 6 * t;\n                    if (t < 1 / 2)\n                        return q;\n                    if (t < 2 / 3)\n                        return p + (q - p) * (2 / 3 - t) * 6;\n                    return p;\n                }\n                var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n                var p = 2 * l - q;\n                r = hue2rgb(p, q, h + 1 / 3);\n                g = hue2rgb(p, q, h);\n                b = hue2rgb(p, q, h - 1 / 3);\n            }\n            return [r * 255, g * 255, b * 255];\n        }\n        utils.hslToRGB = hslToRGB;\n        function hslToHSV(h, s, l) {\n            var v = l + s * Math.min(l, 1 - l);\n            var s = v === 0 ? 0 : 2 - 2 * l / v;\n            return [h, s, v];\n        }\n        utils.hslToHSV = hslToHSV;\n        function hsvToHSL(h, s, v) {\n            var l = v - v * s / 2;\n            var s = l === 0 ? 0 : (v - l) / Math.min(2 - 2 * l / v);\n            return [h, s, l];\n        }\n        utils.hsvToHSL = hsvToHSL;\n        function clamp(number, min, max) {\n            return Math.min(max, Math.max(min, number));\n        }\n        utils.clamp = clamp;\n        function settled(promise) {\n            return new Promise((resolve, _reject) => {\n                promise\n                    .then(() => resolve())\n                    .catch(() => resolve());\n            });\n        }\n        utils.settled = settled;\n        function sleep(ms) {\n            return new Promise((resolve) => setTimeout(resolve, ms));\n        }\n        utils.sleep = sleep;\n        function parseColor(color) {\n            if (typeof color === 'number') {\n                return color;\n            }\n            if (typeof color === 'string') {\n                const nValue = +color;\n                if (!isNaN(nValue)) {\n                    return nValue;\n                }\n                if (color.startsWith('#')) {\n                    const hex = color.substr(1);\n                    const parsedHex = parseInt(hex, 16);\n                    if (hex.length === 6) {\n                        return parsedHex;\n                    }\n                    else if (hex.length === 3) {\n                        const r = parsedHex >> 8 & 0xf;\n                        const g = parsedHex >> 4 & 0xf;\n                        const b = parsedHex & 0xf;\n                        return (((r << 4) | r) << 16 |\n                            ((g << 4) | g) << 8 |\n                            ((b << 4) | b));\n                    }\n                }\n            }\n            return 0;\n        }\n        utils.parseColor = parseColor;\n        ;\n    })(utils = P.utils || (P.utils = {}));\n})(P || (P = {}));\nvar P;\n(function (P) {\n    var player;\n    (function (player_1) {\n        class PlayerError extends Error {\n            constructor() {\n                super(...arguments);\n                this.handledByPlayer = true;\n            }\n        }\n        player_1.PlayerError = PlayerError;\n        class ProjectDoesNotExistError extends PlayerError {\n            constructor(id) {\n                super('Project with ID ' + id + ' does not exist');\n                this.id = id;\n                this.name = 'ProjectDoesNotExistError';\n            }\n        }\n        player_1.ProjectDoesNotExistError = ProjectDoesNotExistError;\n        class CannotAccessProjectError extends PlayerError {\n            constructor(id) {\n                super(`Cannot access project with ID ${id}`);\n                this.id = id;\n                this.name = 'CannotAccessProjectError';\n            }\n        }\n        player_1.CannotAccessProjectError = CannotAccessProjectError;\n        class LoaderIdentifier {\n            constructor() {\n                this.active = true;\n                this.loader = null;\n            }\n            cancel() {\n                if (!this.active) {\n                    throw new Error('cannot cancel: already cancelled');\n                }\n                this.active = false;\n                if (this.loader) {\n                    this.loader.abort();\n                }\n            }\n            setLoader(loader) {\n                if (!this.active) {\n                    throw new Error('Loading aborted');\n                }\n                this.loader = loader;\n            }\n            isActive() {\n                return this.active;\n            }\n        }\n        class Slot {\n            constructor() {\n                this._listeners = [];\n            }\n            subscribe(fn) {\n                this._listeners.push(fn);\n            }\n            emit(value) {\n                for (const listener of this._listeners) {\n                    listener(value);\n                }\n            }\n        }\n        class LocalProjectMeta {\n            constructor(filename) {\n                this.filename = filename;\n            }\n            load() {\n                return Promise.resolve(this);\n            }\n            getTitle() {\n                return this.filename;\n            }\n            getId() {\n                return this.filename;\n            }\n            isFromScratch() {\n                return false;\n            }\n            getToken() {\n                return null;\n            }\n            isUnshared() {\n                return false;\n            }\n        }\n        class BinaryProjectMeta {\n            load() {\n                return Promise.resolve(this);\n            }\n            getTitle() {\n                return null;\n            }\n            getId() {\n                return '#buffer#';\n            }\n            isFromScratch() {\n                return false;\n            }\n            getToken() {\n                return null;\n            }\n            isUnshared() {\n                return false;\n            }\n        }\n        class RemoteProjectMeta {\n            constructor(id) {\n                this.id = id;\n                this.title = null;\n                this.token = null;\n                this.unshared = false;\n                this.loadCallbacks = [];\n                this.startedLoading = false;\n            }\n            load() {\n                if (!this.startedLoading) {\n                    this.startedLoading = true;\n                    const request = new P.io.Request([\n                        'https://trampoline.turbowarp.org/proxy/projects/$id'.replace('$id', this.id),\n                        'https://trampoline.turbowarp.xyz/proxy/projects/$id'.replace('$id', this.id),\n                        'https://t.unsandboxed.org/proxy/projects/$id'.replace('$id', this.id),\n                    ]);\n                    request\n                        .setMaxAttempts(1)\n                        .ignoreErrors()\n                        .load('json')\n                        .then((data) => {\n                        if (request.getStatus() === 404) {\n                            this.unshared = true;\n                        }\n                        else {\n                            if (data.title) {\n                                this.title = data.title;\n                            }\n                            if (data.project_token) {\n                                this.token = data.project_token;\n                            }\n                        }\n                        for (const callback of this.loadCallbacks) {\n                            callback(this);\n                        }\n                        this.loadCallbacks.length = 0;\n                    })\n                        .catch((err) => {\n                        console.error(err);\n                        this.unshared = true;\n                        for (const callback of this.loadCallbacks) {\n                            callback(this);\n                        }\n                        this.loadCallbacks.length = 0;\n                    });\n                }\n                return new Promise((resolve) => {\n                    this.loadCallbacks.push(resolve);\n                });\n            }\n            getTitle() {\n                return this.title;\n            }\n            getId() {\n                return this.id;\n            }\n            isFromScratch() {\n                return true;\n            }\n            getToken() {\n                return this.token;\n            }\n            isUnshared() {\n                return this.unshared;\n            }\n        }\n        class Player {\n            constructor(options = {}) {\n                this.onprogress = new Slot();\n                this.onload = new Slot();\n                this.onstartload = new Slot();\n                this.oncleanup = new Slot();\n                this.onthemechange = new Slot();\n                this.onerror = new Slot();\n                this.onresume = new Slot();\n                this.onpause = new Slot();\n                this.onoptionschange = new Slot();\n                this.MAGIC = {\n                    LARGE_Z_INDEX: '9999999999',\n                };\n                this.stage = null;\n                this.projectMeta = null;\n                this.currentLoader = null;\n                this.fullscreenEnabled = false;\n                this.clickToPlayContainer = null;\n                this.root = document.createElement('div');\n                this.root.className = 'player-root';\n                this.playerContainer = document.createElement('div');\n                this.playerContainer.className = 'player-stage';\n                this.root.appendChild(this.playerContainer);\n                this.setOptions(Object.assign(Object.assign({}, options), Player.DEFAULT_OPTIONS));\n                window.addEventListener('resize', () => this.updateFullscreen());\n                document.addEventListener('fullscreenchange', () => this.onfullscreenchange());\n                document.addEventListener('mozfullscreenchange', () => this.onfullscreenchange());\n                document.addEventListener('webkitfullscreenchange', () => this.onfullscreenchange());\n                this.handleError = this.handleError.bind(this);\n            }\n            enableAttribute(name) {\n                this.root.setAttribute(name, '');\n            }\n            disableAttribute(name) {\n                this.root.removeAttribute(name);\n            }\n            setAttribute(name, enabled) {\n                if (enabled) {\n                    this.enableAttribute(name);\n                }\n                else {\n                    this.disableAttribute(name);\n                }\n            }\n            setOptions(changedOptions) {\n                this.options = Object.assign(Object.assign({}, this.options), changedOptions);\n                if (typeof changedOptions.turbo !== 'undefined') {\n                    this.setAttribute('turbo', changedOptions.turbo);\n                }\n                if (typeof changedOptions.theme !== 'undefined') {\n                    this.root.setAttribute('theme', changedOptions.theme);\n                    this.onthemechange.emit(changedOptions.theme);\n                }\n                if (this.hasStage()) {\n                    this.applyOptionsToStage();\n                }\n                this.onoptionschange.emit(changedOptions);\n            }\n            getOptions() {\n                return this.options;\n            }\n            addControls(options = {}) {\n                if (this.controlsContainer) {\n                    throw new Error('This player already has controls.');\n                }\n                let flagTouchTimeout = undefined;\n                const clickStop = (e) => {\n                    this.throwWithoutStage();\n                    this.stopAll();\n                    this.stage.draw();\n                    e.preventDefault();\n                };\n                const clickPause = (e) => {\n                    this.toggleRunning();\n                };\n                const clickFullscreen = (e) => {\n                    this.throwWithoutStage();\n                    this.setOptions({ fullscreenMode: e.shiftKey ? 'window' : 'full' });\n                    if (this.fullscreenEnabled) {\n                        this.exitFullscreen();\n                    }\n                    else {\n                        this.enterFullscreen();\n                    }\n                };\n                const clickFlag = (e) => {\n                    if (flagTouchTimeout === null) {\n                        return;\n                    }\n                    if (flagTouchTimeout) {\n                        clearTimeout(flagTouchTimeout);\n                    }\n                    this.throwWithoutStage();\n                    if (e.shiftKey) {\n                        this.setOptions({ turbo: !this.options.turbo });\n                    }\n                    else {\n                        this.triggerGreenFlag();\n                    }\n                    this.focus();\n                    e.preventDefault();\n                };\n                const startTouchFlag = (e) => {\n                    flagTouchTimeout = setTimeout(() => {\n                        flagTouchTimeout = null;\n                        this.setOptions({ turbo: !this.options.turbo });\n                    }, 500);\n                };\n                const preventDefault = (e) => {\n                    e.preventDefault();\n                };\n                this.controlsContainer = document.createElement('div');\n                this.controlsContainer.className = 'player-controls';\n                this.controlsContainer.onmousedown = (e) => {\n                    if (e.target !== this.controlsContainer) {\n                        e.stopPropagation();\n                    }\n                };\n                this.controlsContainer.ontouchstart = (e) => {\n                    if (e.target !== this.controlsContainer) {\n                        e.stopPropagation();\n                    }\n                };\n                if (options.enableFlag !== false) {\n                  var flagButton = document.createElement('span');\n                  flagButton.className = 'player-button player-flag';\n                  flagButton.title = P.i18n.translate('player.controls.flag.title');\n                  this.controlsContainer.appendChild(flagButton);\n                  flagButton.addEventListener('click', clickFlag);\n                  flagButton.addEventListener('touchend', clickFlag);\n                  flagButton.addEventListener('touchstart', startTouchFlag);\n                  flagButton.addEventListener('touchstart', preventDefault);\n                }\n                if (options.enablePause !== false) {\n                  var pauseButton = document.createElement('span');\n                  pauseButton.className = 'player-button player-pause';\n                  this.controlsContainer.appendChild(pauseButton);\n                  pauseButton.addEventListener('click', clickPause);\n                  pauseButton.addEventListener('touchend', clickPause);\n                  pauseButton.addEventListener('touchstart', preventDefault);\n                }\n                if (options.enableStop !== false) {\n                    var stopButton = document.createElement('span');\n                    stopButton.className = 'player-button player-stop';\n                    this.controlsContainer.appendChild(stopButton);\n                    stopButton.addEventListener('click', clickStop);\n                    stopButton.addEventListener('touchend', clickStop);\n                    stopButton.addEventListener('touchstart', preventDefault);\n                }\n                if (options.enableTurbo !== false) {\n                    var turboText = document.createElement('span');\n                    turboText.innerText = P.i18n.translate('player.controls.turboIndicator');\n                    turboText.className = 'player-label player-turbo';\n                    this.controlsContainer.appendChild(turboText);\n                    this.onoptionschange.subscribe((options) => {\n                        if (flagButton && typeof options.turbo === 'boolean') {\n                            if (options.turbo) {\n                                flagButton.title = P.i18n.translate('player.controls.flag.title.enabled');\n                            }\n                            else {\n                                flagButton.title = P.i18n.translate('player.controls.flag.title.disabled');\n                            }\n                        }\n                    });\n                }\n                if (options.enableFullscreen !== false) {\n                    var fullscreenButton = document.createElement('span');\n                    fullscreenButton.className = 'player-button player-fullscreen-btn';\n                    fullscreenButton.title = P.i18n.translate('player.controls.fullscreen.title');\n                    this.controlsContainer.appendChild(fullscreenButton);\n                    fullscreenButton.addEventListener('click', clickFullscreen);\n                    fullscreenButton.addEventListener('touchend', clickFullscreen);\n                    fullscreenButton.addEventListener('touchstart', preventDefault);\n                }\n                this.root.addEventListener('touchmove', (e) => {\n                    if (this.fullscreenEnabled) {\n                        e.preventDefault();\n                    }\n                });\n                this.root.insertBefore(this.controlsContainer, this.root.firstChild);\n            }\n            applyOptionsToStage() {\n                if (this.stage.runtime.framerate !== this.options.fps) {\n                    this.stage.runtime.framerate = this.options.fps;\n                    if (this.isRunning()) {\n                        this.stage.runtime.resetInterval();\n                    }\n                }\n                this.stage.username = this.options.username;\n                this.stage.runtime.isTurbo = this.options.turbo;\n                this.stage.useSpriteFencing = this.options.spriteFencing;\n                this.stage.removeLimits = this.options.removeLimits;\n                this.stage.renderer.imageSmoothingEnabled = this.options.imageSmoothing;\n            }\n            generateUsernameIfMissing() {\n                if (!this.options.username) {\n                    this.setOptions({\n                        username: 'player' + Math.random().toFixed(10).substr(2, 6)\n                    });\n                }\n            }\n            throwWithoutStage() {\n                if (!this.stage) {\n                    throw new Error('Missing stage.');\n                }\n            }\n            resume() {\n                this.throwWithoutStage();\n                if (this.isRunning()) {\n                    throw new Error('cannot resume: project is already running');\n                }\n                this.stage.runtime.start();\n                this.enableAttribute('running');\n                this.onresume.emit();\n            }\n            pause() {\n                this.throwWithoutStage();\n                if (!this.isRunning()) {\n                    throw new Error('cannot pause: project is already paused');\n                }\n                this.stage.runtime.pause();\n                this.disableAttribute('running');\n                this.onpause.emit();\n            }\n            isRunning() {\n                if (!this.hasStage()) {\n                    return false;\n                }\n                return this.stage.runtime.isRunning;\n            }\n            toggleRunning() {\n                this.throwWithoutStage();\n                if (this.stage.runtime.isRunning) {\n                    this.pause();\n                }\n                else {\n                    this.resume();\n                }\n            }\n            stopAll() {\n                this.throwWithoutStage();\n                this.pause();\n                this.stage.runtime.stopAll();\n            }\n            triggerGreenFlag() {\n                this.throwWithoutStage();\n                if (!this.isRunning()) {\n                    this.resume();\n                }\n                this.stage.runtime.stopAll();\n                this.stage.runtime.triggerGreenFlag();\n                if (this.clickToPlayContainer) {\n                    this.removeClickToPlayContainer();\n                }\n            }\n            cleanup() {\n                if (this.currentLoader) {\n                    this.currentLoader.cancel();\n                    this.currentLoader = null;\n                }\n                if (this.clickToPlayContainer) {\n                    this.removeClickToPlayContainer();\n                }\n                if (this.fullscreenEnabled) {\n                    this.exitFullscreen();\n                }\n                if (this.stage) {\n                    this.stage.destroy();\n                    this.stage = null;\n                }\n                this.projectMeta = null;\n                while (this.playerContainer.firstChild) {\n                    this.playerContainer.removeChild(this.playerContainer.firstChild);\n                }\n                this.oncleanup.emit();\n            }\n            focus() {\n                this.stage.focus();\n            }\n            hasStage() {\n                return !!this.stage;\n            }\n            getStage() {\n                this.throwWithoutStage();\n                return this.stage;\n            }\n            hasProjectMeta() {\n                return !!this.projectMeta;\n            }\n            getProjectMeta() {\n                if (!this.projectMeta) {\n                    throw new Error('no project meta');\n                }\n                return this.projectMeta;\n            }\n            handleError(error) {\n                console.error(error);\n                this.onerror.emit(error);\n            }\n            enterFullscreen() {\n                document.body.classList.add('player-body-fullscreen');\n                this.root.style.zIndex = this.MAGIC.LARGE_Z_INDEX;\n                this.enableAttribute('fullscreen');\n                this.fullscreenEnabled = true;\n                if (this.hasStage()) {\n                    if (!this.isRunning()) {\n                        this.stage.draw();\n                    }\n                    if (this.options.focusOnLoad) {\n                        this.focus();\n                    }\n                }\n                this.updateFullscreen();\n            }\n            exitFullscreen() {\n                this.setOptions({ theme: this.savedTheme });\n                this.disableAttribute('fullscreen');\n                this.fullscreenEnabled = false;\n                if (document.fullscreenElement === this.root || document.webkitFullscreenElement === this.root) {\n                    if (document.exitFullscreen) {\n                        document.exitFullscreen();\n                    }\n                    else if (document.mozCancelFullScreen) {\n                        document.mozCancelFullScreen();\n                    }\n                    else if (document.webkitCancelFullScreen) {\n                        document.webkitCancelFullScreen();\n                    }\n                    else if (document.webkitExitFullscreen) {\n                        document.webkitExitFullscreen();\n                    }\n                }\n                this.root.style.paddingLeft = '';\n                this.root.style.paddingTop = '';\n                this.root.style.zIndex = '';\n                if (this.controlsContainer) {\n                    this.controlsContainer.style.width = '';\n                }\n                document.body.classList.remove('player-body-fullscreen');\n                if (this.stage) {\n                    this.stage.setZoom(1);\n                    this.focus();\n                }\n            }\n            updateFullscreen() {\n                if (!this.fullscreenEnabled) {\n                    return;\n                }\n                this.throwWithoutStage();\n                const controlsHeight = this.controlsContainer ? this.controlsContainer.offsetHeight : 0;\n                window.scrollTo(0, 0);\n                let w = window.innerWidth - this.options.fullscreenPadding * 2;\n                let h = window.innerHeight - this.options.fullscreenPadding - controlsHeight;\n                w = Math.min(w, h / 0.75);\n                w = Math.min(w, this.options.fullscreenMaxWidth);\n                h = w * 0.75 + controlsHeight;\n                if (this.controlsContainer) {\n                    this.controlsContainer.style.width = w + 'px';\n                }\n                this.root.style.paddingLeft = (window.innerWidth - w) / 2 + 'px';\n                this.root.style.paddingTop = (window.innerHeight - h - this.options.fullscreenPadding) / 2 + 'px';\n                this.root.style.setProperty('--lower-width-by', window.innerWidth - w + 'px');\n                this.root.style.setProperty('--lower-height-by', window.innerHeight - h - this.options.fullscreenPadding + 'px')\n                this.stage.setZoom(w / 480);\n            }\n            onfullscreenchange() {\n                if (typeof document.fullscreen === 'boolean' && document.fullscreen !== this.fullscreenEnabled) {\n                    this.exitFullscreen();\n                }\n                else if (typeof document.webkitIsFullScreen === 'boolean' && document.webkitIsFullScreen !== this.fullscreenEnabled) {\n                    this.exitFullscreen();\n                }\n            }\n            applyCloudVariablesSocket(stage, id) {\n                this.generateUsernameIfMissing();\n                const handler = new P.ext.cloud.WebSocketCloudHandler(stage, this.options.cloudHost, id);\n                stage.setCloudHandler(handler);\n            }\n            applyCloudVariablesLocalStorage(stage, id) {\n                const handler = new P.ext.cloud.LocalStorageCloudHandler(stage, id);\n                stage.setCloudHandler(handler);\n            }\n            applyCloudVariables(policy) {\n                const stage = this.stage;\n                const meta = this.projectMeta;\n                if (!meta) {\n                    throw new Error('cannot apply cloud variable settings without projectMeta');\n                }\n                const hasCloudVariables = stage.cloudVariables.length > 0;\n                if (!hasCloudVariables) {\n                    return;\n                }\n                switch (policy) {\n                    case 'ws':\n                        if (meta.isFromScratch()) {\n                            this.applyCloudVariablesSocket(stage, meta.getId());\n                        }\n                        break;\n                    case 'localStorage':\n                        this.applyCloudVariablesLocalStorage(stage, meta.getId());\n                        break;\n                }\n            }\n            applyAutoplayPolicy(policy) {\n                switch (policy) {\n                    case 'always': {\n                        this.triggerGreenFlag();\n                        break;\n                    }\n                    case 'if-audio-playable': {\n                        if (!P.audio.context || P.audio.context.state === 'running') {\n                            this.triggerGreenFlag();\n                        }\n                        else {\n                            this.showClickToPlayContainer();\n                        }\n                        break;\n                    }\n                    case 'never': {\n                        this.showClickToPlayContainer();\n                        break;\n                    }\n                }\n            }\n            showClickToPlayContainer() {\n                if (this.clickToPlayContainer) {\n                    throw new Error('cannot show click-to-play interface: already shown');\n                }\n                this.clickToPlayContainer = document.createElement('div');\n                this.clickToPlayContainer.className = 'player-click-to-play-container';\n                this.clickToPlayContainer.onclick = () => {\n                    if (P.audio.context && P.audio.context.state !== 'running') {\n                        P.audio.context.resume();\n                    }\n                    this.removeClickToPlayContainer();\n                    this.triggerGreenFlag();\n                    this.focus();\n                };\n                const content = document.createElement('div');\n                content.className = 'player-click-to-play-icon';\n                this.clickToPlayContainer.appendChild(content);\n                this.stage.ui.appendChild(this.clickToPlayContainer);\n            }\n            removeClickToPlayContainer() {\n                if (this.clickToPlayContainer === null) {\n                    throw new Error('cannot hide click-to-play interface: already hidden');\n                }\n                this.stage.ui.removeChild(this.clickToPlayContainer);\n                this.clickToPlayContainer = null;\n            }\n            beginLoadingProject() {\n                this.cleanup();\n                this.onstartload.emit();\n                const loaderId = new LoaderIdentifier();\n                this.currentLoader = loaderId;\n                return { loaderId };\n            }\n            determineProjectType(data) {\n                if ('objName' in data)\n                    return 'sb2';\n                if ('targets' in data)\n                    return 'sb3';\n                throw new Error('Unknown project type');\n            }\n            isScratch1Project(buffer) {\n                const MAGIC = 'ScratchV0';\n                const array = new Uint8Array(buffer);\n                for (var i = 0; i < MAGIC.length; i++) {\n                    if (String.fromCharCode(array[i]) !== MAGIC[i]) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n            convertScratch1Project(buffer) {\n                const sb1 = new ScratchSB1Converter.SB1File(buffer);\n                const projectData = sb1.json;\n                const zipFiles = sb1.zip.files;\n                const zip = new JSZip();\n                zip.file('project.json', JSON.stringify(projectData));\n                for (const fileName of Object.keys(zipFiles)) {\n                    zip.file(fileName, zipFiles[fileName].bytes);\n                }\n                return zip.generateAsync({ type: 'arraybuffer' });\n            }\n            fetchProject(id, token) {\n                let url = this.options.projectHost.replace('$id', id);\n                if (token) {\n                    url += `?token=${token}`;\n                }\n                const request = new P.io.Request(url);\n                return request\n                    .ignoreErrors()\n                    .load('blob')\n                    .then(function (response) {\n                    if (request.getStatus() === 404) {\n                        throw new ProjectDoesNotExistError(id);\n                    }\n                    if (request.getStatus() === 403) {\n                        throw new Error('Obtained token but permission was denied anyways. Try refreshing.');\n                    }\n                    return response;\n                });\n            }\n            setStage(stage) {\n                this.stage = stage;\n                this.stage.runtime.handleError = this.handleError;\n                this.applyOptionsToStage();\n                this.playerContainer.appendChild(stage.root);\n                if (this.options.focusOnLoad) {\n                    this.focus();\n                }\n                this.onload.emit(stage);\n                this.stage.draw();\n                this.applyCloudVariables(this.options.cloudVariables);\n                this.applyAutoplayPolicy(this.options.autoplayPolicy);\n            }\n            async loadLoader(loaderId, loader) {\n                loaderId.setLoader(loader);\n                loader.onprogress = (progress) => {\n                    if (loaderId.isActive()) {\n                        this.onprogress.emit(progress);\n                    }\n                };\n                const stage = await loader.load();\n                this.setStage(stage);\n                this.currentLoader = null;\n                loader.cleanup();\n                return stage;\n            }\n            async loadProjectById(id) {\n                const { loaderId } = this.beginLoadingProject();\n                const getLoader = async (blob) => {\n                    try {\n                        const projectText = await P.io.readers.toText(blob);\n                        const projectJson = P.json.parse(projectText);\n                        switch (this.determineProjectType(projectJson)) {\n                            case 'sb2': return new P.sb2.Scratch2Loader(projectJson);\n                            case 'sb3': return new P.sb3.Scratch3Loader(projectJson);\n                        }\n                    }\n                    catch (e) {\n                        let buffer = await P.io.readers.toArrayBuffer(blob);\n                        if (this.isScratch1Project(buffer)) {\n                            buffer = await this.convertScratch1Project(buffer);\n                        }\n                        else {\n                            try {\n                                const zip = await JSZip.loadAsync(buffer);\n                                const projectJSON = zip.file('project.json');\n                                if (!projectJSON) {\n                                    throw new Error('zip is missing project.json');\n                                }\n                                const projectDataText = await projectJSON.async('text');\n                                const projectData = JSON.parse(projectDataText);\n                                if (this.determineProjectType(projectData) === 'sb3') {\n                                    return new P.sb3.SB3FileLoader(buffer);\n                                }\n                            }\n                            catch (e) {\n                            }\n                        }\n                        return new P.sb2.SB2FileLoader(buffer);\n                    }\n                };\n                try {\n                    const meta = new RemoteProjectMeta(id);\n                    this.projectMeta = meta;\n                    const needsToken = this.options.projectHost.startsWith('https://projects.scratch.mit.edu/');\n                    let token = null;\n                    if (needsToken) {\n                        await meta.load();\n                        if (meta.isUnshared()) {\n                            throw new CannotAccessProjectError(id);\n                        }\n                        token = meta.getToken();\n                    }\n                    const blob = await this.fetchProject(id, token);\n                    const loader = await getLoader(blob);\n                    await this.loadLoader(loaderId, loader);\n                }\n                catch (e) {\n                    if (loaderId.isActive()) {\n                        this.handleError(e);\n                    }\n                }\n            }\n            async loadProjectFromBufferWithType(loaderId, buffer, type) {\n                let loader;\n                if (type === 'sb') {\n                    buffer = await this.convertScratch1Project(buffer);\n                    type = 'sb2';\n                }\n                switch (type) {\n                    case 'sb2':\n                        loader = new P.sb2.SB2FileLoader(buffer);\n                        break;\n                    case 'sb3':\n                        loader = new P.sb3.SB3FileLoader(buffer);\n                        break;\n                    default: throw new Error('Unknown type: ' + type);\n                }\n                await this.loadLoader(loaderId, loader);\n            }\n            async loadProjectFromFile(file) {\n                const { loaderId } = this.beginLoadingProject();\n                try {\n                    this.projectMeta = new LocalProjectMeta(file.name);\n                    const extension = file.name.split('.').pop() || '';\n                    const buffer = await P.io.readers.toArrayBuffer(file);\n                    switch (extension) {\n                        case 'sb': return await this.loadProjectFromBufferWithType(loaderId, buffer, 'sb');\n                        case 'sb2': return await this.loadProjectFromBufferWithType(loaderId, buffer, 'sb2');\n                        case 'sb3': return await this.loadProjectFromBufferWithType(loaderId, buffer, 'sb3');\n                        default: throw new Error('Unrecognized file extension: ' + extension);\n                    }\n                }\n                catch (e) {\n                    if (loaderId.isActive()) {\n                        this.handleError(e);\n                    }\n                }\n            }\n            async loadProjectFromBuffer(buffer, type) {\n                const { loaderId } = this.beginLoadingProject();\n                try {\n                    this.projectMeta = new BinaryProjectMeta();\n                    return await this.loadProjectFromBufferWithType(loaderId, buffer, type);\n                }\n                catch (e) {\n                    if (loaderId.isActive()) {\n                        this.handleError(e);\n                    }\n                }\n            }\n        }\n        Player.DEFAULT_OPTIONS = {\n            autoplayPolicy: 'always',\n            cloudVariables: 'ws',\n            fps: 30,\n            theme: 'light',\n            turbo: false,\n            username: '',\n            fullscreenMode: 'full',\n            fullscreenPadding: 8,\n            fullscreenMaxWidth: Infinity,\n            imageSmoothing: false,\n            focusOnLoad: true,\n            spriteFencing: false,\n            removeLimits: false,\n            projectHost: 'https://projects.scratch.mit.edu/$id',\n            cloudHost: ['wss://stratus.turbowarp.org', 'wss://stratus.turbowarp.xyz']\n        };\n        player_1.Player = Player;\n        class ErrorHandler {\n            constructor(player, options = {}) {\n                this.player = player;\n                this.errorEl = null;\n                this.errorContainer = null;\n                this.generatedErrorLink = null;\n                this.player = player;\n                player.onerror.subscribe(this.onerror.bind(this));\n                player.oncleanup.subscribe(this.oncleanup.bind(this));\n                this.errorEl = null;\n                if (options.container) {\n                    this.errorContainer = options.container;\n                }\n                else {\n                    this.errorContainer = null;\n                }\n            }\n            stringifyError(error) {\n                if (!error) {\n                    return 'unknown error';\n                }\n                if (error.stack) {\n                    return 'Message: ' + error.message + '\\nStack:\\n' + error.stack;\n                }\n                return '' + error;\n            }\n            createBugReportLink(error) {\n                const type = error ? '[Error]' : '[Bug]';\n                const title = `${type} ${this.getBugReportTitle()}`;\n                const body = this.getBugReportBody(error);\n                return ErrorHandler.BUG_REPORT_LINK\n                    .replace('$title', encodeURIComponent(title))\n                    .replace('$body', encodeURIComponent(body));\n            }\n            getBugReportTitle() {\n                if (!this.player.hasProjectMeta()) {\n                    return 'Unknown Project';\n                }\n                const meta = this.player.getProjectMeta();\n                const title = meta.getTitle();\n                const id = meta.getId();\n                if (title) {\n                    return title;\n                }\n                if (id) {\n                    return id;\n                }\n                return 'Unknown Project';\n            }\n            getBugReportBody(error) {\n                const sections = [];\n                sections.push({\n                    title: 'Describe the bug, including any steps to reproduce it',\n                    body: '',\n                });\n                sections.push({\n                    title: 'Project ID, URL, or file',\n                    body: this.getProjectInformation(),\n                });\n                let debug = '';\n                debug += location.href + '\\n';\n                debug += navigator.userAgent + '\\n';\n                if (error) {\n                    debug += '```\\n' + this.stringifyError(error) + '\\n```';\n                }\n                sections.push({\n                    title: 'Debug information <!-- DO NOT EDIT -->',\n                    body: debug,\n                });\n                return sections\n                    .map((i) => `**${i.title}**\\n${i.body}\\n`)\n                    .join('\\n')\n                    .trim();\n            }\n            getProjectInformation() {\n                if (!this.player.hasProjectMeta()) {\n                    return 'no project meta loaded';\n                }\n                const projectMeta = this.player.getProjectMeta();\n                if (projectMeta.isFromScratch()) {\n                    if (projectMeta.getTitle()) {\n                        return 'https://scratch.mit.edu/projects/' + projectMeta.getId();\n                    }\n                    else {\n                        return 'https://scratch.mit.edu/projects/' + projectMeta.getId() + ' (probably unshared)';\n                    }\n                }\n                return 'Not from Scratch: ' + projectMeta.getId();\n            }\n            oncleanup() {\n                if (this.errorEl && this.errorEl.parentNode) {\n                    this.errorEl.parentNode.removeChild(this.errorEl);\n                    this.errorEl = null;\n                }\n                this.generatedErrorLink = null;\n            }\n            handleError(error) {\n                const el = document.createElement('div');\n                const errorLink = this.createBugReportLink(error);\n                this.generatedErrorLink = errorLink;\n                const attributes = 'href=\"' + errorLink + '\" target=\"_blank\" ref=\"noopener\"';\n                el.innerHTML = P.i18n.translate('player.errorhandler.error').replace('$attrs', attributes);\n                return el;\n            }\n            handleCannotAccessProjectError(error) {\n                const el = document.createElement('div');\n                const section1 = document.createElement('div');\n                section1.textContent = \"Can't access project token. This usually means the project is unshared, never existed, or the ID is invalid.\";\n                section1.style.marginBottom = '4px';\n                el.appendChild(section1);\n                const section2 = document.createElement('div');\n                section2.textContent = \"Unshared projects are no longer accessible using their project ID due to Scratch API changes. \";\n                section2.appendChild(Object.assign(document.createElement('a'), {\n                    textContent: 'More information',\n                    href: 'https://docs.turbowarp.org/unshared-projects',\n                }));\n                section2.style.marginBottom = '4px';\n                section2.appendChild(document.createTextNode('.'));\n                el.appendChild(section2);\n                const section3 = document.createElement('div');\n                section3.textContent = 'If the project was shared recently, it may take a few minutes for this message to go away. If the project is actually shared, please report a bug.';\n                el.appendChild(section3);\n                return el;\n            }\n            handleDoesNotExistError(error) {\n                const el = document.createElement('div');\n                const LEGACY_HOST = 'https://projects.scratch.mit.edu/internalapi/project/$id/get/';\n                if (this.player.getOptions().projectHost === LEGACY_HOST) {\n                    el.textContent = P.i18n.translate('player.errorhandler.error.doesnotexistlegacy').replace('$id', error.id);\n                }\n                else {\n                    el.textContent = P.i18n.translate('player.errorhandler.error.doesnotexist').replace('$id', error.id);\n                }\n                return el;\n            }\n            onerror(error) {\n                const el = document.createElement('div');\n                el.className = 'player-error';\n                if (error instanceof CannotAccessProjectError) {\n                    el.appendChild(this.handleCannotAccessProjectError(error));\n                }\n                else if (error instanceof ProjectDoesNotExistError) {\n                    el.appendChild(this.handleDoesNotExistError(error));\n                }\n                else {\n                    el.appendChild(this.handleError(error));\n                }\n                if (this.errorContainer) {\n                    this.errorContainer.appendChild(el);\n                }\n                else if (this.player.hasStage()) {\n                    this.player.getStage().ui.appendChild(el);\n                }\n                else {\n                    this.player.playerContainer.appendChild(el);\n                }\n                this.errorEl = el;\n            }\n        }\n        ErrorHandler.BUG_REPORT_LINK = 'https://github.com/text-based-scratch/bs3.illogicalapple.com/issues/new?template=bug_report.md&labels=bug&title=$title&body=$body&';\n        player_1.ErrorHandler = ErrorHandler;\n        class ProgressBar {\n            constructor(player, options = {}) {\n                this.el = document.createElement('div');\n                this.el.className = 'player-progress';\n                this.bar = document.createElement('div');\n                this.bar.className = 'player-progress-fill';\n                this.el.appendChild(this.bar);\n                this.setTheme(player.getOptions().theme);\n                player.onthemechange.subscribe((theme) => this.setTheme(theme));\n                player.onprogress.subscribe((progress) => this.setProgress(progress));\n                player.onstartload.subscribe(() => {\n                    this.el.setAttribute('state', 'loading');\n                    this.setProgress(0);\n                });\n                player.onload.subscribe(() => {\n                    this.el.setAttribute('state', 'loaded');\n                });\n                player.oncleanup.subscribe(() => {\n                    this.el.setAttribute('state', '');\n                    this.bar.style.width = '0%';\n                });\n                player.onerror.subscribe(() => {\n                    this.el.setAttribute('state', 'error');\n                    this.bar.style.width = '100%';\n                });\n                if (options.position === 'controls' || options.position === undefined) {\n                    if (!player.controlsContainer) {\n                        throw new Error('No controls to put progess bar in.');\n                    }\n                    player.controlsContainer.appendChild(this.el);\n                }\n                else {\n                    options.position.appendChild(this.el);\n                }\n            }\n            setTheme(theme) {\n                this.el.setAttribute('theme', theme);\n            }\n            setProgress(progress) {\n                this.bar.style.width = 10 + progress * 90 + '%';\n            }\n        }\n        player_1.ProgressBar = ProgressBar;\n    })(player = P.player || (P.player = {}));\n})(P || (P = {}));\nvar P;\n(function (P) {\n    var runtime;\n    (function (runtime_1) {\n        var runtime;\n        var self;\n        var S;\n        var R;\n        var STACK;\n        var C;\n        var CALLS;\n        var WARP;\n        var BASE;\n        var THREAD;\n        var IMMEDIATE;\n        var VISUAL;\n        var STOPPED;\n        const epoch = Date.UTC(2000, 0, 1);\n        const INSTRUMENTS = P.audio.instruments;\n        const DRUMS = P.audio.drums;\n        const DIGIT = /\\d/;\n        var bool = function (v) {\n            return +v !== 0 && v !== '' && v !== 'false' && v !== false;\n        };\n        var compare = function (x, y) {\n            if ((typeof x !== 'string' || DIGIT.test(x)) && (typeof y !== 'string' || DIGIT.test(y))) {\n                var nx = +x;\n                var ny = +y;\n                if (nx === nx && ny === ny) {\n                    return nx < ny ? -1 : nx === ny ? 0 : 1;\n                }\n            }\n            var xs = ('' + x).toLowerCase();\n            var ys = ('' + y).toLowerCase();\n            return xs < ys ? -1 : xs === ys ? 0 : 1;\n        };\n        var numLess = function (nx, y) {\n            if (typeof y === 'number' || DIGIT.test(y)) {\n                var ny = +y;\n                if (ny === ny) {\n                    return nx < ny;\n                }\n            }\n            var ys = ('' + y).toLowerCase();\n            return '' + nx < ys;\n        };\n        var numGreater = function (nx, y) {\n            if (typeof y === 'number' || DIGIT.test(y)) {\n                var ny = +y;\n                if (ny === ny) {\n                    return nx > ny;\n                }\n            }\n            var ys = ('' + y).toLowerCase();\n            return '' + nx > ys;\n        };\n        var equal = function (x, y) {\n            if ((typeof x === 'number' || typeof x === 'boolean' || DIGIT.test(x)) && (typeof y === 'number' || typeof x === 'boolean' || DIGIT.test(y))) {\n                var nx = +x;\n                var ny = +y;\n                if (nx === nx && ny === ny) {\n                    return nx === ny;\n                }\n            }\n            var xs = ('' + x).toLowerCase();\n            var ys = ('' + y).toLowerCase();\n            return xs === ys;\n        };\n        var numEqual = function (nx, y) {\n            if (typeof y === 'number' || DIGIT.test(y)) {\n                var ny = +y;\n                return ny === ny && nx === ny;\n            }\n            return false;\n        };\n        var numEqualExperimental = function (nx, y) {\n            var ny = +y;\n            return ny === ny && nx === ny;\n        };\n        var numLessExperimental = function (nx, y) {\n            var ny = +y;\n            return ny === ny && nx < y;\n        };\n        var numGreaterExperimental = function (nx, y) {\n            var ny = +y;\n            return ny === ny && nx > y;\n        };\n        var strEqual = function (a, b) {\n            return (a + '').toLowerCase() === (b + '').toLowerCase();\n        };\n        var stringContains = function (baseString, needle) {\n            return baseString.toLowerCase().indexOf(needle.toLowerCase()) > -1;\n        };\n        var mod = function (x, y) {\n            var r = x % y;\n            if (r / y < 0) {\n                r += y;\n            }\n            return r;\n        };\n        var random = function (x, y) {\n            var fractional = (typeof x === 'string' && !isNaN(+x) && x.indexOf('.') > -1) ||\n                (typeof y === 'string' && !isNaN(+y) && y.indexOf('.') > -1);\n            x = +x || 0;\n            y = +y || 0;\n            if (x > y) {\n                var tmp = y;\n                y = x;\n                x = tmp;\n            }\n            if (!fractional && (x % 1 === 0 && y % 1 === 0)) {\n                return Math.floor(Math.random() * (y - x + 1)) + x;\n            }\n            return Math.random() * (y - x) + x;\n        };\n        var random3 = function (x, y) {\n            var fractional = (typeof x === 'string' && x.indexOf('.') > -1) ||\n                (typeof y === 'string' && y.indexOf('.') > -1);\n            x = +x || 0;\n            y = +y || 0;\n            if (x > y) {\n                var tmp = y;\n                y = x;\n                x = tmp;\n            }\n            if (!fractional && (x % 1 === 0 && y % 1 === 0)) {\n                return Math.floor(Math.random() * (y - x + 1)) + x;\n            }\n            return Math.random() * (y - x) + x;\n        };\n        var clone = function (name) {\n            const parent = name === '_myself_' ? S : self.getObject(name);\n            if (!parent || !P.core.isSprite(parent)) {\n                return;\n            }\n            const c = parent.clone();\n            self.children.splice(self.children.indexOf(parent), 0, c);\n            runtime.triggerFor(c, 'whenCloned');\n            if (c.visible) {\n                VISUAL = true;\n            }\n        };\n        var getVars = function (name) {\n            return self.vars[name] !== undefined ? self.vars : S.vars;\n        };\n        var getLists = function (name) {\n            if (self.lists[name] !== undefined)\n                return self.lists;\n            if (S.lists[name] === undefined) {\n                S.lists[name] = [];\n            }\n            return S.lists;\n        };\n        var listIndex = function (list, index, length) {\n            var i = index | 0;\n            if (i === index)\n                return i > 0 && i <= length ? i - 1 : -1;\n            if (index === 'random' || index === 'any') {\n                return Math.random() * length | 0;\n            }\n            if (index === 'last') {\n                return length - 1;\n            }\n            return i > 0 && i <= length ? i - 1 : -1;\n        };\n        var contentsOfList = function (list) {\n            var isSingle = true;\n            for (var i = list.length; i--;) {\n                if (list[i].length !== 1) {\n                    isSingle = false;\n                    break;\n                }\n            }\n            return list.join(isSingle ? '' : ' ');\n        };\n        var getLineOfList = function (list, index) {\n            var i = listIndex(list, index, list.length);\n            return i !== -1 ? list[i] : '';\n        };\n        var listContains = function (list, value) {\n            for (var i = list.length; i--;) {\n                if (equal(list[i], value))\n                    return true;\n            }\n            return false;\n        };\n        var listIndexOf = function (list, value) {\n            for (var i = 0; i < list.length; i++) {\n                if (equal(list[i], value))\n                    return i + 1;\n            }\n            return 0;\n        };\n        var appendToList = function (list, value) {\n            list.push(value);\n        };\n        var deleteLineOfList = function (list, index) {\n            if (index === 'all') {\n                list.length = 0;\n            }\n            else {\n                var i = listIndex(list, index, list.length);\n                if (i === list.length - 1) {\n                    list.pop();\n                }\n                else if (i !== -1) {\n                    list.splice(i, 1);\n                }\n            }\n        };\n        var insertInList = function (list, index, value) {\n            var i = listIndex(list, index, list.length + 1);\n            if (i === list.length) {\n                list.push(value);\n            }\n            else if (i !== -1) {\n                list.splice(i, 0, value);\n            }\n        };\n        var setLineOfList = function (list, index, value) {\n            var i = listIndex(list, index, list.length);\n            if (i !== -1) {\n                list[i] = value;\n            }\n        };\n        var watchedAppendToList = function (list, value) {\n            appendToList(list, value);\n            if (!list.modified)\n                list.modified = true;\n        };\n        var watchedDeleteLineOfList = function (list, index) {\n            deleteLineOfList(list, index);\n            if (!list.modified)\n                list.modified = true;\n        };\n        var watchedDeleteAllOfList = function (list) {\n            list.length = 0;\n            if (!list.modified)\n                list.modified = true;\n        };\n        var watchedInsertInList = function (list, index, value) {\n            insertInList(list, index, value);\n            if (!list.modified)\n                list.modified = true;\n        };\n        var watchedSetLineOfList = function (list, index, value) {\n            setLineOfList(list, index, value);\n            if (!list.modified)\n                list.modified = true;\n        };\n        var mathFunc = function (f, x) {\n            switch (f) {\n                case 'abs':\n                    return Math.abs(x);\n                case 'floor':\n                    return Math.floor(x);\n                case 'sqrt':\n                    return Math.sqrt(x);\n                case 'ceiling':\n                    return Math.ceil(x);\n                case 'cos':\n                    return Math.cos(x * Math.PI / 180);\n                case 'sin':\n                    return Math.sin(x * Math.PI / 180);\n                case 'tan':\n                    return Math.tan(x * Math.PI / 180);\n                case 'asin':\n                    return Math.asin(x) * 180 / Math.PI;\n                case 'acos':\n                    return Math.acos(x) * 180 / Math.PI;\n                case 'atan':\n                    return Math.atan(x) * 180 / Math.PI;\n                case 'ln':\n                    return Math.log(x);\n                case 'log':\n                    return Math.log(x) / Math.LN10;\n                case 'e ^':\n                    return Math.exp(x);\n                case '10 ^':\n                    return Math.exp(x * Math.LN10);\n            }\n            return 0;\n        };\n        var tan3 = function (angle) {\n            angle = angle - Math.floor(angle / 360) * 360;\n            if (angle === 90)\n                return Infinity;\n            if (angle === 270)\n                return -Infinity;\n            return Math.round(Math.tan(angle * Math.PI / 180) * 1e10) / 1e10;\n        };\n        var attribute = function (attr, objName) {\n            const o = self.getObject(objName);\n            if (!o)\n                return 0;\n            if (P.core.isSprite(o)) {\n                switch (attr) {\n                    case 'x position': return o.scratchX;\n                    case 'y position': return o.scratchY;\n                    case 'direction': return o.direction;\n                    case 'costume #': return o.currentCostumeIndex + 1;\n                    case 'costume name': return o.costumes[o.currentCostumeIndex].name;\n                    case 'size': return o.scale * 100;\n                    case 'volume': return o.volume * 100;\n                }\n            }\n            else {\n                switch (attr) {\n                    case 'background #':\n                    case 'backdrop #': return o.currentCostumeIndex + 1;\n                    case 'backdrop name': return o.costumes[o.currentCostumeIndex].name;\n                    case 'volume': return o.volume * 100;\n                }\n            }\n            const value = o.vars[attr];\n            if (value !== undefined) {\n                return value;\n            }\n            return 0;\n        };\n        var timeAndDate = function (format) {\n            switch (format) {\n                case 'year':\n                    return new Date().getFullYear();\n                case 'month':\n                    return new Date().getMonth() + 1;\n                case 'date':\n                    return new Date().getDate();\n                case 'day of week':\n                    return new Date().getDay() + 1;\n                case 'hour':\n                    return new Date().getHours();\n                case 'minute':\n                    return new Date().getMinutes();\n                case 'second':\n                    return new Date().getSeconds();\n            }\n            return 0;\n        };\n        function getKeyCode(keyName) {\n            keyName = keyName + '';\n            switch (keyName.toLowerCase()) {\n                case 'space':\n                case '\\x20': return \"space\";\n                case 'left arrow':\n                case '\\x1C': return \"left arrow\";\n                case 'up arrow':\n                case '\\x1E': return \"up arrow\";\n                case 'right arrow':\n                case '\\x1D': return \"right arrow\";\n                case 'down arrow':\n                case '\\x1F': return \"down arrow\";\n                case 'any': return 'any';\n                case '\\x0D': return \"enter\";\n                case '\\x1B': return \"esc\";\n                case '\\x09': return \"tab\";\n                case '\\x08': return \"backspace\";\n                case '\\x7F': return \"delete\";\n                case '': return \"_shift\";\n            }\n            return '' + keyName.charCodeAt(0);\n        }\n        runtime_1.getKeyCode = getKeyCode;\n        var getKeyCode3 = function (keyName) {\n            switch (keyName.toLowerCase()) {\n                case 'space':\n                case '\\x20': return \"space\";\n                case 'left arrow': return \"left arrow\";\n                case 'up arrow': return \"up arrow\";\n                case 'right arrow': return \"right arrow\";\n                case 'down arrow': return \"down arrow\";\n                case 'any': return 'any';\n                case 'enter': return \"enter\";\n                case 'escape': return \"esc\";\n                case 'backspace': return \"backspace\";\n                case 'delete': return \"delete\";\n                case 'insert': return \"insert\";\n                case 'home': return \"home\";\n                case 'end': return \"end\";\n                case 'page up': return \"page up\";\n                case 'page down': return \"page down\";\n                case 'control': return \"control\";\n                case 'shift': return \"_shift\";\n            }\n            return '' + keyName.toLowerCase().charCodeAt(0);\n        };\n        const audioContext = P.audio.context;\n        if (audioContext) {\n            var playNote = function (key, duration) {\n                var span;\n                var spans = INSTRUMENTS[S.instrument];\n                for (var i = 0, l = spans.length; i < l; i++) {\n                    span = spans[i];\n                    if (span.top >= key || span.top === 128)\n                        break;\n                }\n                return playSpan(span, key, duration);\n            };\n            var playSpan = function (span, key, duration) {\n                const node = P.audio.playSpan(span, key, duration, S.getAudioNode());\n                return {\n                    stopped: false,\n                    node,\n                    base: BASE,\n                };\n            };\n            var applySoundEffects = function (node) {\n                node.playbackRate.value = Math.pow(2, (S.soundFilters.pitch / 10 / 12));\n            };\n            var updateSoundEffectsOnAllSounds = function () {\n                for (const sound of S.activeSounds) {\n                    if (sound.node) {\n                        applySoundEffects(sound.node);\n                    }\n                }\n            };\n            var playSound = function (sound) {\n                const node = sound.createSourceNode();\n                applySoundEffects(node);\n                node.connect(S.getAudioNode());\n                return {\n                    stopped: false,\n                    node,\n                    base: BASE,\n                };\n            };\n            var startSound = function (sound) {\n                for (const s of S.activeSounds) {\n                    if (s.node === sound.source) {\n                        s.stopped = true;\n                        break;\n                    }\n                }\n                const node = sound.createSourceNode();\n                applySoundEffects(node);\n                node.connect(S.getAudioNode());\n            };\n        }\n        var save = function () {\n            STACK.push(R);\n            R = {};\n        };\n        var restore = function () {\n            R = STACK.pop();\n        };\n        var call = function (procedure, id, values) {\n            if (procedure) {\n                STACK.push(R);\n                CALLS.push(C);\n                C = {\n                    base: procedure.fn,\n                    fn: S.fns[id],\n                    args: procedure.call(values),\n                    numargs: [],\n                    boolargs: [],\n                    stack: STACK = [],\n                    warp: procedure.warp,\n                };\n                R = {};\n                if (C.warp || WARP) {\n                    WARP++;\n                    IMMEDIATE = procedure.fn;\n                }\n                else {\n                    if (VISUAL) {\n                        for (var i = CALLS.length, j = 5; i-- && j--;) {\n                            if (CALLS[i].base === procedure.fn) {\n                                runtime.queue[THREAD] = {\n                                    sprite: S,\n                                    base: BASE,\n                                    fn: procedure.fn,\n                                    calls: CALLS,\n                                    warp: WARP,\n                                    stopped: false\n                                };\n                                return;\n                            }\n                        }\n                    }\n                    IMMEDIATE = procedure.fn;\n                }\n            }\n            else {\n                IMMEDIATE = S.fns[id];\n            }\n        };\n        var endCall = function () {\n            if (CALLS.length) {\n                if (WARP)\n                    WARP--;\n                IMMEDIATE = C.fn;\n                C = CALLS.pop();\n                STACK = C.stack;\n                R = STACK.pop();\n            }\n        };\n        var cloudVariableChanged = function (name) {\n            if (self.cloudHandler) {\n                self.cloudHandler.variableChanged(name);\n            }\n        };\n        var parseColor = function (color) {\n            return P.utils.parseColor(color);\n        };\n        var sceneChange = function () {\n            return runtime.trigger('whenSceneStarts', self.getCostumeName());\n        };\n        var broadcast = function (name) {\n            return runtime.trigger('whenIReceive', name);\n        };\n        var running = function (bases) {\n            for (var j = 0; j < runtime.queue.length; j++) {\n                if (runtime.queue[j] && bases.indexOf(runtime.queue[j].base) !== -1)\n                    return true;\n            }\n            return false;\n        };\n        var queue = function (id) {\n            if (WARP) {\n                IMMEDIATE = S.fns[id];\n            }\n            else {\n                forceQueue(id);\n            }\n        };\n        var forceQueue = function (id) {\n            if (STOPPED)\n                return;\n            runtime.queue[THREAD] = {\n                sprite: S,\n                base: BASE,\n                fn: S.fns[id],\n                calls: CALLS,\n                warp: WARP,\n                stopped: false\n            };\n        };\n        class Runtime {\n            constructor(stage) {\n                this.stage = stage;\n                this.queue = [];\n                this.isRunning = false;\n                this.timerStart = 0;\n                this.baseTime = 0;\n                this.baseNow = 0;\n                this.isTurbo = false;\n                this.framerate = 30;\n                this.currentMSecs = 0;\n                this.whenTimerMSecs = 0;\n                this.onError = this.onError.bind(this);\n                this.step = this.step.bind(this);\n            }\n            startThread(sprite, base, replaceExisting) {\n                const thread = {\n                    sprite: sprite,\n                    base: base,\n                    fn: base,\n                    calls: [{\n                            args: [],\n                            stack: [{}],\n                        }],\n                    warp: 0,\n                    stopped: false\n                };\n                for (let i = 0; i < this.queue.length; i++) {\n                    const q = this.queue[i];\n                    if (q && q.sprite === sprite && q.base === base) {\n                        if (replaceExisting) {\n                            this.queue[i] = thread;\n                        }\n                        return;\n                    }\n                }\n                this.queue.push(thread);\n            }\n            triggerFor(sprite, event, arg) {\n                let threads;\n                let replaceExisting = true;\n                switch (event) {\n                    case 'whenClicked':\n                        threads = sprite.listeners.whenClicked;\n                        break;\n                    case 'whenCloned':\n                        threads = sprite.listeners.whenCloned;\n                        break;\n                    case 'whenGreenFlag':\n                        threads = sprite.listeners.whenGreenFlag;\n                        break;\n                    case 'whenKeyPressed':\n                        replaceExisting = false;\n                        threads = sprite.listeners.whenKeyPressed[arg] || [];\n                        if (arg !== 'any') {\n                            const anyThreads = sprite.listeners.whenKeyPressed.any;\n                            if (anyThreads) {\n                                threads = threads.concat(anyThreads);\n                            }\n                        }\n                        break;\n                    case 'whenSceneStarts':\n                        threads = sprite.listeners.whenSceneStarts[('' + arg).toLowerCase()];\n                        break;\n                    case 'whenIReceive':\n                        arg = '' + arg;\n                        threads = sprite.listeners.whenIReceive[arg] || sprite.listeners.whenIReceive[arg.toLowerCase()];\n                        break;\n                    case 'edgeActivated':\n                        threads = sprite.listeners.edgeActivated;\n                        break;\n                    default: throw new Error('Unknown trigger event: ' + event);\n                }\n                if (threads) {\n                    for (let i = 0; i < threads.length; i++) {\n                        this.startThread(sprite, threads[i], replaceExisting);\n                    }\n                }\n                return threads || [];\n            }\n            trigger(event, arg) {\n                let threads = [];\n                for (let i = this.stage.children.length; i--;) {\n                    threads = threads.concat(this.triggerFor(this.stage.children[i], event, arg));\n                }\n                return threads.concat(this.triggerFor(this.stage, event, arg));\n            }\n            triggerGreenFlag() {\n                this.timerStart = this.now();\n                this.trigger('whenGreenFlag');\n                this.trigger('edgeActivated');\n            }\n            start() {\n                this.isRunning = true;\n                if (this.interval)\n                    return;\n                window.addEventListener('error', this.onError);\n                this.baseTime = Date.now();\n                this.interval = setInterval(this.step, 1000 / this.framerate);\n                if (audioContext)\n                    audioContext.resume();\n                this.stage.startExtensions();\n            }\n            pause() {\n                if (this.interval) {\n                    this.baseNow = this.now();\n                    clearInterval(this.interval);\n                    this.interval = 0;\n                    window.removeEventListener('error', this.onError);\n                    if (audioContext)\n                        audioContext.suspend();\n                    this.stage.pauseExtensions();\n                }\n                this.isRunning = false;\n            }\n            resetInterval() {\n                if (!this.isRunning) {\n                    throw new Error('Cannot restart interval when paused');\n                }\n                if (this.interval) {\n                    clearInterval(this.interval);\n                }\n                this.interval = setInterval(this.step, 1000 / this.framerate);\n            }\n            stopAll() {\n                this.stage.hidePrompt = false;\n                this.stage.prompter.style.display = 'none';\n                this.stage.promptId = this.stage.nextPromptId = 0;\n                for (var i = 0; i < this.queue.length; i++) {\n                    const thread = this.queue[i];\n                    if (thread) {\n                        thread.stopped = true;\n                    }\n                }\n                STOPPED = true;\n                this.stage.resetFilters();\n                this.stage.stopSounds();\n                for (var i = 0; i < this.stage.children.length; i++) {\n                    const c = this.stage.children[i];\n                    if (c.isClone) {\n                        c.remove();\n                        this.stage.children.splice(i, 1);\n                        i -= 1;\n                    }\n                    else {\n                        c.resetFilters();\n                        if (c.saying && P.core.isSprite(c))\n                            c.say('');\n                        c.stopSounds();\n                    }\n                }\n            }\n            now() {\n                return this.baseNow + Date.now() - this.baseTime;\n            }\n            resetTimer() {\n                this.timerStart = this.now();\n                this.whenTimerMSecs = 0;\n            }\n            evaluateExpression(sprite, fn) {\n                self = this.stage;\n                runtime = this;\n                S = sprite;\n                try {\n                    return fn();\n                }\n                catch (e) {\n                    return undefined;\n                }\n            }\n            step() {\n                self = this.stage;\n                runtime = this;\n                VISUAL = false;\n                for (var i = 0; i < this.stage.children.length; i++) {\n                    const c = this.stage.children[i];\n                    if (c.isDragging) {\n                        c.moveTo(c.dragOffsetX + c.stage.mouseX, c.dragOffsetY + c.stage.mouseY);\n                    }\n                }\n                if (audioContext && audioContext.state === 'suspended') {\n                    audioContext.resume();\n                }\n                const start = Date.now();\n                this.currentMSecs = this.whenTimerMSecs = this.now();\n                const queue = this.queue;\n                do {\n                    for (THREAD = 0; THREAD < queue.length; THREAD++) {\n                        const thread = queue[THREAD];\n                        if (thread) {\n                            S = thread.sprite;\n                            IMMEDIATE = thread.fn;\n                            BASE = thread.base;\n                            CALLS = thread.calls;\n                            C = CALLS.pop();\n                            STACK = C.stack;\n                            R = STACK.pop();\n                            WARP = thread.warp;\n                            STOPPED = thread.stopped;\n                            thread.stopped = true;\n                            while (IMMEDIATE) {\n                                const fn = IMMEDIATE;\n                                IMMEDIATE = null;\n                                fn();\n                            }\n                            STACK.push(R);\n                            CALLS.push(C);\n                        }\n                    }\n                    for (let i = queue.length; i--;) {\n                        const thread = queue[i];\n                        if (!thread || thread.stopped) {\n                            queue.splice(i, 1);\n                        }\n                    }\n                } while ((this.isTurbo || !VISUAL) && Date.now() - start < 1000 / this.framerate && queue.length);\n                this.stage.updateExtensions();\n                this.stage.draw();\n            }\n            onError(e) {\n                clearInterval(this.interval);\n                this.handleError(e.error);\n            }\n            handleError(e) {\n                console.error(e);\n            }\n        }\n        runtime_1.Runtime = Runtime;\n        function createContinuation(source) {\n            var result = '(function() {\\n';\n            var brackets = 0;\n            var delBrackets = 0;\n            var shouldDelete = false;\n            var here = 0;\n            var length = source.length;\n            while (here < length) {\n                var i = source.indexOf('{', here);\n                var j = source.indexOf('}', here);\n                var k = source.indexOf('return;', here);\n                if (k === -1)\n                    k = length;\n                if (i === -1 && j === -1) {\n                    if (!shouldDelete) {\n                        result += source.slice(here, k);\n                    }\n                    break;\n                }\n                if (i === -1)\n                    i = length;\n                if (j === -1)\n                    j = length;\n                if (shouldDelete) {\n                    if (i < j) {\n                        delBrackets++;\n                        here = i + 1;\n                    }\n                    else {\n                        delBrackets--;\n                        if (!delBrackets) {\n                            shouldDelete = false;\n                        }\n                        here = j + 1;\n                    }\n                }\n                else {\n                    if (brackets === 0 && k < i && k < j) {\n                        result += source.slice(here, k);\n                        break;\n                    }\n                    if (i < j) {\n                        result += source.slice(here, i + 1);\n                        brackets++;\n                        here = i + 1;\n                    }\n                    else {\n                        result += source.slice(here, j);\n                        here = j + 1;\n                        if (source.substr(j, 8) === '} else {') {\n                            if (brackets > 0) {\n                                result += '} else {';\n                                here = j + 8;\n                            }\n                            else {\n                                shouldDelete = true;\n                                delBrackets = 0;\n                            }\n                        }\n                        else {\n                            if (brackets > 0) {\n                                result += '}';\n                                brackets--;\n                            }\n                        }\n                    }\n                }\n            }\n            result += '})';\n            return scopedEval(result);\n        }\n        runtime_1.createContinuation = createContinuation;\n        function scopedEval(source) {\n            return eval(source);\n        }\n        runtime_1.scopedEval = scopedEval;\n    })(runtime = P.runtime || (P.runtime = {}));\n})(P || (P = {}));\nvar P;\n(function (P) {\n    var sb2;\n    (function (sb2) {\n        const ASSET_URL = 'https://cdn.assets.scratch.mit.edu/internalapi/asset/';\n        class Scratch2VariableWatcher extends P.core.Watcher {\n            constructor(stage, targetName, data) {\n                super(stage, targetName);\n                this.cmd = data.cmd;\n                this.type = data.type || 'var';\n                if (data.color) {\n                    var c = (data.color < 0 ? data.color + 0x1000000 : data.color).toString(16);\n                    this.color = '#000000'.slice(0, -c.length) + c;\n                }\n                else {\n                    this.color = '#ee7d16';\n                }\n                this.isDiscrete = data.isDiscrete == null ? true : data.isDiscrete;\n                this.label = data.label || '';\n                this.mode = data.mode || 1;\n                this.param = data.param;\n                this.sliderMax = data.sliderMax == null ? 100 : data.sliderMax;\n                this.sliderMin = data.sliderMin || 0;\n                this.targetName = data.target;\n                this.visible = data.visible == null ? false : data.visible;\n                this.x = data.x || 0;\n                this.y = data.y || 0;\n            }\n            init() {\n                super.init();\n                if (this.target && this.cmd === 'getVar:') {\n                    this.target.watchers[this.param] = this;\n                }\n                if (!this.label) {\n                    this.label = this.getLabel();\n                    if (this.target.isSprite)\n                        this.label = this.target.name + ': ' + this.label;\n                }\n                this.layout();\n            }\n            getLabel() {\n                var WATCHER_LABELS = {\n                    'costumeIndex': 'costume #',\n                    'xpos': 'x position',\n                    'ypos': 'y position',\n                    'heading': 'direction',\n                    'scale': 'size',\n                    'backgroundIndex': 'background #',\n                    'sceneName': 'background name',\n                    'tempo': 'tempo',\n                    'volume': 'volume',\n                    'answer': 'answer',\n                    'timer': 'timer',\n                    'soundLevel': 'loudness',\n                    'isLoud': 'loud?',\n                    'xScroll': 'x scroll',\n                    'yScroll': 'y scroll'\n                };\n                switch (this.cmd) {\n                    case 'getVar:': return this.param;\n                    case 'sensor:': return this.param + ' sensor value';\n                    case 'sensorPressed': return 'sensor ' + this.param + '?';\n                    case 'timeAndDate': return this.param;\n                    case 'senseVideoMotion': return 'video ' + this.param;\n                }\n                return WATCHER_LABELS[this.cmd] || '';\n            }\n            setVisible(visible) {\n                super.setVisible(visible);\n                this.layout();\n            }\n            update() {\n                var value = 0;\n                if (!this.target)\n                    return;\n                switch (this.cmd) {\n                    case 'answer':\n                        value = this.stage.answer;\n                        break;\n                    case 'backgroundIndex':\n                        value = this.stage.currentCostumeIndex + 1;\n                        break;\n                    case 'costumeIndex':\n                        value = this.target.currentCostumeIndex + 1;\n                        break;\n                    case 'getVar:':\n                        value = this.target.vars[this.param];\n                        break;\n                    case 'heading':\n                        value = this.target.direction;\n                        break;\n                    case 'scale':\n                        if (this.target.isSprite) {\n                            value = this.target.scale * 100;\n                        }\n                        break;\n                    case 'sceneName':\n                        value = this.stage.getCostumeName();\n                        break;\n                    case 'senseVideoMotion':\n                        break;\n                    case 'soundLevel':\n                        if (this.stage.microphone) {\n                            value = this.stage.microphone.getLoudness();\n                        }\n                        else {\n                            value = -1;\n                        }\n                        break;\n                    case 'tempo':\n                        value = this.stage.tempoBPM;\n                        break;\n                    case 'timeAndDate':\n                        value = this.timeAndDate(this.param);\n                        break;\n                    case 'timer':\n                        value = Math.round((this.stage.runtime.now() - this.stage.runtime.timerStart) / 100) / 10;\n                        break;\n                    case 'volume':\n                        value = this.target.volume * 100;\n                        break;\n                    case 'xpos':\n                        value = this.target.scratchX;\n                        break;\n                    case 'ypos':\n                        value = this.target.scratchY;\n                        break;\n                }\n                if (typeof value === 'number' && (value < 0.001 || value > 0.001)) {\n                    value = Math.round(value * 1000) / 1000;\n                }\n                this.readout.textContent = '' + value;\n                if (this.slider) {\n                    this.buttonWrap.style.transform = 'translate(' + ((+value || 0) - this.sliderMin) / (this.sliderMax - this.sliderMin) * 100 + '%,0)';\n                }\n            }\n            timeAndDate(format) {\n                switch (format) {\n                    case 'year':\n                        return new Date().getFullYear();\n                    case 'month':\n                        return new Date().getMonth() + 1;\n                    case 'date':\n                        return new Date().getDate();\n                    case 'day of week':\n                        return new Date().getDay() + 1;\n                    case 'hour':\n                        return new Date().getHours();\n                    case 'minute':\n                        return new Date().getMinutes();\n                    case 'second':\n                        return new Date().getSeconds();\n                }\n                return 0;\n            }\n            layout() {\n                if (this.el) {\n                    this.el.style.display = this.visible ? 'block' : 'none';\n                    return;\n                }\n                if (!this.visible)\n                    return;\n                this.el = document.createElement('div');\n                this.el.dataset.watcher = '' + this.stage.allWatchers.indexOf(this);\n                this.el.style.whiteSpace = 'pre';\n                this.el.style.position = 'absolute';\n                this.el.style.left = this.el.style.top = '0';\n                this.el.style.transform = 'translate(' + (this.x | 0) / 10 + 'em,' + (this.y | 0) / 10 + 'em)';\n                this.el.style.cursor = 'default';\n                if (this.mode === 2) {\n                    this.el.appendChild(this.readout = document.createElement('div'));\n                    this.readout.style.minWidth = (38 / 15) + 'em';\n                    this.readout.style.font = 'bold 1.5em/' + (19 / 15) + ' sans-serif';\n                    this.readout.style.height = (19 / 15) + 'em';\n                    this.readout.style.borderRadius = (4 / 15) + 'em';\n                    this.readout.style.margin = (3 / 15) + 'em 0 0 0';\n                    this.readout.style.padding = '0 ' + (3 / 10) + 'em';\n                }\n                else {\n                    this.el.appendChild(this.labelEl = document.createElement('div'));\n                    this.el.appendChild(this.readout = document.createElement('div'));\n                    this.el.style.border = '.1em solid rgb(148,145,145)';\n                    this.el.style.borderRadius = '.4em';\n                    this.el.style.background = 'rgb(193,196,199)';\n                    this.el.style.padding = '.2em .6em .3em .5em';\n                    this.labelEl.textContent = this.label;\n                    this.labelEl.style.font = 'bold 1.1em/1 sans-serif';\n                    this.labelEl.style.display = 'inline-block';\n                    this.labelEl.style.verticalAlign =\n                        this.readout.style.verticalAlign = 'middle';\n                    this.readout.style.minWidth = (37 / 10) + 'em';\n                    this.readout.style.padding = '0 ' + (1 / 10) + 'em';\n                    this.readout.style.font = 'bold 1.0em/' + (13 / 10) + ' sans-serif';\n                    this.readout.style.height = (13 / 10) + 'em';\n                    this.readout.style.borderRadius = (4 / 10) + 'em';\n                    this.readout.style.marginLeft = (6 / 10) + 'em';\n                }\n                this.readout.style.color = '#fff';\n                var f = 1 / (this.mode === 2 ? 15 : 10);\n                this.readout.style.border = f + 'em solid #fff';\n                this.readout.style.boxShadow = 'inset ' + f + 'em ' + f + 'em ' + f + 'em rgba(0,0,0,.5), inset -' + f + 'em -' + f + 'em ' + f + 'em rgba(255,255,255,.5)';\n                this.readout.style.textAlign = 'center';\n                this.readout.style.background = this.color;\n                this.readout.style.display = 'inline-block';\n                if (this.mode === 3) {\n                    this.el.appendChild(this.slider = document.createElement('div'));\n                    this.slider.appendChild(this.buttonWrap = document.createElement('div'));\n                    this.buttonWrap.appendChild(this.button = document.createElement('div'));\n                    this.slider.style.height =\n                        this.slider.style.borderRadius = '.5em';\n                    this.slider.style.background = 'rgb(192,192,192)';\n                    this.slider.style.margin = '.4em 0 .1em';\n                    this.slider.style.boxShadow = 'inset .125em .125em .125em rgba(0,0,0,.5), inset -.125em -.125em .125em rgba(255,255,255,.5)';\n                    this.slider.style.position = 'relative';\n                    this.slider.style.pointerEvents = 'auto';\n                    this.slider.dataset.slider = '';\n                    this.slider.style.paddingRight =\n                        this.button.style.width =\n                            this.button.style.height =\n                                this.button.style.borderRadius = '1.1em';\n                    this.button.style.position = 'absolute';\n                    this.button.style.left = '0';\n                    this.button.style.top = '-.3em';\n                    this.button.style.background = '#fff';\n                    this.button.style.boxShadow = 'inset .3em .3em .2em -.2em rgba(255,255,255,.9), inset -.3em -.3em .2em -.2em rgba(0,0,0,.9), inset 0 0 0 .1em #777';\n                    this.button.dataset.button = '';\n                }\n                this.stage.ui.appendChild(this.el);\n            }\n        }\n        sb2.Scratch2VariableWatcher = Scratch2VariableWatcher;\n        class Scratch2Stage extends P.core.Stage {\n            constructor() {\n                super(...arguments);\n                this.dragging = {};\n                this.defaultWatcherX = 10;\n                this.defaultWatcherY = 10;\n            }\n            createVariableWatcher(target, variableName) {\n                const x = this.defaultWatcherX;\n                const y = this.defaultWatcherY;\n                this.defaultWatcherY += 26;\n                if (this.defaultWatcherY >= 450) {\n                    this.defaultWatcherY = 10;\n                    this.defaultWatcherX += 150;\n                }\n                return new P.sb2.Scratch2VariableWatcher(this, target.name, {\n                    cmd: 'getVar:',\n                    param: variableName,\n                    x,\n                    y,\n                });\n            }\n            say(text, thinking) {\n                return ++this.sayId;\n            }\n            updateBubble() {\n            }\n            watcherStart(id, t, e) {\n                var p = e.target;\n                while (p && p.dataset.watcher == null)\n                    p = p.parentElement;\n                if (!p)\n                    return;\n                var w = this.allWatchers[p.dataset.watcher];\n                this.dragging[id] = {\n                    watcher: w,\n                    offset: (e.target.dataset.button == null ? -w.button.offsetWidth / 2 | 0 : w.button.getBoundingClientRect().left - t.clientX) - w.slider.getBoundingClientRect().left\n                };\n            }\n            watcherMove(id, t, e) {\n                var d = this.dragging[id];\n                if (!d)\n                    return;\n                var w = d.watcher;\n                var sw = w.slider.offsetWidth;\n                var bw = w.button.offsetWidth;\n                var value = w.sliderMin + Math.max(0, Math.min(1, (t.clientX + d.offset) / (sw - bw))) * (w.sliderMax - w.sliderMin);\n                w.target.vars[w.param] = w.isDiscrete ? Math.round(value) : Math.round(value * 100) / 100;\n                w.update();\n                e.preventDefault();\n            }\n            watcherEnd(id, t, e) {\n                this.watcherMove(id, t, e);\n                delete this.dragging[id];\n            }\n            ontouch(event, touch) {\n                const target = event.target;\n                if (target.dataset.button != null || target.dataset.slider != null) {\n                    this.watcherStart(touch.identifier, touch, event);\n                }\n            }\n            onmousedown(e) {\n                const target = e.target;\n                if (target.dataset.button != null || target.dataset.slider != null) {\n                    this.watcherStart('mouse', e, e);\n                }\n            }\n            onmousemove(e) {\n                this.watcherMove('mouse', e, e);\n            }\n            onmouseup(e) {\n                this.watcherEnd('mouse', e, e);\n            }\n        }\n        sb2.Scratch2Stage = Scratch2Stage;\n        class Scratch2Sprite extends P.core.Sprite {\n            _clone() {\n                return new Scratch2Sprite(this.stage);\n            }\n        }\n        sb2.Scratch2Sprite = Scratch2Sprite;\n        class BaseSB2Loader extends P.io.Loader {\n            loadImage(url) {\n                return this.addTask(new P.io.Img(url)).load();\n            }\n            loadFonts() {\n                return Promise.all([\n                    this.addTask(new P.io.PromiseTask((P.utils.settled(P.fonts.loadWebFont('Donegal One'))))),\n                    this.addTask(new P.io.PromiseTask((P.utils.settled(P.fonts.loadWebFont('Gloria Hallelujah'))))),\n                    this.addTask(new P.io.PromiseTask((P.utils.settled(P.fonts.loadWebFont('Mystery Quest'))))),\n                    this.addTask(new P.io.PromiseTask((P.utils.settled(P.fonts.loadWebFont('Permanent Marker'))))),\n                ]).then(() => undefined);\n            }\n            loadBase(data, isStage) {\n                var costumes;\n                var sounds;\n                return Promise.all([\n                    this.loadArray(data.costumes, this.loadCostume.bind(this)).then((c) => costumes = c),\n                    this.loadArray(data.sounds, this.loadSound.bind(this)).then((s) => sounds = s),\n                ]).then(() => {\n                    const object = new (isStage ? Scratch2Stage : Scratch2Sprite)(null);\n                    if (data.variables) {\n                        for (const variable of data.variables) {\n                            if (variable.isPersistent) {\n                                if (object.isStage) {\n                                    object.cloudVariables.push(variable.name);\n                                }\n                                else {\n                                    console.warn('Cloud variable found on a non-stage object. Skipping.');\n                                }\n                            }\n                            object.vars[variable.name] = variable.value;\n                        }\n                    }\n                    if (data.lists) {\n                        for (const list of data.lists) {\n                            if (list.isPersistent) {\n                                console.warn('Cloud lists are not supported');\n                            }\n                            object.lists[list.listName] = list.contents;\n                        }\n                    }\n                    object.name = data.objName;\n                    object.costumes = costumes;\n                    object.currentCostumeIndex = Math.floor(data.currentCostumeIndex);\n                    sounds.forEach((sound) => sound && object.addSound(sound));\n                    if (isStage) {\n                    }\n                    else {\n                        const sprite = object;\n                        sprite.scratchX = data.scratchX;\n                        sprite.scratchY = data.scratchY;\n                        sprite.direction = data.direction;\n                        sprite.isDraggable = data.isDraggable;\n                        sprite.rotationStyle = P.utils.parseRotationStyle(data.rotationStyle);\n                        sprite.scale = data.scale;\n                        sprite.visible = data.visible;\n                    }\n                    object.scripts = data.scripts || [];\n                    return object;\n                });\n            }\n            loadArray(data, process) {\n                return Promise.all((data || []).map((i, ind) => process(i, ind)));\n            }\n            loadObject(data) {\n                if (data.cmd) {\n                    return this.loadVariableWatcher(data);\n                }\n                else if (data.listName) {\n                }\n                else {\n                    return this.loadBase(data, false);\n                }\n            }\n            loadVariableWatcher(data) {\n                const targetName = data.target;\n                const watcher = new Scratch2VariableWatcher(null, targetName, data);\n                return watcher;\n            }\n            loadCostume(data) {\n                const promises = [\n                    this.loadMD5(data.baseLayerMD5, data.baseLayerID)\n                        .then((asset) => data.$image = asset)\n                ];\n                if (data.textLayerMD5) {\n                    promises.push(this.loadMD5(data.textLayerMD5, data.textLayerID)\n                        .then((asset) => data.$text = asset));\n                }\n                return Promise.all(promises)\n                    .then((layers) => {\n                    var image;\n                    if (layers.length > 1) {\n                        image = document.createElement('canvas');\n                        const ctx = image.getContext('2d');\n                        if (!ctx) {\n                            throw new Error('Cannot get 2d rendering context loading costume ' + data.costumeName);\n                        }\n                        image.width = Math.max(layers[0].width, 1);\n                        image.height = Math.max(layers[0].height, 1);\n                        for (const layer of layers) {\n                            ctx.drawImage(layer, 0, 0);\n                        }\n                    }\n                    else {\n                        image = layers[0];\n                    }\n                    return new P.core.BitmapCostume(image, {\n                        name: data.costumeName,\n                        bitmapResolution: data.bitmapResolution,\n                        rotationCenterX: data.rotationCenterX,\n                        rotationCenterY: data.rotationCenterY,\n                    });\n                });\n            }\n            loadSound(data) {\n                return new Promise((resolve, reject) => {\n                    this.loadMD5(data.md5, data.soundID, true)\n                        .then((buffer) => {\n                        resolve(new P.core.Sound({\n                            name: data.soundName,\n                            buffer,\n                        }));\n                    })\n                        .catch((err) => {\n                        resolve(null);\n                        console.warn('Could not load sound: ' + err);\n                    });\n                });\n            }\n            loadSVG(source) {\n                const parser = new DOMParser();\n                var doc = parser.parseFromString(source, 'image/svg+xml');\n                var svg = doc.documentElement;\n                if (!svg.style) {\n                    doc = parser.parseFromString('<body>' + source, 'text/html');\n                    svg = doc.querySelector('svg');\n                }\n                DOMPurify.sanitize(svg, {\n                    IN_PLACE: true,\n                    USE_PROFILES: { svg: true }\n                });\n                svg.style.visibility = 'hidden';\n                svg.style.position = 'absolute';\n                svg.style.left = '-10000px';\n                svg.style.top = '-10000px';\n                document.body.appendChild(svg);\n                const viewBox = svg.viewBox.baseVal;\n                if (viewBox && (viewBox.x || viewBox.y)) {\n                    svg.width.baseVal.value = viewBox.width - viewBox.x;\n                    svg.height.baseVal.value = viewBox.height - viewBox.y;\n                    viewBox.x = 0;\n                    viewBox.y = 0;\n                    viewBox.width = 0;\n                    viewBox.height = 0;\n                }\n                patchSVG(svg, svg);\n                document.body.removeChild(svg);\n                svg.style.visibility = svg.style.position = svg.style.left = svg.style.top = '';\n                const canvas = document.createElement('canvas');\n                const ctx = canvas.getContext('2d');\n                if (!ctx) {\n                    throw new Error('unable to get rendering context for drawing svg');\n                }\n                return canvg.Canvg.from(ctx, new XMLSerializer().serializeToString(svg), {\n                    ignoreMouse: true,\n                    ignoreAnimation: true,\n                    ignoreClear: true,\n                })\n                    .then((v) => {\n                    return v.render();\n                }).then(() => {\n                    return canvas;\n                });\n            }\n            load() {\n                var children;\n                var stage;\n                return this.loadFonts()\n                    .then(() => Promise.all([\n                    P.audio.loadSoundbankSB2(this),\n                    this.loadArray(this.projectData.children, this.loadObject.bind(this)).then((c) => children = c),\n                    this.loadBase(this.projectData, true).then((s) => stage = s),\n                ]))\n                    .then(() => {\n                    if (this.aborted) {\n                        throw new Error('Loading aborting.');\n                    }\n                    children = children.filter((i) => i);\n                    children.forEach((c) => c.stage = stage);\n                    const sprites = children.filter((i) => i instanceof Scratch2Sprite);\n                    const watchers = children.filter((i) => i instanceof Scratch2VariableWatcher);\n                    stage.children = sprites;\n                    stage.allWatchers = watchers;\n                    stage.allWatchers.forEach((w) => w.init());\n                    P.sb2.compiler.compile(stage);\n                    return stage;\n                });\n            }\n        }\n        sb2.BaseSB2Loader = BaseSB2Loader;\n        class SB2FileLoader extends BaseSB2Loader {\n            constructor(buffer) {\n                super();\n                this.buffer = buffer;\n            }\n            loadMD5(hash, id, isAudio = false) {\n                const f = isAudio ? (this.zip.file(id + '.wav') || this.zip.file(id + '.mp3')) : this.zip.file(id + '.gif') || (this.zip.file(id + '.png') || this.zip.file(id + '.jpg') || this.zip.file(id + '.svg'));\n                if (!f) {\n                    throw new Error('cannot find md5: ' + hash + ' (isAudio=' + isAudio + ')');\n                }\n                hash = f.name;\n                if (isAudio) {\n                    return f.async('arraybuffer')\n                        .then((buffer) => P.audio.decodeAudio(buffer));\n                }\n                const ext = hash.split('.').pop();\n                if (ext === 'svg') {\n                    return f.async('text')\n                        .then((text) => this.loadSVG(text));\n                }\n                else {\n                    return new Promise((resolve, reject) => {\n                        var image = new Image();\n                        image.onload = function () {\n                            resolve(image);\n                        };\n                        image.onerror = function () {\n                            reject(new Error('Failed to load image: ' + hash + '/' + id));\n                        };\n                        f.async('binarystring')\n                            .then((data) => {\n                            image.src = 'data:image/' + (ext === 'jpg' ? 'jpeg' : ext) + ';base64,' + btoa(data);\n                        });\n                    });\n                }\n            }\n            load() {\n                return JSZip.loadAsync(this.buffer)\n                    .then((data) => {\n                    this.zip = data;\n                    const project = this.zip.file('project.json');\n                    if (!project) {\n                        throw new Error('project.json is missing');\n                    }\n                    return project.async('text');\n                })\n                    .then((project) => {\n                    this.projectData = P.json.parse(project);\n                })\n                    .then(() => super.load());\n            }\n        }\n        sb2.SB2FileLoader = SB2FileLoader;\n        class Scratch2Loader extends BaseSB2Loader {\n            constructor(idOrData) {\n                super();\n                if (typeof idOrData === 'object') {\n                    this.projectData = idOrData;\n                    this.projectId = null;\n                }\n                else {\n                    this.projectId = idOrData;\n                }\n            }\n            loadMD5(hash, id, isAudio = false) {\n                const ext = hash.split('.').pop();\n                if (ext === 'svg') {\n                    return this.addTask(new P.io.Request(ASSET_URL + hash + '/get/')).load('text')\n                        .then((text) => this.loadSVG(text));\n                }\n                else if (ext === 'wav') {\n                    return this.addTask(new P.io.Request(ASSET_URL + hash + '/get/')).load('arraybuffer')\n                        .then((buffer) => P.audio.decodeAudio(buffer));\n                }\n                else {\n                    return this.loadImage(ASSET_URL + hash + '/get/');\n                }\n            }\n            load() {\n                if (this.projectId) {\n                    return this.addTask(new P.io.Request(P.config.PROJECT_API.replace('$id', '' + this.projectId))).load('json')\n                        .then((data) => {\n                        this.projectData = data;\n                        return super.load();\n                    });\n                }\n                else {\n                    return super.load();\n                }\n            }\n        }\n        sb2.Scratch2Loader = Scratch2Loader;\n        function patchSVG(svg, element) {\n            const FONTS = {\n                '': 'Helvetica',\n                Donegal: 'Donegal One',\n                Gloria: 'Gloria Hallelujah',\n                Marker: 'Permanent Marker',\n                Mystery: 'Mystery Quest'\n            };\n            const LINE_HEIGHTS = {\n                Helvetica: 1.13,\n                'Donegal One': 1.25,\n                'Gloria Hallelujah': 1.97,\n                'Permanent Marker': 1.43,\n                'Mystery Quest': 1.37\n            };\n            if (element.nodeType !== 1)\n                return;\n            if (element.nodeName === 'text') {\n                var font = element.getAttribute('font-family') || '';\n                font = FONTS[font] || font;\n                if (font) {\n                    element.setAttribute('font-family', font);\n                    if (font === 'Helvetica')\n                        element.style.fontWeight = 'bold';\n                }\n                var size = +element.getAttribute('font-size');\n                if (!size) {\n                    element.setAttribute('font-size', size = 18);\n                }\n                var bb = element.getBBox();\n                var transform = element.transform.baseVal.consolidate();\n                if (transform) {\n                    var x = 4 - .6 * transform.matrix.a;\n                    var y = (element.getAttribute('y') - bb.y) * 1.1;\n                    element.setAttribute('x', x);\n                    element.setAttribute('y', y);\n                    var lines = element.textContent.split('\\n');\n                    if (lines.length > 1) {\n                        element.textContent = lines[0];\n                        var lineHeight = LINE_HEIGHTS[font] || 1;\n                        for (var i = 1, l = lines.length; i < l; i++) {\n                            var tspan = document.createElementNS(null, 'tspan');\n                            tspan.textContent = lines[i];\n                            tspan.setAttribute('x', '' + x);\n                            tspan.setAttribute('y', '' + (y + size * i * lineHeight));\n                            element.appendChild(tspan);\n                        }\n                    }\n                }\n            }\n            else if ((element.hasAttribute('x') || element.hasAttribute('y')) && element.hasAttribute('transform')) {\n                element.setAttribute('x', 0);\n                element.setAttribute('y', 0);\n            }\n            [].forEach.call(element.childNodes, patchSVG.bind(null, svg));\n        }\n    })(sb2 = P.sb2 || (P.sb2 = {}));\n})(P || (P = {}));\n(function (P) {\n    var sb2;\n    (function (sb2) {\n        var compiler;\n        (function (compiler) {\n            const CLOUD = ' ';\n            var LOG_PRIMITIVES;\n            class Scratch2Procedure extends P.core.Procedure {\n                call(inputs) {\n                    return inputs;\n                }\n            }\n            compiler.Scratch2Procedure = Scratch2Procedure;\n            var EVENT_SELECTORS = [\n                'procDef',\n                'whenClicked',\n                'whenCloned',\n                'whenGreenFlag',\n                'whenIReceive',\n                'whenKeyPressed',\n                'whenSceneStarts',\n                'whenSensorGreaterThan'\n            ];\n            var compileScripts = function (object) {\n                for (var i = 0; i < object.scripts.length; i++) {\n                    compiler.compileListener(object, object.scripts[i][2]);\n                }\n            };\n            var warnings;\n            var warn = function (message) {\n                warnings[message] = (warnings[message] || 0) + 1;\n            };\n            compiler.compileListener = function (object, script) {\n                if (!script[0] || EVENT_SELECTORS.indexOf(script[0][0]) === -1)\n                    return;\n                var nextLabel = function () {\n                    return object.fns.length + fns.length;\n                };\n                var label = function () {\n                    var id = nextLabel();\n                    fns.push(source.length);\n                    visual = 0;\n                    return id;\n                };\n                var delay = function () {\n                    source += 'return;\\n';\n                    label();\n                };\n                var queue = function (id) {\n                    source += 'queue(' + id + ');\\n';\n                    source += 'return;\\n';\n                };\n                var forceQueue = function (id) {\n                    source += 'forceQueue(' + id + ');\\n';\n                    source += 'return;\\n';\n                };\n                var seq = function (script) {\n                    if (!script)\n                        return;\n                    for (var i = 0; i < script.length; i++) {\n                        compile(script[i]);\n                    }\n                };\n                var varRef = function (name) {\n                    if (typeof name !== 'string') {\n                        return 'getVars(' + val(name) + ')[' + val(name) + ']';\n                    }\n                    var o = object.stage.vars[name] !== undefined ? 'self' : 'S';\n                    return o + '.vars[' + val(name) + ']';\n                };\n                var isCloudVar = function (name) {\n                    if (typeof name !== 'string') {\n                        return false;\n                    }\n                    return name.startsWith(CLOUD) && object.stage.vars[name] !== undefined && object.stage.cloudVariables.indexOf(name) > -1;\n                };\n                var listRef = function (name) {\n                    if (typeof name !== 'string') {\n                        return 'getLists(' + val(name) + ')[' + val(name) + ']';\n                    }\n                    var o = object.stage.lists[name] !== undefined ? 'self' : 'S';\n                    if (o === 'S' && !object.lists[name]) {\n                        object.lists[name] = [];\n                    }\n                    return o + '.lists[' + val(name) + ']';\n                };\n                var param = function (name, usenum, usebool) {\n                    if (typeof name !== 'string') {\n                        throw new Error('Dynamic parameters are not supported');\n                    }\n                    if (!inputs)\n                        return '0';\n                    var i = inputs.indexOf(name);\n                    if (i === -1) {\n                        return '0';\n                    }\n                    var t = types[i];\n                    var kind = t === '%n' || t === '%d' || t === '%c' ? 'num' :\n                        t === '%b' ? 'bool' : '';\n                    if (kind === 'num' && usenum) {\n                        used[i] = true;\n                        return 'C.numargs[' + i + ']';\n                    }\n                    if (kind === 'bool' && usebool) {\n                        used[i] = true;\n                        return 'C.boolargs[' + i + ']';\n                    }\n                    var v = 'C.args[' + i + ']';\n                    if (usenum)\n                        return '(+' + v + ' || 0)';\n                    if (usebool)\n                        return 'bool(' + v + ')';\n                    return v;\n                };\n                var val2 = function (e) {\n                    var v;\n                    if (e[0] === 'costumeName') {\n                        return 'S.getCostumeName()';\n                    }\n                    else if (e[0] === 'sceneName') {\n                        return 'self.getCostumeName()';\n                    }\n                    else if (e[0] === 'readVariable') {\n                        return varRef(e[1]);\n                    }\n                    else if (e[0] === 'contentsOfList:') {\n                        return 'contentsOfList(' + listRef(e[1]) + ')';\n                    }\n                    else if (e[0] === 'getLine:ofList:') {\n                        return 'getLineOfList(' + listRef(e[2]) + ', ' + val(e[1]) + ')';\n                    }\n                    else if (e[0] === 'concatenate:with:') {\n                        return '(\"\" + ' + val(e[1]) + ' + ' + val(e[2]) + ')';\n                    }\n                    else if (e[0] === 'letter:of:') {\n                        return '((\"\" + ' + val(e[2]) + ')[(' + num(e[1]) + ' | 0) - 1] || \"\")';\n                    }\n                    else if (e[0] === 'answer') {\n                        return 'self.answer';\n                    }\n                    else if (e[0] === 'getAttribute:of:') {\n                        return 'attribute(' + val(e[1]) + ', ' + val(e[2]) + ')';\n                    }\n                    else if (e[0] === 'getUserId') {\n                        return '0';\n                    }\n                    else if (e[0] === 'getUserName') {\n                        return 'self.username';\n                    }\n                    else {\n                        warn('Undefined val: ' + e[0]);\n                    }\n                };\n                var val = function (e, usenum, usebool) {\n                    var v;\n                    if (typeof e === 'number' || typeof e === 'boolean' || e === null) {\n                        return '' + e;\n                    }\n                    else if (typeof e === 'string') {\n                        return '\"' + e\n                            .replace(/\\\\/g, '\\\\\\\\')\n                            .replace(/\\n/g, '\\\\n')\n                            .replace(/\\r/g, '\\\\r')\n                            .replace(/\"/g, '\\\\\"')\n                            .replace(/\\{/g, '\\\\x7b')\n                            .replace(/\\}/g, '\\\\x7d') + '\"';\n                    }\n                    else if (e[0] === 'getParam') {\n                        return param(e[1], usenum, usebool);\n                    }\n                    else if ((v = numval(e)) != null || (v = boolval(e)) != null) {\n                        return v;\n                    }\n                    else {\n                        v = val2(e);\n                        if (usenum)\n                            return '(+' + v + ' || 0)';\n                        if (usebool)\n                            return 'bool(' + v + ')';\n                        return v;\n                    }\n                };\n                var numval = function (e) {\n                    if (e[0] === 'xpos') {\n                        return 'S.scratchX';\n                    }\n                    else if (e[0] === 'ypos') {\n                        return 'S.scratchY';\n                    }\n                    else if (e[0] === 'heading') {\n                        return 'S.direction';\n                    }\n                    else if (e[0] === 'costumeIndex') {\n                        return '(S.currentCostumeIndex + 1)';\n                    }\n                    else if (e[0] === 'backgroundIndex') {\n                        return '(self.currentCostumeIndex + 1)';\n                    }\n                    else if (e[0] === 'scale') {\n                        return 'Math.round(S.scale * 100)';\n                    }\n                    else if (e[0] === 'volume') {\n                        return '(S.volume * 100)';\n                    }\n                    else if (e[0] === 'tempo') {\n                        return 'self.tempoBPM';\n                    }\n                    else if (e[0] === 'lineCountOfList:') {\n                        return listRef(e[1]) + '.length';\n                    }\n                    else if (e[0] === '+') {\n                        return '(' + num(e[1]) + ' + ' + num(e[2]) + ')';\n                    }\n                    else if (e[0] === '-') {\n                        return '(' + num(e[1]) + ' - ' + num(e[2]) + ')';\n                    }\n                    else if (e[0] === '*') {\n                        return '(' + num(e[1]) + ' * ' + num(e[2]) + ')';\n                    }\n                    else if (e[0] === '/') {\n                        return '(' + num(e[1]) + ' / ' + num(e[2]) + ')';\n                    }\n                    else if (e[0] === 'randomFrom:to:') {\n                        return 'random(' + num(e[1]) + ', ' + num(e[2]) + ')';\n                    }\n                    else if (e[0] === 'abs') {\n                        return 'Math.abs(' + num(e[1]) + ')';\n                    }\n                    else if (e[0] === 'sqrt') {\n                        return 'Math.sqrt(' + num(e[1]) + ')';\n                    }\n                    else if (e[0] === 'stringLength:') {\n                        return '(\"\" + ' + val(e[1]) + ').length';\n                    }\n                    else if (e[0] === '%' || e[0] === '\\\\\\\\') {\n                        return 'mod(' + num(e[1]) + ', ' + num(e[2]) + ')';\n                    }\n                    else if (e[0] === 'rounded') {\n                        return 'Math.round(' + num(e[1]) + ')';\n                    }\n                    else if (e[0] === 'computeFunction:of:') {\n                        if (typeof e[1] !== 'object') {\n                            switch ('' + e[1]) {\n                                case 'abs':\n                                    return 'Math.abs(' + num(e[2]) + ')';\n                                case 'floor':\n                                    return 'Math.floor(' + num(e[2]) + ')';\n                                case 'sqrt':\n                                    return 'Math.sqrt(' + num(e[2]) + ')';\n                                case 'ceiling':\n                                    return 'Math.ceil(' + num(e[2]) + ')';\n                                case 'cos':\n                                    return 'Math.cos(' + num(e[2]) + ' * Math.PI / 180)';\n                                case 'sin':\n                                    return 'Math.sin(' + num(e[2]) + ' * Math.PI / 180)';\n                                case 'tan':\n                                    return 'Math.tan(' + num(e[2]) + ' * Math.PI / 180)';\n                                case 'asin':\n                                    return '(Math.asin(' + num(e[2]) + ') * 180 / Math.PI)';\n                                case 'acos':\n                                    return '(Math.acos(' + num(e[2]) + ') * 180 / Math.PI)';\n                                case 'atan':\n                                    return '(Math.atan(' + num(e[2]) + ') * 180 / Math.PI)';\n                                case 'ln':\n                                    return 'Math.log(' + num(e[2]) + ')';\n                                case 'log':\n                                    return '(Math.log(' + num(e[2]) + ') / Math.LN10)';\n                                case 'e ^':\n                                    return 'Math.exp(' + num(e[2]) + ')';\n                                case '10 ^':\n                                    return 'Math.exp(' + num(e[2]) + ' * Math.LN10)';\n                            }\n                            return '0';\n                        }\n                        return 'mathFunc(' + val(e[1]) + ', ' + num(e[2]) + ')';\n                    }\n                    else if (e[0] === 'mouseX') {\n                        return 'self.mouseX';\n                    }\n                    else if (e[0] === 'mouseY') {\n                        return 'self.mouseY';\n                    }\n                    else if (e[0] === 'timer') {\n                        return '((runtime.now() - runtime.timerStart) / 1000)';\n                    }\n                    else if (e[0] === 'distanceTo:') {\n                        return 'S.distanceTo(' + val(e[1]) + ')';\n                    }\n                    else if (e[0] === 'soundLevel') {\n                        object.stage.initMicrophone();\n                        return 'self.microphone.getLoudness()';\n                    }\n                    else if (e[0] === 'timestamp') {\n                        return '((Date.now() - epoch) / 86400000)';\n                    }\n                    else if (e[0] === 'timeAndDate') {\n                        return 'timeAndDate(' + val(e[1]) + ')';\n                    }\n                };\n                var DIGIT = /\\d/;\n                var boolval = function (e) {\n                    if (e[0] === 'list:contains:') {\n                        return 'listContains(' + listRef(e[1]) + ', ' + val(e[2]) + ')';\n                    }\n                    else if (e[0] === '<' || e[0] === '>') {\n                        var less;\n                        let x;\n                        let y;\n                        if (typeof e[1] === 'string' && DIGIT.test(e[1]) || typeof e[1] === 'number') {\n                            less = e[0] === '<';\n                            x = e[1];\n                            y = e[2];\n                        }\n                        else if (typeof e[2] === 'string' && DIGIT.test(e[2]) || typeof e[2] === 'number') {\n                            less = e[0] === '>';\n                            x = e[2];\n                            y = e[1];\n                        }\n                        var nx = +x;\n                        if (x == null || nx !== nx) {\n                            return '(compare(' + val(e[1]) + ', ' + val(e[2]) + ') === ' + (e[0] === '<' ? -1 : 1) + ')';\n                        }\n                        return (less ? 'numLess' : 'numGreater') + '(' + nx + ', ' + val(y) + ')';\n                    }\n                    else if (e[0] === '=') {\n                        let x;\n                        let y;\n                        if (typeof e[1] === 'string' && DIGIT.test(e[1]) || typeof e[1] === 'number') {\n                            x = e[1];\n                            y = e[2];\n                        }\n                        else if (typeof e[2] === 'string' && DIGIT.test(e[2]) || typeof e[2] === 'number') {\n                            x = e[2];\n                            y = e[1];\n                        }\n                        var nx = +x;\n                        if (x == null || nx !== nx) {\n                            return '(equal(' + val(e[1]) + ', ' + val(e[2]) + '))';\n                        }\n                        return '(numEqual(' + nx + ', ' + val(y) + '))';\n                    }\n                    else if (e[0] === '&') {\n                        return '(' + bool(e[1]) + ' && ' + bool(e[2]) + ')';\n                    }\n                    else if (e[0] === '|') {\n                        return '(' + bool(e[1]) + ' || ' + bool(e[2]) + ')';\n                    }\n                    else if (e[0] === 'not') {\n                        return '!' + bool(e[1]) + '';\n                    }\n                    else if (e[0] === 'mousePressed') {\n                        return 'self.mousePressed';\n                    }\n                    else if (e[0] === 'touching:') {\n                        return 'S.touching(' + val(e[1]) + ')';\n                    }\n                    else if (e[0] === 'touchingColor:') {\n                        return 'S.touchingColor(' + val(e[1]) + ')';\n                    }\n                    else if (e[0] === 'color:sees:') {\n                        return 'S.colorTouchingColor(' + val(e[1]) + ', ' + val(e[2]) + ')';\n                    }\n                    else if (e[0] === 'keyPressed:') {\n                        var v = typeof e[1] === 'object' ?\n                            'getKeyCode(' + val(e[1]) + ')' : val(P.runtime.getKeyCode(e[1]));\n                        return '!!self.keys[' + v + ']';\n                    }\n                };\n                var bool = function (e) {\n                    if (typeof e === 'boolean') {\n                        return e;\n                    }\n                    if (typeof e === 'number' || typeof e === 'string') {\n                        return +e !== 0 && e !== '' && e !== 'false';\n                    }\n                    var v = boolval(e);\n                    return v != null ? v : val(e, false, true);\n                };\n                var num = function (e) {\n                    if (typeof e === 'number') {\n                        return e || 0;\n                    }\n                    if (typeof e === 'boolean' || typeof e === 'string') {\n                        return +e || 0;\n                    }\n                    var v = numval(e);\n                    return v != null ? v : val(e, true);\n                };\n                var beatHead = function (dur) {\n                    source += 'save();\\n';\n                    source += 'R.start = runtime.now();\\n';\n                    source += 'R.duration = ' + num(dur) + ' * 60 / self.tempoBPM;\\n';\n                    source += 'var first = !WARP;\\n';\n                };\n                var beatTail = function () {\n                    var id = label();\n                    source += 'if (!R.sound) R.sound = { stopped: false };';\n                    source += 'S.activeSounds.add(R.sound);\\n';\n                    source += 'if ((runtime.now() - R.start < R.duration * 1000 || first) && !R.sound.stopped) {\\n';\n                    source += '  var first;\\n';\n                    forceQueue(id);\n                    source += '}\\n';\n                    source += 'S.activeSounds.delete(R.sound);';\n                    source += 'restore();\\n';\n                };\n                var wait = function (dur) {\n                    source += 'save();\\n';\n                    source += 'R.start = runtime.now();\\n';\n                    source += 'R.duration = ' + dur + ';\\n';\n                    source += 'var first = !WARP;\\n';\n                    var id = label();\n                    source += 'if (runtime.now() - R.start < R.duration * 1000 || first) {\\n';\n                    source += '  var first;\\n';\n                    forceQueue(id);\n                    source += '}\\n';\n                    source += 'restore();\\n';\n                };\n                var toHSLA = 'S.penColor.toHSLA();\\n';\n                toHSLA += 'S.penColor.a = 1;\\n';\n                var visual = 0;\n                var compile = function (block) {\n                    if (LOG_PRIMITIVES) {\n                        source += 'console.log(' + val(block[0]) + ');\\n';\n                    }\n                    if (['turnRight:', 'turnLeft:', 'heading:', 'pointTowards:', 'setRotationStyle', 'lookLike:', 'nextCostume', 'say:duration:elapsed:from:', 'say:', 'think:duration:elapsed:from:', 'think:', 'changeGraphicEffect:by:', 'setGraphicEffect:to:', 'filterReset', 'changeSizeBy:', 'setSizeTo:', 'comeToFront', 'goBackByLayers:'].indexOf(block[0]) !== -1) {\n                        if (visual < 2) {\n                            source += 'if (S.visible) VISUAL = true;\\n';\n                            visual = 2;\n                        }\n                        else if (P.config.debug)\n                            source += '/* visual: 2 */\\n';\n                    }\n                    else if (['forward:', 'gotoX:y:', 'gotoSpriteOrMouse:', 'changeXposBy:', 'xpos:', 'changeYposBy:', 'ypos:', 'bounceOffEdge', 'glideSecs:toX:y:elapsed:from:'].indexOf(block[0]) !== -1) {\n                        if (visual < 1) {\n                            source += 'if (S.visible || S.isPenDown) VISUAL = true;\\n';\n                            visual = 1;\n                        }\n                        else if (P.config.debug)\n                            source += '/* visual: 1 */\\n';\n                    }\n                    else if (['showBackground:', 'startScene', 'nextBackground', 'nextScene', 'startSceneAndWait', 'show', 'hide', 'putPenDown', 'stampCostume', 'showVariable:', 'hideVariable:', 'doAsk', 'setVolumeTo:', 'changeVolumeBy:', 'setTempoTo:', 'changeTempoBy:'].indexOf(block[0]) !== -1) {\n                        if (visual < 3) {\n                            source += 'VISUAL = true;\\n';\n                            visual = 3;\n                        }\n                        else if (P.config.debug)\n                            source += '/* visual: 3 */\\n';\n                    }\n                    if (block[0] === 'forward:') {\n                        source += 'S.forward(' + num(block[1]) + ');\\n';\n                    }\n                    else if (block[0] === 'turnRight:') {\n                        source += 'S.setDirection(S.direction + ' + num(block[1]) + ');\\n';\n                    }\n                    else if (block[0] === 'turnLeft:') {\n                        source += 'S.setDirection(S.direction - ' + num(block[1]) + ');\\n';\n                    }\n                    else if (block[0] === 'heading:') {\n                        source += 'S.setDirection(' + num(block[1]) + ');\\n';\n                    }\n                    else if (block[0] === 'pointTowards:') {\n                        source += 'S.pointTowards(' + val(block[1]) + ');\\n';\n                    }\n                    else if (block[0] === 'gotoX:y:') {\n                        source += 'S.moveTo(' + num(block[1]) + ', ' + num(block[2]) + ');\\n';\n                    }\n                    else if (block[0] === 'gotoSpriteOrMouse:') {\n                        source += 'S.gotoObject(' + val(block[1]) + ');\\n';\n                    }\n                    else if (block[0] === 'changeXposBy:') {\n                        source += 'S.moveTo(S.scratchX + ' + num(block[1]) + ', S.scratchY);\\n';\n                    }\n                    else if (block[0] === 'xpos:') {\n                        source += 'S.moveTo(' + num(block[1]) + ', S.scratchY);\\n';\n                    }\n                    else if (block[0] === 'changeYposBy:') {\n                        source += 'S.moveTo(S.scratchX, S.scratchY + ' + num(block[1]) + ');\\n';\n                    }\n                    else if (block[0] === 'ypos:') {\n                        source += 'S.moveTo(S.scratchX, ' + num(block[1]) + ');\\n';\n                    }\n                    else if (block[0] === 'bounceOffEdge') {\n                        source += 'S.bounceOffEdge();\\n';\n                    }\n                    else if (block[0] === 'setRotationStyle') {\n                        source += 'S.rotationStyle = P.utils.parseRotationStyle(' + val(block[1]) + ');\\n';\n                    }\n                    else if (block[0] === 'lookLike:') {\n                        source += 'S.setCostume(' + val(block[1]) + ');\\n';\n                    }\n                    else if (block[0] === 'nextCostume') {\n                        source += 'S.showNextCostume();\\n';\n                    }\n                    else if (block[0] === 'showBackground:' ||\n                        block[0] === 'startScene') {\n                        source += 'self.setCostume(' + val(block[1]) + ');\\n';\n                        source += 'var threads = sceneChange();\\n';\n                        source += 'if (threads.indexOf(BASE) !== -1) {return;}\\n';\n                    }\n                    else if (block[0] === 'nextBackground' ||\n                        block[0] === 'nextScene') {\n                        source += 'S.showNextCostume();\\n';\n                        source += 'var threads = sceneChange();\\n';\n                        source += 'if (threads.indexOf(BASE) !== -1) {return;}\\n';\n                    }\n                    else if (block[0] === 'startSceneAndWait') {\n                        source += 'save();\\n';\n                        source += 'self.setCostume(' + val(block[1]) + ');\\n';\n                        source += 'R.threads = sceneChange();\\n';\n                        source += 'if (R.threads.indexOf(BASE) !== -1) {return;}\\n';\n                        var id = label();\n                        source += 'if (!running(R.threads)) {\\n';\n                        forceQueue(id);\n                        source += '}\\n';\n                        source += 'restore();\\n';\n                    }\n                    else if (block[0] === 'say:duration:elapsed:from:') {\n                        source += 'save();\\n';\n                        source += 'R.id = S.say(' + val(block[1]) + ', false);\\n';\n                        source += 'R.start = runtime.now();\\n';\n                        source += 'R.duration = ' + num(block[2]) + ';\\n';\n                        source += 'var first = !WARP;\\n';\n                        var id = label();\n                        source += 'if (runtime.now() - R.start < R.duration * 1000 || first) {\\n';\n                        source += '  var first;\\n';\n                        forceQueue(id);\n                        source += '}\\n';\n                        source += 'if (S.sayId === R.id) {\\n';\n                        source += '  S.say(\"\");\\n';\n                        source += '}\\n';\n                        source += 'restore();\\n';\n                    }\n                    else if (block[0] === 'say:') {\n                        source += 'S.say(' + val(block[1]) + ', false);\\n';\n                    }\n                    else if (block[0] === 'think:duration:elapsed:from:') {\n                        source += 'save();\\n';\n                        source += 'R.id = S.say(' + val(block[1]) + ', true);\\n';\n                        source += 'R.start = runtime.now();\\n';\n                        source += 'R.duration = ' + num(block[2]) + ';\\n';\n                        source += 'var first = !WARP;\\n';\n                        var id = label();\n                        source += 'if (runtime.now() - R.start < R.duration * 1000 || first) {\\n';\n                        source += '  var first;\\n';\n                        forceQueue(id);\n                        source += '}\\n';\n                        source += 'if (S.sayId === R.id) {\\n';\n                        source += '  S.say(\"\");\\n';\n                        source += '}\\n';\n                        source += 'restore();\\n';\n                    }\n                    else if (block[0] === 'think:') {\n                        source += 'S.say(' + val(block[1]) + ', true);\\n';\n                    }\n                    else if (block[0] === 'changeGraphicEffect:by:') {\n                        source += 'S.changeFilter(' + val(block[1]) + ', ' + num(block[2]) + ');\\n';\n                    }\n                    else if (block[0] === 'setGraphicEffect:to:') {\n                        source += 'S.setFilter(' + val(block[1]) + ', ' + num(block[2]) + ');\\n';\n                    }\n                    else if (block[0] === 'filterReset') {\n                        source += 'S.resetFilters();\\n';\n                    }\n                    else if (block[0] === 'changeSizeBy:') {\n                        source += 'var f = S.scale + ' + num(block[1]) + ' / 100;\\n';\n                        source += 'S.scale = f < 0 ? 0 : f;\\n';\n                    }\n                    else if (block[0] === 'setSizeTo:') {\n                        source += 'var f = ' + num(block[1]) + ' / 100;\\n';\n                        source += 'S.scale = f < 0 ? 0 : f;\\n';\n                    }\n                    else if (block[0] === 'show') {\n                        source += 'S.visible = true;\\n';\n                        source += 'if (S.saying) S.updateBubble();\\n';\n                    }\n                    else if (block[0] === 'hide') {\n                        source += 'S.visible = false;\\n';\n                        source += 'if (S.saying) S.updateBubble();\\n';\n                    }\n                    else if (block[0] === 'comeToFront') {\n                        source += 'var i = self.children.indexOf(S);\\n';\n                        source += 'if (i !== -1) self.children.splice(i, 1);\\n';\n                        source += 'self.children.push(S);\\n';\n                    }\n                    else if (block[0] === 'goBackByLayers:') {\n                        source += 'var i = self.children.indexOf(S);\\n';\n                        source += 'if (i !== -1) {\\n';\n                        source += '  self.children.splice(i, 1);\\n';\n                        source += '  self.children.splice(Math.max(0, i - ' + num(block[1]) + '), 0, S);\\n';\n                        source += '}\\n';\n                    }\n                    else if (block[0] === 'setVideoState') {\n                        source += 'switch (' + val(block[1]) + ') {';\n                        source += '  case \"off\": self.showVideo(false); break;';\n                        source += '  case \"on\": self.showVideo(true); break;';\n                        source += '}';\n                    }\n                    else if (block[0] === 'playSound:') {\n                        if (P.audio.context) {\n                            source += 'var sound = S.getSound(' + val(block[1]) + ');\\n';\n                            source += 'if (sound) startSound(sound);\\n';\n                        }\n                    }\n                    else if (block[0] === 'doPlaySoundAndWait') {\n                        if (P.audio.context) {\n                            source += 'var sound = S.getSound(' + val(block[1]) + ');\\n';\n                            source += 'if (sound) {\\n';\n                            source += '  save();\\n';\n                            source += '  R.sound = playSound(sound);\\n';\n                            source += '  S.activeSounds.add(R.sound);\\n';\n                            source += '  R.start = runtime.now();\\n';\n                            source += '  R.duration = sound.duration;\\n';\n                            source += '  var first = true;\\n';\n                            var id = label();\n                            source += '  if ((runtime.now() - R.start < R.duration * 1000 || first) && !R.sound.stopped) {\\n';\n                            source += '    var first;\\n';\n                            forceQueue(id);\n                            source += '  }\\n';\n                            source += '  S.activeSounds.delete(R.sound);\\n';\n                            source += '  restore();\\n';\n                            source += '}\\n';\n                        }\n                    }\n                    else if (block[0] === 'stopAllSounds') {\n                        if (P.audio.context) {\n                            source += 'self.stopAllSounds();\\n';\n                        }\n                    }\n                    else if (block[0] === 'playDrum') {\n                        beatHead(block[2]);\n                        if (P.audio.context) {\n                            source += 'R.sound = playSpan(DRUMS[Math.round(' + num(block[1]) + ') - 1] || DRUMS[2], 60, 10);\\n';\n                        }\n                        beatTail();\n                    }\n                    else if (block[0] === 'rest:elapsed:from:') {\n                        beatHead(block[1]);\n                        beatTail();\n                    }\n                    else if (block[0] === 'noteOn:duration:elapsed:from:') {\n                        beatHead(block[2]);\n                        if (P.audio.context) {\n                            source += 'R.sound = playNote(' + num(block[1]) + ', R.duration);\\n';\n                        }\n                        beatTail();\n                    }\n                    else if (block[0] === 'instrument:') {\n                        source += 'S.instrument = Math.max(0, Math.min(INSTRUMENTS.length - 1, ' + num(block[1]) + ' - 1)) | 0;';\n                    }\n                    else if (block[0] === 'changeVolumeBy:' || block[0] === 'setVolumeTo:') {\n                        source += 'S.volume = Math.min(1, Math.max(0, ' + (block[0] === 'changeVolumeBy:' ? 'S.volume + ' : '') + num(block[1]) + ' / 100));\\n';\n                        source += 'if (S.node) S.node.gain.value = S.volume;\\n';\n                    }\n                    else if (block[0] === 'changeTempoBy:') {\n                        source += 'self.tempoBPM += ' + num(block[1]) + ';\\n';\n                    }\n                    else if (block[0] === 'setTempoTo:') {\n                        source += 'self.tempoBPM = ' + num(block[1]) + ';\\n';\n                    }\n                    else if (block[0] === 'clearPenTrails') {\n                        source += 'self.clearPen();\\n';\n                    }\n                    else if (block[0] === 'putPenDown') {\n                        source += 'S.isPenDown = true;\\n';\n                        source += 'S.dotPen();\\n';\n                    }\n                    else if (block[0] === 'putPenUp') {\n                        source += 'S.isPenDown = false;\\n';\n                    }\n                    else if (block[0] === 'penColor:') {\n                        source += 'S.penColor.setRGBA(' + num(block[1]) + ');\\n';\n                    }\n                    else if (block[0] === 'setPenHueTo:') {\n                        source += toHSLA;\n                        source += 'S.penColor.x = ' + num(block[1]) + ' * 360 / 200;\\n';\n                        source += 'S.penColor.y = 100;\\n';\n                    }\n                    else if (block[0] === 'changePenHueBy:') {\n                        source += toHSLA;\n                        source += 'S.penColor.x += ' + num(block[1]) + ' * 360 / 200;\\n';\n                        source += 'S.penColor.y = 100;\\n';\n                    }\n                    else if (block[0] === 'setPenShadeTo:') {\n                        source += toHSLA;\n                        source += 'S.penColor.z = ' + num(block[1]) + ' % 200;\\n';\n                        source += 'if (S.penColor.z < 0) S.penColor.z += 200;\\n';\n                        source += 'S.penColor.y = 100;\\n';\n                    }\n                    else if (block[0] === 'changePenShadeBy:') {\n                        source += toHSLA;\n                        source += 'S.penColor.z = (S.penColor.z + ' + num(block[1]) + ') % 200;\\n';\n                        source += 'if (S.penColor.z < 0) S.penColor.z += 200;\\n';\n                        source += 'S.penColor.y = 100;\\n';\n                    }\n                    else if (block[0] === 'penSize:') {\n                        source += 'var f = ' + num(block[1]) + ';\\n';\n                        source += 'S.penSize = f < 1 ? 1 : f;\\n';\n                    }\n                    else if (block[0] === 'changePenSizeBy:') {\n                        source += 'var f = S.penSize + ' + num(block[1]) + ';\\n';\n                        source += 'S.penSize = f < 1 ? 1 : f;\\n';\n                    }\n                    else if (block[0] === 'stampCostume') {\n                        source += 'S.stamp();\\n';\n                    }\n                    else if (block[0] === 'setVar:to:') {\n                        source += varRef(block[1]) + ' = ' + val(block[2]) + ';\\n';\n                        if (isCloudVar(block[1])) {\n                            source += 'cloudVariableChanged(' + val(block[1]) + ');\\n';\n                        }\n                    }\n                    else if (block[0] === 'changeVar:by:') {\n                        var ref = varRef(block[1]);\n                        source += ref + ' = (+' + ref + ' || 0) + ' + num(block[2]) + ';\\n';\n                        if (isCloudVar(block[1])) {\n                            source += 'cloudVariableChanged(' + val(block[1]) + ');\\n';\n                        }\n                    }\n                    else if (block[0] === 'append:toList:') {\n                        source += 'appendToList(' + listRef(block[2]) + ', ' + val(block[1]) + ');\\n';\n                    }\n                    else if (block[0] === 'deleteLine:ofList:') {\n                        source += 'deleteLineOfList(' + listRef(block[2]) + ', ' + val(block[1]) + ');\\n';\n                    }\n                    else if (block[0] === 'insert:at:ofList:') {\n                        source += 'insertInList(' + listRef(block[3]) + ', ' + val(block[2]) + ', ' + val(block[1]) + ');\\n';\n                    }\n                    else if (block[0] === 'setLine:ofList:to:') {\n                        source += 'setLineOfList(' + listRef(block[2]) + ', ' + val(block[1]) + ', ' + val(block[3]) + ');\\n';\n                    }\n                    else if (block[0] === 'showVariable:' || block[0] === 'hideVariable:') {\n                        var isShow = block[0] === 'showVariable:';\n                        if (typeof block[1] === 'string') {\n                            var o = object.vars[block[1]] !== undefined ? 'S' : 'self';\n                            source += o + '.showVariable(' + val(block[1]) + ', ' + isShow + ');\\n';\n                        }\n                        else {\n                            warn('ignoring dynamic variable');\n                        }\n                    }\n                    else if (block[0] === 'broadcast:') {\n                        source += 'var threads = broadcast(' + val(block[1]) + ');\\n';\n                        source += 'if (threads.indexOf(BASE) !== -1) {STOPPED = true;}\\n';\n                    }\n                    else if (block[0] === 'call') {\n                        if (P.config.debug && block[1] === 'phosphorus: debug') {\n                            source += 'debugger;\\n';\n                        }\n                        else {\n                            source += 'call(S.procedures[' + val(block[1]) + '], ' + nextLabel() + ', [';\n                            for (var i = 2; i < block.length; i++) {\n                                if (i > 2) {\n                                    source += ', ';\n                                }\n                                source += val(block[i]);\n                            }\n                            source += ']);\\n';\n                            delay();\n                        }\n                    }\n                    else if (block[0] === 'doBroadcastAndWait') {\n                        source += 'save();\\n';\n                        source += 'R.threads = broadcast(' + val(block[1]) + ');\\n';\n                        source += 'if (R.threads.indexOf(BASE) !== -1) {return;}\\n';\n                        var id = label();\n                        source += 'if (running(R.threads)) {\\n';\n                        forceQueue(id);\n                        source += '}\\n';\n                        source += 'restore();\\n';\n                    }\n                    else if (block[0] === 'doForever') {\n                        var id = label();\n                        seq(block[1]);\n                        forceQueue(id);\n                    }\n                    else if (block[0] === 'doForeverIf') {\n                        var id = label();\n                        source += 'if (' + bool(block[1]) + ') {\\n';\n                        seq(block[2]);\n                        source += '}\\n';\n                        forceQueue(id);\n                    }\n                    else if (block[0] === 'doIf') {\n                        source += 'if (' + bool(block[1]) + ') {\\n';\n                        seq(block[2]);\n                        source += '}\\n';\n                    }\n                    else if (block[0] === 'doIfElse') {\n                        source += 'if (' + bool(block[1]) + ') {\\n';\n                        seq(block[2]);\n                        source += '} else {\\n';\n                        seq(block[3]);\n                        source += '}\\n';\n                    }\n                    else if (block[0] === 'doRepeat') {\n                        source += 'save();\\n';\n                        source += 'R.count = ' + num(block[1]) + ';\\n';\n                        var id = label();\n                        source += 'if (R.count >= 0.5) {\\n';\n                        source += '  R.count -= 1;\\n';\n                        seq(block[2]);\n                        queue(id);\n                        source += '} else {\\n';\n                        source += '  restore();\\n';\n                        source += '}\\n';\n                    }\n                    else if (block[0] === 'doReturn') {\n                        source += 'endCall();\\n';\n                        source += 'return;\\n';\n                    }\n                    else if (block[0] === 'doUntil') {\n                        var id = label();\n                        source += 'if (!' + bool(block[1]) + ') {\\n';\n                        seq(block[2]);\n                        queue(id);\n                        source += '}\\n';\n                    }\n                    else if (block[0] === 'doWhile') {\n                        var id = label();\n                        source += 'if (' + bool(block[1]) + ') {\\n';\n                        seq(block[2]);\n                        queue(id);\n                        source += '}\\n';\n                    }\n                    else if (block[0] === 'doWaitUntil') {\n                        var id = label();\n                        source += 'if (!' + bool(block[1]) + ') {\\n';\n                        forceQueue(id);\n                        source += '}\\n';\n                    }\n                    else if (block[0] === 'glideSecs:toX:y:elapsed:from:') {\n                        source += 'save();\\n';\n                        source += 'R.start = runtime.now();\\n';\n                        source += 'R.duration = ' + num(block[1]) + ';\\n';\n                        source += 'R.baseX = S.scratchX;\\n';\n                        source += 'R.baseY = S.scratchY;\\n';\n                        source += 'R.deltaX = ' + num(block[2]) + ' - S.scratchX;\\n';\n                        source += 'R.deltaY = ' + num(block[3]) + ' - S.scratchY;\\n';\n                        var id = label();\n                        source += 'var f = (runtime.now() - R.start) / (R.duration * 1000);\\n';\n                        source += 'if (f > 1 || isNaN(f)) f = 1;\\n';\n                        source += 'S.moveTo(R.baseX + f * R.deltaX, R.baseY + f * R.deltaY);\\n';\n                        source += 'if (f < 1) {\\n';\n                        forceQueue(id);\n                        source += '}\\n';\n                        source += 'restore();\\n';\n                    }\n                    else if (block[0] === 'stopAll') {\n                        source += 'runtime.stopAll();\\n';\n                        source += 'return;\\n';\n                    }\n                    else if (block[0] === 'stopScripts') {\n                        source += 'switch (' + val(block[1]) + ') {\\n';\n                        source += '  case \"all\":\\n';\n                        source += '    runtime.stopAll();\\n';\n                        source += '    return;\\n';\n                        source += '  case \"this script\":\\n';\n                        source += '    endCall();\\n';\n                        source += '    return;\\n';\n                        source += '  case \"other scripts in sprite\":\\n';\n                        source += '  case \"other scripts in stage\":\\n';\n                        source += '    S.stopSoundsExcept(BASE);\\n';\n                        source += '    for (var i = 0; i < runtime.queue.length; i++) {\\n';\n                        source += '      if (i !== THREAD && runtime.queue[i] && runtime.queue[i].sprite === S) {\\n';\n                        source += '        runtime.queue[i].stopped = true;\\n';\n                        source += '        runtime.queue[i].fn = undefined;\\n';\n                        source += '      }\\n';\n                        source += '    }\\n';\n                        source += '    break;\\n';\n                        source += '}\\n';\n                    }\n                    else if (block[0] === 'wait:elapsed:from:') {\n                        wait(num(block[1]));\n                    }\n                    else if (block[0] === 'warpSpeed') {\n                        source += 'WARP++;\\n';\n                        seq(block[1]);\n                        source += 'WARP--;\\n';\n                    }\n                    else if (block[0] === 'createCloneOf') {\n                        source += 'clone(' + val(block[1]) + ');\\n';\n                    }\n                    else if (block[0] === 'deleteClone') {\n                        source += 'if (S.isClone) {\\n';\n                        source += '  S.remove();\\n';\n                        source += '  var i = self.children.indexOf(S);\\n';\n                        source += '  if (i !== -1) self.children.splice(i, 1);\\n';\n                        source += '  for (var i = 0; i < runtime.queue.length; i++) {\\n';\n                        source += '    if (runtime.queue[i] && runtime.queue[i].sprite === S) {\\n';\n                        source += '      runtime.queue[i] = undefined;\\n';\n                        source += '    }\\n';\n                        source += '  }\\n';\n                        source += '  return;\\n';\n                        source += '}\\n';\n                    }\n                    else if (block[0] === 'doAsk') {\n                        source += 'R.id = self.nextPromptId++;\\n';\n                        var id = label();\n                        source += 'if (self.promptId < R.id) {\\n';\n                        forceQueue(id);\n                        source += '}\\n';\n                        source += 'S.ask(' + val(block[1]) + ');\\n';\n                        var id = label();\n                        source += 'if (self.promptId === R.id) {\\n';\n                        forceQueue(id);\n                        source += '}\\n';\n                    }\n                    else if (block[0] === 'timerReset') {\n                        source += 'runtime.timerStart = runtime.now();\\n';\n                    }\n                    else {\n                        warn('Undefined command: ' + block[0]);\n                    }\n                };\n                var source = '';\n                var startfn = object.fns.length;\n                var fns = [0];\n                if (script[0][0] === 'procDef') {\n                    var inputs = script[0][2];\n                    var types = script[0][1].match(/%[snmdcb]/g) || [];\n                    var used = [];\n                }\n                for (let i = 1; i < script.length; i++) {\n                    compile(script[i]);\n                }\n                if (script[0][0] === 'procDef') {\n                    let pre = '';\n                    for (let i = types.length; i--;) {\n                        if (used[i]) {\n                            const t = types[i];\n                            if (t === '%d' || t === '%n' || t === '%c') {\n                                pre += 'C.numargs[' + i + '] = +C.args[' + i + '] || 0;\\n';\n                            }\n                            else if (t === '%b') {\n                                pre += 'C.boolargs[' + i + '] = bool(C.args[' + i + ']);\\n';\n                            }\n                        }\n                    }\n                    source = pre + source;\n                    for (let i = 1, l = fns.length; i < l; ++i) {\n                        fns[i] += pre.length;\n                    }\n                    source += 'endCall();\\n';\n                    source += 'return;\\n';\n                }\n                for (let i = 0; i < fns.length; i++) {\n                    object.fns.push(P.runtime.createContinuation(source.slice(fns[i])));\n                }\n                var f = object.fns[startfn];\n                if (script[0][0] === 'whenClicked') {\n                    object.listeners.whenClicked.push(f);\n                }\n                else if (script[0][0] === 'whenGreenFlag') {\n                    object.listeners.whenGreenFlag.push(f);\n                }\n                else if (script[0][0] === 'whenCloned') {\n                    object.listeners.whenCloned.push(f);\n                }\n                else if (script[0][0] === 'whenIReceive') {\n                    var key = script[0][1].toLowerCase();\n                    (object.listeners.whenIReceive[key] || (object.listeners.whenIReceive[key] = [])).push(f);\n                }\n                else if (script[0][0] === 'whenKeyPressed') {\n                    const key = P.runtime.getKeyCode(script[0][1]);\n                    object.addWhenKeyPressedHandler(key, f);\n                }\n                else if (script[0][0] === 'whenSceneStarts') {\n                    var key = script[0][1].toLowerCase();\n                    (object.listeners.whenSceneStarts[key] || (object.listeners.whenSceneStarts[key] = [])).push(f);\n                }\n                else if (script[0][0] === 'procDef') {\n                    const warp = script[0][4];\n                    const name = script[0][1];\n                    if (!object.procedures[name]) {\n                        object.procedures[name] = new Scratch2Procedure(f, warp, inputs);\n                    }\n                    else {\n                        warn('procedure already exists: ' + name);\n                    }\n                }\n                else {\n                    warn('Undefined event: ' + script[0][0]);\n                }\n                if (P.config.debug) {\n                    var variant = script[0][0];\n                    if (variant === 'procDef') {\n                        variant += ':' + script[0][1];\n                    }\n                    console.log('compiled sb2 script', variant, source);\n                }\n            };\n            function compile(stage) {\n                warnings = Object.create(null);\n                compileScripts(stage);\n                for (var i = 0; i < stage.children.length; i++) {\n                    compileScripts(stage.children[i]);\n                }\n                for (var key in warnings) {\n                    console.warn(key + (warnings[key] > 1 ? ' (repeated ' + warnings[key] + ' times)' : ''));\n                }\n            }\n            compiler.compile = compile;\n        })(compiler = sb2.compiler || (sb2.compiler = {}));\n    })(sb2 = P.sb2 || (P.sb2 = {}));\n})(P || (P = {}));\nvar P;\n(function (P) {\n    var sb3;\n    (function (sb3) {\n        sb3.ASSETS_API = 'https://assets.scratch.mit.edu/internalapi/asset/$md5ext/get/';\n        class Scratch3Stage extends P.core.Stage {\n            constructor() {\n                super(...arguments);\n                this.listIds = {};\n                this.varIds = {};\n            }\n        }\n        sb3.Scratch3Stage = Scratch3Stage;\n        class Scratch3Sprite extends P.core.Sprite {\n            constructor() {\n                super(...arguments);\n                this.listIds = {};\n                this.varIds = {};\n            }\n            _clone() {\n                return new Scratch3Sprite(this.stage);\n            }\n        }\n        sb3.Scratch3Sprite = Scratch3Sprite;\n        class Scratch3VariableWatcher extends P.core.Watcher {\n            constructor(stage, data) {\n                super(stage, data.spriteName || '');\n                this.id = data.id;\n                this.opcode = data.opcode;\n                this.mode = data.mode;\n                this.params = data.params;\n                this.libraryEntry = P.sb3.compiler.watcherLibrary[this.opcode];\n                this.x = data.x;\n                this.y = data.y;\n                this.visible = typeof data.visible === 'boolean' ? data.visible : true;\n                this.sliderMin = data.sliderMin || 0;\n                this.sliderMax = data.sliderMax || 0;\n                if (typeof data.isDiscrete !== 'undefined') {\n                    this.sliderStep = data.isDiscrete ? 1 : 0.01;\n                }\n                else {\n                    this.sliderStep = 1;\n                }\n                if (!this.libraryEntry) {\n                    console.warn('unknown watcher', this.opcode, this);\n                    this.valid = false;\n                }\n            }\n            update() {\n                if (this.visible) {\n                    const value = this.getValue();\n                    if (this.valueEl.textContent !== value) {\n                        this.valueEl.textContent = value;\n                    }\n                    if (this.sliderInput) {\n                        this.sliderInput.value = value;\n                    }\n                }\n            }\n            init() {\n                super.init();\n                if (this.libraryEntry.init) {\n                    this.libraryEntry.init(this);\n                }\n                this.updateLayout();\n            }\n            setVisible(visible) {\n                super.setVisible(visible);\n                this.updateLayout();\n            }\n            getLabel() {\n                const label = this.libraryEntry.getLabel(this);\n                if (!this.target.isStage) {\n                    return this.targetName + ': ' + label;\n                }\n                return label;\n            }\n            getValue() {\n                const value = this.libraryEntry.evaluate(this);\n                if (typeof value === 'number') {\n                    return '' + (Math.round(value * 1e6) / 1e6);\n                }\n                return '' + value;\n            }\n            setValue(value) {\n                if (this.libraryEntry.set) {\n                    this.libraryEntry.set(this, value);\n                    this.update();\n                }\n            }\n            updateLayout() {\n                if (this.containerEl) {\n                    this.containerEl.style.display = this.visible ? 'flex' : 'none';\n                    return;\n                }\n                if (!this.visible) {\n                    return;\n                }\n                const container = document.createElement('div');\n                container.classList.add('s3-watcher-container');\n                container.dataset.opcode = this.opcode;\n                container.style.top = (this.y / 10) + 'em';\n                container.style.left = (this.x / 10) + 'em';\n                container.onmousedown = (e) => e.stopPropagation();\n                container.ontouchstart = (e) => e.stopPropagation();\n                const value = document.createElement('div');\n                value.classList.add('s3-watcher-value');\n                value.textContent = this.getValue();\n                this.containerEl = container;\n                this.valueEl = value;\n                this.stage.ui.appendChild(container);\n                const mode = this.mode;\n                if (mode === 'large') {\n                    container.classList.add('s3-watcher-large');\n                    container.appendChild(value);\n                }\n                else {\n                    const row = document.createElement('div');\n                    row.classList.add('s3-watcher-row');\n                    row.classList.add('s3-watcher-row-normal');\n                    const label = document.createElement('div');\n                    label.classList.add('s3-watcher-label');\n                    label.textContent = this.getLabel();\n                    row.appendChild(label);\n                    row.appendChild(value);\n                    container.classList.add('s3-watcher-container-normal');\n                    container.appendChild(row);\n                    if (mode === 'slider') {\n                        const slider = document.createElement('div');\n                        slider.classList.add('s3-watcher-row-slider');\n                        const input = document.createElement('input');\n                        input.type = 'range';\n                        input.min = '' + this.sliderMin;\n                        input.max = '' + this.sliderMax;\n                        input.step = '' + this.sliderStep;\n                        input.value = this.getValue();\n                        input.addEventListener('input', this.sliderChanged.bind(this));\n                        this.sliderInput = input;\n                        slider.appendChild(input);\n                        container.appendChild(slider);\n                    }\n                }\n            }\n            sliderChanged(e) {\n                const value = +e.target.value;\n                this.setValue(value);\n            }\n        }\n        sb3.Scratch3VariableWatcher = Scratch3VariableWatcher;\n        class ListWatcherRow {\n            constructor() {\n                this.value = '';\n                this.index = -1;\n                this.y = 0;\n                this.visible = true;\n                this.element = document.createElement('div');\n                this.indexEl = document.createElement('div');\n                this.valueEl = document.createElement('div');\n                this.element.className = 's3-list-row';\n                this.indexEl.className = 's3-list-index';\n                this.valueEl.className = 's3-list-value';\n                this.element.appendChild(this.indexEl);\n                this.element.appendChild(this.valueEl);\n            }\n            setValue(value) {\n                if (value !== this.value) {\n                    this.value = value;\n                    this.valueEl.textContent = value;\n                }\n            }\n            setIndex(index) {\n                if (index !== this.index) {\n                    this.index = index;\n                    this.indexEl.textContent = (index + 1).toString();\n                }\n            }\n            setY(y) {\n                if (y !== this.y) {\n                    this.y = y;\n                    this.element.style.transform = 'translateY(' + y + 'px)';\n                }\n            }\n            setVisible(visible) {\n                if (this.visible !== visible) {\n                    this.visible = visible;\n                    this.element.style.display = visible ? '' : 'none';\n                }\n            }\n        }\n        sb3.ListWatcherRow = ListWatcherRow;\n        class Scratch3ListWatcher extends P.core.Watcher {\n            constructor(stage, data) {\n                super(stage, data.spriteName || '');\n                this.rows = [];\n                this.firstUpdateComplete = false;\n                this._rowHeight = -1;\n                this.scrollTop = 0;\n                this.lastZoomLevel = 1;\n                this.scrollAhead = 8;\n                this.scrollBack = 3;\n                this.scrollDirection = 1;\n                this._contentHeight = -1;\n                this.id = data.id;\n                this.params = data.params;\n                this.x = data.x;\n                this.y = data.y;\n                this.visible = typeof data.visible === 'boolean' ? data.visible : true;\n                this.width = data.width || 100;\n                this.height = data.height || 200;\n            }\n            shouldUpdate() {\n                if (!this.visible)\n                    return false;\n                if (this.lastZoomLevel !== this.stage.zoom)\n                    return true;\n                if (!this.firstUpdateComplete)\n                    return true;\n                return this.list.modified;\n            }\n            update() {\n                if (!this.shouldUpdate()) {\n                    return;\n                }\n                if (this.lastZoomLevel !== this.stage.zoom) {\n                    this.contentEl.scrollTop *= this.stage.zoom / this.lastZoomLevel;\n                }\n                this.list.modified = false;\n                this.lastZoomLevel = this.stage.zoom;\n                this.firstUpdateComplete = true;\n                this.updateList();\n                const bottomLabelText = this.getBottomLabel();\n                if (this.bottomLabelEl.textContent !== bottomLabelText) {\n                    this.bottomLabelEl.textContent = this.getBottomLabel();\n                }\n            }\n            updateList() {\n                if (!this.visible && this._rowHeight === -1) {\n                    return;\n                }\n                const height = this.list.length * this.getRowHeight() * this.stage.zoom;\n                this.endpointEl.style.transform = 'translateY(' + height + 'px)';\n                const topVisible = this.scrollTop;\n                const bottomVisible = topVisible + this.getContentHeight();\n                let startingIndex = Math.floor(topVisible / this.getRowHeight());\n                let endingIndex = Math.ceil(bottomVisible / this.getRowHeight());\n                if (this.scrollDirection === 1) {\n                    startingIndex -= this.scrollBack;\n                    endingIndex += this.scrollAhead;\n                }\n                else {\n                    startingIndex -= this.scrollAhead;\n                    endingIndex += this.scrollBack;\n                }\n                if (startingIndex < 0)\n                    startingIndex = 0;\n                if (endingIndex > this.list.length - 1)\n                    endingIndex = this.list.length - 1;\n                if (endingIndex - startingIndex > 50) {\n                    endingIndex = startingIndex + 50;\n                }\n                const visibleRows = endingIndex - startingIndex;\n                while (this.rows.length <= visibleRows) {\n                    this.addRow();\n                }\n                for (var listIndex = startingIndex, rowIndex = 0; listIndex <= endingIndex; listIndex++, rowIndex++) {\n                    let row = this.rows[rowIndex];\n                    row.setIndex(listIndex);\n                    row.setValue(this.list[listIndex]);\n                    row.setY(listIndex * this._rowHeight * this.stage.zoom);\n                    row.setVisible(true);\n                }\n                while (rowIndex < this.rows.length) {\n                    this.rows[rowIndex].setVisible(false);\n                    rowIndex++;\n                }\n            }\n            init() {\n                super.init();\n                const target = this.target;\n                const listId = this.id;\n                const listName = target.listIds[listId];\n                if (!(listName in this.target.lists)) {\n                    this.target.lists[listName] = createList();\n                }\n                this.list = this.target.lists[listName];\n                this.target.listWatchers[listName] = this;\n                if (this.visible) {\n                    this.updateLayout();\n                }\n            }\n            getTopLabel() {\n                if (this.target.isStage) {\n                    return this.params.LIST;\n                }\n                return this.target.name + ': ' + this.params.LIST;\n            }\n            getBottomLabel() {\n                return 'length ' + this.list.length;\n            }\n            getContentHeight() {\n                if (this._contentHeight === -1) {\n                    this._contentHeight = this.contentEl.offsetHeight;\n                }\n                return this._contentHeight;\n            }\n            getRowHeight() {\n                if (this._rowHeight === -1) {\n                    const PADDING = 2;\n                    if (this.rows.length === 0) {\n                        this.addRow();\n                    }\n                    const height = this.rows[0].element.offsetHeight / this.stage.zoom;\n                    if (height === 0) {\n                        return 0;\n                    }\n                    this._rowHeight = height + PADDING;\n                }\n                return this._rowHeight;\n            }\n            addRow() {\n                const row = new ListWatcherRow();\n                this.rows.push(row);\n                this.contentEl.appendChild(row.element);\n                return row;\n            }\n            updateLayout() {\n                if (!this.containerEl) {\n                    if (!this.visible) {\n                        return;\n                    }\n                    this.createLayout();\n                }\n                this.containerEl.style.display = this.visible ? '' : 'none';\n            }\n            setVisible(visible) {\n                super.setVisible(visible);\n                this.updateLayout();\n            }\n            createLayout() {\n                this.containerEl = document.createElement('div');\n                this.topLabelEl = document.createElement('div');\n                this.bottomLabelEl = document.createElement('div');\n                this.middleContainerEl = document.createElement('div');\n                this.contentEl = document.createElement('div');\n                this.containerEl.style.top = (this.y / 10) + 'em';\n                this.containerEl.style.left = (this.x / 10) + 'em';\n                this.containerEl.style.height = (this.height / 10) + 'em';\n                this.containerEl.style.width = (this.width / 10) + 'em';\n                this.containerEl.classList.add('s3-list-container');\n                this.containerEl.onmousedown = (e) => e.stopPropagation();\n                this.containerEl.ontouchstart = (e) => e.stopPropagation();\n                this.topLabelEl.textContent = this.getTopLabel();\n                this.topLabelEl.classList.add('s3-list-top-label');\n                this.bottomLabelEl.textContent = this.getBottomLabel();\n                this.bottomLabelEl.classList.add('s3-list-bottom-label');\n                this.middleContainerEl.classList.add('s3-list-content');\n                this.contentEl.classList.add('s3-list-rows');\n                this.contentEl.addEventListener('scroll', (e) => {\n                    const scrollTop = this.contentEl.scrollTop / this.stage.zoom;\n                    const scrollChange = this.scrollTop - scrollTop;\n                    if (scrollChange < 0) {\n                        this.scrollDirection = 1;\n                    }\n                    else if (scrollChange > 0) {\n                        this.scrollDirection = 0;\n                    }\n                    this.scrollTop = scrollTop;\n                    this.updateList();\n                });\n                this.endpointEl = document.createElement('div');\n                this.endpointEl.className = 's3-list-endpoint';\n                this.contentEl.appendChild(this.endpointEl);\n                this.middleContainerEl.appendChild(this.contentEl);\n                this.containerEl.appendChild(this.topLabelEl);\n                this.containerEl.appendChild(this.middleContainerEl);\n                this.containerEl.appendChild(this.bottomLabelEl);\n                this.stage.ui.appendChild(this.containerEl);\n            }\n        }\n        sb3.Scratch3ListWatcher = Scratch3ListWatcher;\n        class Scratch3Procedure extends P.core.Procedure {\n            call(inputs) {\n                const args = {};\n                for (var i = 0; i < this.inputs.length; i++) {\n                    args[this.inputs[i]] = inputs[i];\n                }\n                return args;\n            }\n        }\n        sb3.Scratch3Procedure = Scratch3Procedure;\n        function createList() {\n            const list = [];\n            list.modified = false;\n            list.toString = function () {\n                var i = this.length;\n                while (i--) {\n                    if (('' + this[i]).length !== 1) {\n                        return this.join(' ');\n                    }\n                }\n                return this.join('');\n            };\n            return list;\n        }\n        sb3.createList = createList;\n        const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n        function fixSVGNamespace(svg) {\n            const newDocument = document.implementation.createHTMLDocument();\n            const newSVG = newDocument.createElementNS(SVG_NAMESPACE, 'svg');\n            for (const attribute of svg.attributes) {\n                newSVG.setAttribute(attribute.name, attribute.value);\n            }\n            newSVG.innerHTML = svg.innerHTML;\n            return newSVG;\n        }\n        function patchSVG(svg, costumeOptions) {\n            const invalidNamespace = svg.namespaceURI !== SVG_NAMESPACE;\n            if (invalidNamespace) {\n                svg = fixSVGNamespace(svg);\n                if (svg.firstElementChild && svg.firstElementChild.tagName !== 'g') {\n                    const width = svg.width.baseVal;\n                    const height = svg.height.baseVal;\n                    if (width.unitType !== width.SVG_LENGTHTYPE_PERCENTAGE && height.unitType !== width.SVG_LENGTHTYPE_PERCENTAGE) {\n                        const group = document.createElementNS(SVG_NAMESPACE, 'g');\n                        const transform = svg.createSVGTransform();\n                        for (const el of svg.children) {\n                            group.appendChild(el);\n                        }\n                        transform.setTranslate(-width.value / 2, height.value / 2);\n                        group.transform.baseVal.appendItem(transform);\n                        costumeOptions.rotationCenterX -= width.value / 2;\n                        costumeOptions.rotationCenterY += height.value / 2;\n                        svg.appendChild(group);\n                    }\n                }\n            }\n            if (svg.hasAttribute('viewBox')) {\n                const viewBox = svg.getAttribute('viewBox').split(/ |,/).map((i) => +i);\n                if (viewBox.every((i) => !isNaN(i)) && viewBox.length === 4) {\n                    const [x, y, w, h] = viewBox;\n                    const width = Math.max(1, w + x);\n                    const height = Math.max(1, h + y);\n                    svg.setAttribute('width', width.toString());\n                    svg.setAttribute('height', height.toString());\n                }\n                else {\n                    console.warn('weird viewBox', svg.getAttribute('viewBox'));\n                }\n                svg.removeAttribute('viewBox');\n            }\n            const textElements = svg.querySelectorAll('text');\n            const usedFonts = [];\n            const addFont = (font) => {\n                if (usedFonts.indexOf(font) === -1) {\n                    usedFonts.push(font);\n                }\n            };\n            for (var i = 0; i < textElements.length; i++) {\n                const el = textElements[i];\n                let fonts = (el.getAttribute('font-family') || '')\n                    .split(',')\n                    .map((i) => i.trim());\n                let found = false;\n                for (const family of fonts) {\n                    if (P.fonts.scratch3[family]) {\n                        found = true;\n                        addFont(family);\n                        break;\n                    }\n                    else if (family === 'sans-serif') {\n                        found = true;\n                        break;\n                    }\n                }\n                if (!found) {\n                    console.warn('unknown fonts', fonts);\n                    const font = 'Sans Serif';\n                    addFont(font);\n                    el.setAttribute('font-family', font);\n                }\n            }\n            P.fonts.addFontRules(svg, usedFonts);\n            let style = document.createElement(\"style\");\n            let css = \"image { image-rendering: pixelated; }\";\n            style.appendChild(document.createTextNode(css));\n            svg.appendChild(style);\n            return svg;\n        }\n        class BaseSB3Loader extends P.io.Loader {\n            constructor() {\n                super(...arguments);\n                this.needsMusic = false;\n            }\n            getSVG(path, costumeOptions) {\n                return this.getAsText(path)\n                    .then((source) => {\n                    const parser = new DOMParser();\n                    const doc = parser.parseFromString(source, 'image/svg+xml');\n                    const svg = patchSVG(doc.documentElement, costumeOptions);\n                    return new Promise((resolve, reject) => {\n                        const image = new Image();\n                        image.onload = (e) => {\n                            resolve(image);\n                        };\n                        image.onerror = (e) => {\n                            reject(new Error('Failed to load SVG: ' + path));\n                        };\n                        image.src = 'data:image/svg+xml,' + encodeURIComponent(new XMLSerializer().serializeToString(svg));\n                    });\n                });\n            }\n            getBitmapImage(path, format) {\n                return this.getAsImage(path, format);\n            }\n            loadCostume(data, index) {\n                const path = data.assetId + '.' + data.dataFormat;\n                const costumeOptions = {\n                    name: data.name,\n                    bitmapResolution: data.bitmapResolution || 1,\n                    rotationCenterX: data.rotationCenterX,\n                    rotationCenterY: data.rotationCenterY,\n                };\n                if (data.dataFormat === 'svg') {\n                    return this.getSVG(path, costumeOptions)\n                        .then((svg) => new P.core.VectorCostume(svg, costumeOptions));\n                }\n                else {\n                    return this.getBitmapImage(path, data.dataFormat)\n                        .then((image) => new P.core.BitmapCostume(image, costumeOptions));\n                }\n            }\n            getAudioBuffer(path) {\n                return this.getAsArrayBuffer(path)\n                    .then((buffer) => P.audio.decodeAudio(buffer))\n                    .catch((err) => {\n                    throw new Error(`Could not load audio: ${path} (${err})`);\n                });\n            }\n            loadSound(data) {\n                return new Promise((resolve, reject) => {\n                    this.getAudioBuffer(data.md5ext)\n                        .then((buffer) => {\n                        resolve(new P.core.Sound({\n                            name: data.name,\n                            buffer,\n                        }));\n                    })\n                        .catch((err) => {\n                        console.warn('Could not load sound: ' + err);\n                        resolve(null);\n                    });\n                });\n            }\n            loadWatcher(data, stage) {\n                if (data.mode === 'list') {\n                    return new Scratch3ListWatcher(stage, data);\n                }\n                return new Scratch3VariableWatcher(stage, data);\n            }\n            loadTarget(data) {\n                const target = new (data.isStage ? Scratch3Stage : Scratch3Sprite)(null);\n                for (const id of Object.keys(data.variables)) {\n                    const variable = data.variables[id];\n                    const name = variable[0];\n                    const value = variable[1];\n                    if (variable.length > 2) {\n                        const cloud = variable[2];\n                        if (cloud) {\n                            if (data.isStage) {\n                                target.cloudVariables.push(name);\n                            }\n                            else {\n                                console.warn('Cloud variable found on a non-stage object. Skipping.');\n                            }\n                        }\n                    }\n                    target.vars[name] = value;\n                    target.varIds[id] = name;\n                }\n                for (const id of Object.keys(data.lists)) {\n                    const list = data.lists[id];\n                    const name = list[0];\n                    const content = list[1];\n                    if (target.lists[name]) {\n                        continue;\n                    }\n                    const scratchList = createList();\n                    for (var i = 0; i < content.length; i++) {\n                        scratchList[i] = content[i];\n                    }\n                    target.lists[name] = scratchList;\n                    target.listIds[id] = name;\n                }\n                target.name = data.name;\n                target.currentCostumeIndex = data.currentCostume;\n                if ('volume' in data) {\n                    target.volume = data.volume / 100;\n                }\n                target.sb3data = data;\n                if (target.isStage) {\n                }\n                else {\n                    const sprite = target;\n                    sprite.scratchX = data.x;\n                    sprite.scratchY = data.y;\n                    sprite.visible = data.visible;\n                    sprite.direction = data.direction;\n                    sprite.scale = data.size / 100;\n                    sprite.isDraggable = data.draggable;\n                    sprite.rotationStyle = P.utils.parseRotationStyle(data.rotationStyle);\n                }\n                const costumesPromise = Promise.all(data.costumes.map((c, i) => this.loadCostume(c, i)));\n                const soundsPromise = Promise.all(data.sounds.map((c) => this.loadSound(c)));\n                return Promise.all([costumesPromise, soundsPromise])\n                    .then((result) => {\n                    const costumes = result[0];\n                    const sounds = result[1];\n                    target.costumes = costumes;\n                    sounds.forEach((sound) => sound && target.addSound(sound));\n                    return target;\n                });\n            }\n            loadRequiredAssets() {\n                return Promise.all([\n                    this.loadFonts(),\n                ]);\n            }\n            loadSoundbank() {\n                return P.audio.loadSoundbankSB2(this);\n            }\n            loadFonts() {\n                const promises = [];\n                for (const family in P.fonts.scratch3) {\n                    const promise = P.utils.settled(P.fonts.loadLocalFont(family, P.fonts.scratch3[family]));\n                    promises.push(promise);\n                    this.addTask(new P.io.PromiseTask(promise));\n                }\n                return Promise.all(promises);\n            }\n            compileTargets(targets, stage) {\n                if (P.config.debug) {\n                    console.time('Scratch 3 compile');\n                }\n                for (const target of targets) {\n                    const compiler = new P.sb3.compiler.Compiler(target);\n                    compiler.compile();\n                    if (compiler.needsMusic) {\n                        this.needsMusic = true;\n                    }\n                }\n                if (P.config.debug) {\n                    console.timeEnd('Scratch 3 compile');\n                }\n            }\n            async load() {\n                if (!this.projectData) {\n                    throw new Error('Project data is missing or invalid');\n                }\n                if (!Array.isArray(this.projectData.targets)) {\n                    throw new Error('Invalid project data: missing targets');\n                }\n                await this.loadRequiredAssets();\n                this.resetTasks();\n                const targets = await Promise.all(this.projectData.targets\n                    .sort((a, b) => a.layerOrder - b.layerOrder)\n                    .map((data) => this.loadTarget(data)));\n                if (this.aborted) {\n                    throw new Error('Loading aborting.');\n                }\n                const stage = targets.filter((i) => i.isStage)[0];\n                if (!stage) {\n                    throw new Error('Project does not have a Stage');\n                }\n                const sprites = targets.filter((i) => i.isSprite);\n                sprites.forEach((sprite) => sprite.stage = stage);\n                stage.children = sprites;\n                if (this.projectData.monitors) {\n                    stage.allWatchers = this.projectData.monitors\n                        .map((data) => this.loadWatcher(data, stage))\n                        .filter((i) => i && i.valid);\n                    stage.allWatchers.forEach((watcher) => watcher.init());\n                }\n                this.compileTargets(targets, stage);\n                if (this.needsMusic) {\n                    await this.loadSoundbank();\n                }\n                this.projectData = null;\n                return stage;\n            }\n        }\n        sb3.BaseSB3Loader = BaseSB3Loader;\n        class SB3FileLoader extends BaseSB3Loader {\n            constructor(buffer) {\n                super();\n                this.buffer = buffer;\n            }\n            getAsText(path) {\n                const task = this.addTask(new P.io.Manual());\n                const file = this.zip.file(path);\n                if (!file) {\n                    throw new Error('cannot find file as text: ' + path);\n                }\n                return file.async('text')\n                    .then((response) => {\n                    task.markComplete();\n                    return response;\n                });\n            }\n            getAsArrayBuffer(path) {\n                const task = this.addTask(new P.io.Manual());\n                const file = this.zip.file(path);\n                if (!file) {\n                    throw new Error('cannot find file as arraybuffer: ' + path);\n                }\n                return file.async('arraybuffer')\n                    .then((response) => {\n                    task.markComplete();\n                    return response;\n                });\n            }\n            getAsBase64(path) {\n                const task = this.addTask(new P.io.Manual());\n                const file = this.zip.file(path);\n                if (!file) {\n                    throw new Error('cannot find file as base64: ' + path);\n                }\n                return file.async('base64')\n                    .then((response) => {\n                    task.markComplete();\n                    return response;\n                });\n            }\n            getAsImage(path, format) {\n                const task = this.addTask(new P.io.Manual());\n                return this.getAsBase64(path)\n                    .then((imageData) => {\n                    return new Promise((resolve, reject) => {\n                        const image = new Image();\n                        image.onload = () => {\n                            task.markComplete();\n                            resolve(image);\n                        };\n                        image.onerror = (error) => {\n                            reject(new Error('Failed to load image: ' + path + '.' + format));\n                        };\n                        image.src = 'data:image/' + format + ';base64,' + imageData;\n                    });\n                });\n            }\n            load() {\n                return JSZip.loadAsync(this.buffer)\n                    .then((data) => {\n                    this.zip = data;\n                    return this.getAsText('project.json');\n                })\n                    .then((project) => {\n                    this.projectData = JSON.parse(project);\n                })\n                    .then(() => super.load());\n            }\n        }\n        sb3.SB3FileLoader = SB3FileLoader;\n        class Scratch3Loader extends BaseSB3Loader {\n            constructor(idOrData) {\n                super();\n                if (typeof idOrData === 'object') {\n                    this.projectData = idOrData;\n                    this.projectId = null;\n                }\n                else {\n                    this.projectId = idOrData;\n                }\n            }\n            getAsText(path) {\n                return this.addTask(new P.io.Request(sb3.ASSETS_API.replace('$md5ext', path))).load('text');\n            }\n            getAsArrayBuffer(path) {\n                return this.addTask(new P.io.Request(sb3.ASSETS_API.replace('$md5ext', path))).load('arraybuffer');\n            }\n            getAsImage(path) {\n                return this.addTask(new P.io.Img(sb3.ASSETS_API.replace('$md5ext', path))).load();\n            }\n            load() {\n                if (this.projectId) {\n                    return this.addTask(new P.io.Request(P.config.PROJECT_API.replace('$id', '' + this.projectId))).load('json')\n                        .then((data) => {\n                        this.projectData = data;\n                        return super.load();\n                    });\n                }\n                else {\n                    return super.load();\n                }\n            }\n        }\n        sb3.Scratch3Loader = Scratch3Loader;\n    })(sb3 = P.sb3 || (P.sb3 = {}));\n})(P || (P = {}));\n(function (P) {\n    var sb3;\n    (function (sb3) {\n        var compiler;\n        (function (compiler_1) {\n            function assertNever(i) {\n                throw new Error('Compile-time assertNever failed.');\n            }\n            class CompiledInput {\n                constructor(source, type) {\n                    this.source = source;\n                    this.type = type;\n                    this.potentialNumber = true;\n                    this.flags = 0;\n                }\n                enableFlag(flag) {\n                    this.flags |= flag;\n                }\n                hasFlag(flag) {\n                    return (this.flags & flag) !== 0;\n                }\n                toString() {\n                    return this.source;\n                }\n            }\n            compiler_1.CompiledInput = CompiledInput;\n            const stringInput = (v) => new CompiledInput(v, 'string');\n            const numberInput = (v) => new CompiledInput(v, 'number');\n            const booleanInput = (v) => new CompiledInput(v, 'boolean');\n            const anyInput = (v) => new CompiledInput(v, 'any');\n            ;\n            class BlockUtil {\n                constructor(compiler, block) {\n                    this.compiler = compiler;\n                    this.block = block;\n                }\n                get target() {\n                    return this.compiler.target;\n                }\n                get stage() {\n                    return this.compiler.target.stage;\n                }\n                getInput(name, type) {\n                    return this.compiler.compileInput(this.block, name, type);\n                }\n                getField(name) {\n                    return this.compiler.getField(this.block, name);\n                }\n                fieldInput(name) {\n                    return this.sanitizedInput(this.getField(name));\n                }\n                sanitizedInput(string) {\n                    return this.compiler.sanitizedInput(string);\n                }\n                sanitizedString(string) {\n                    return this.compiler.sanitizedString(string);\n                }\n                getVariableReference(field) {\n                    return this.compiler.getVariableReference(this.compiler.getVariableField(this.block, field));\n                }\n                getListReference(field) {\n                    return this.compiler.getListReference(this.compiler.getVariableField(this.block, field));\n                }\n                getVariableScope(field) {\n                    return this.compiler.findVariable(this.compiler.getVariableField(this.block, field)).scope;\n                }\n                isCloudVariable(field) {\n                    return this.target.stage.cloudVariables.indexOf(this.getField(field)) > -1;\n                }\n                getListScope(field) {\n                    return this.compiler.findList(this.compiler.getVariableField(this.block, field)).scope;\n                }\n                asType(input, type) {\n                    return this.compiler.asType(input, type);\n                }\n                evaluateInputOnce(input) {\n                    const fn = P.runtime.scopedEval(`(function() { return ${input}; })`);\n                    return this.target.stage.runtime.evaluateExpression(this.target, fn);\n                }\n            }\n            compiler_1.BlockUtil = BlockUtil;\n            class StatementUtil extends BlockUtil {\n                constructor() {\n                    super(...arguments);\n                    this.content = '';\n                    this.substacksQueue = false;\n                }\n                getSubstack(name) {\n                    const labelsBefore = this.compiler.labelCount;\n                    const substack = this.compiler.compileSubstackInput(this.block, name);\n                    if (this.compiler.labelCount !== labelsBefore) {\n                        this.substacksQueue = true;\n                    }\n                    return substack;\n                }\n                claimNextLabel() {\n                    return this.compiler.labelCount++;\n                }\n                addLabel(label) {\n                    if (!label) {\n                        label = this.claimNextLabel();\n                    }\n                    this.write(`{{${label}}}`);\n                    return label;\n                }\n                queue(label) {\n                    this.writeLn(`queue(${label}); return;`);\n                }\n                forceQueue(label) {\n                    this.writeLn(`forceQueue(${label}); return;`);\n                }\n                visual(variant) {\n                    switch (variant) {\n                        case 'drawing':\n                            this.writeLn('if (S.visible || S.isPenDown) VISUAL = true;');\n                            break;\n                        case 'visible':\n                            this.writeLn('if (S.visible) VISUAL = true;');\n                            break;\n                        case 'always':\n                            this.writeLn('VISUAL = true;');\n                            break;\n                        default: assertNever(variant);\n                    }\n                }\n                updateBubble() {\n                    this.writeLn('if (S.saying) S.updateBubble()');\n                }\n                waitUntilSettles(source) {\n                    this.writeLn('save();');\n                    this.writeLn('R.resume = false;');\n                    this.writeLn('var localR = R;');\n                    this.writeLn(`${source}`);\n                    this.writeLn('  .then(function() { localR.resume = true; })');\n                    this.writeLn('  .catch(function() { localR.resume = true; });');\n                    const label = this.addLabel();\n                    this.writeLn('if (!R.resume) {');\n                    this.forceQueue(label);\n                    this.writeLn('}');\n                    this.writeLn('restore();');\n                }\n                waitOneTick() {\n                    this.writeLn('save();');\n                    this.writeLn('R.start = runtime.currentMSecs;');\n                    const label = this.addLabel();\n                    this.writeLn('if (runtime.currentMSecs === R.start) {');\n                    this.forceQueue(label);\n                    this.writeLn('}');\n                    this.writeLn('restore();');\n                }\n                write(content) {\n                    this.content += content;\n                }\n                writeLn(content) {\n                    this.content += content + '\\n';\n                }\n            }\n            compiler_1.StatementUtil = StatementUtil;\n            class InputUtil extends BlockUtil {\n                numberInput(v) { return numberInput(v); }\n                stringInput(v) { return stringInput(v); }\n                booleanInput(v) { return booleanInput(v); }\n                anyInput(v) { return anyInput(v); }\n            }\n            compiler_1.InputUtil = InputUtil;\n            class HatUtil extends BlockUtil {\n                constructor(compiler, block, startingFunction) {\n                    super(compiler, block);\n                    this.startingFunction = startingFunction;\n                }\n            }\n            compiler_1.HatUtil = HatUtil;\n            compiler_1.statementLibrary = Object.create(null);\n            compiler_1.inputLibrary = Object.create(null);\n            compiler_1.hatLibrary = Object.create(null);\n            compiler_1.watcherLibrary = Object.create(null);\n            const safeNumberToString = (n) => {\n                if (Object.is(n, -0)) {\n                    return '-0';\n                }\n                return n.toString();\n            };\n            class Compiler {\n                constructor(target) {\n                    this.labelCount = 0;\n                    this.needsMusic = false;\n                    this.costumeAndSoundNames = new Set();\n                    this.target = target;\n                    this.data = target.sb3data;\n                    this.blocks = this.data.blocks;\n                    for (const costume of target.costumes) {\n                        this.costumeAndSoundNames.add(costume.name);\n                    }\n                    for (const sound of target.sounds) {\n                        this.costumeAndSoundNames.add(sound.name);\n                    }\n                }\n                getHatBlocks() {\n                    return Object.keys(this.blocks)\n                        .filter((i) => this.blocks[i].topLevel);\n                }\n                getStatementCompiler(opcode) {\n                    if (compiler_1.statementLibrary[opcode]) {\n                        return compiler_1.statementLibrary[opcode];\n                    }\n                    return null;\n                }\n                getInputCompiler(opcode) {\n                    if (compiler_1.inputLibrary[opcode]) {\n                        return compiler_1.inputLibrary[opcode];\n                    }\n                    return null;\n                }\n                getHatCompiler(opcode) {\n                    if (compiler_1.hatLibrary[opcode]) {\n                        return compiler_1.hatLibrary[opcode];\n                    }\n                    return null;\n                }\n                getInputFallback(type) {\n                    switch (type) {\n                        case 'number': return '0';\n                        case 'boolean': return 'false';\n                        case 'string': return '\"\"';\n                        case 'any': return '\"\"';\n                        case 'list': return '\"\"';\n                        case 'color': return '0';\n                    }\n                    assertNever(type);\n                }\n                asType(input, type) {\n                    switch (type) {\n                        case 'string': return '(\"\" + ' + input + ')';\n                        case 'number': return '(+' + input + ' || 0)';\n                        case 'boolean': return 'bool(' + input + ')';\n                        case 'any': return input;\n                        case 'list': throw new Error(\"Converting to 'list' type is not something you're supposed to do\");\n                        case 'color': return 'parseColor(' + input + ')';\n                    }\n                    assertNever(type);\n                }\n                convertInputType(input, type) {\n                    if (input.type === type) {\n                        if (type === 'number' && input.hasFlag(1)) {\n                            return new CompiledInput('(' + input.source + ' || 0)', type);\n                        }\n                        return input;\n                    }\n                    if (type === 'any') {\n                        if (input.type === 'list') {\n                            type = 'string';\n                        }\n                        else {\n                            return input;\n                        }\n                    }\n                    return new CompiledInput(this.asType(input.source, type), type);\n                }\n                sanitizedInput(string) {\n                    return stringInput(this.sanitizedString(string));\n                }\n                sanitizedString(string) {\n                    string = string\n                        .replace(/\\\\/g, '\\\\\\\\')\n                        .replace(/'/g, '\\\\\\'')\n                        .replace(/\"/g, '\\\\\"')\n                        .replace(/\\n/g, '\\\\n')\n                        .replace(/\\r/g, '\\\\r')\n                        .replace(/\\{/g, '\\\\x7b')\n                        .replace(/\\}/g, '\\\\x7d');\n                    return `\"${string}\"`;\n                }\n                sanitizedComment(content) {\n                    content = content\n                        .replace(/\\*\\//g, '');\n                    return `/* ${content} */`;\n                }\n                findVariable({ id, name }) {\n                    const stage = this.target.stage;\n                    if (stage.varIds.hasOwnProperty(id)) {\n                        return { scope: 'self', name: stage.varIds[id] };\n                    }\n                    else if (stage.vars.hasOwnProperty(name)) {\n                        return { scope: 'self', name: name };\n                    }\n                    else if (this.target.varIds.hasOwnProperty(id)) {\n                        return { scope: 'S', name: this.target.varIds[id] };\n                    }\n                    else if (this.target.vars.hasOwnProperty(name)) {\n                        return { scope: 'S', name: name };\n                    }\n                    else {\n                        this.target.vars[id] = 0;\n                        this.target.varIds[id] = id;\n                        return { scope: 'S', name: id };\n                    }\n                }\n                findList({ id, name }) {\n                    const stage = this.target.stage;\n                    if (stage.listIds.hasOwnProperty(id)) {\n                        return { scope: 'self', name: stage.listIds[id] };\n                    }\n                    else if (stage.lists.hasOwnProperty(name)) {\n                        return { scope: 'self', name: name };\n                    }\n                    else if (this.target.listIds.hasOwnProperty(id)) {\n                        return { scope: 'S', name: this.target.listIds[id] };\n                    }\n                    else if (this.target.lists.hasOwnProperty(name)) {\n                        return { scope: 'S', name: name };\n                    }\n                    else {\n                        this.target.lists[id] = sb3.createList();\n                        this.target.listIds[id] = id;\n                        return { scope: 'S', name: id };\n                    }\n                }\n                getVariableReference({ id, name }) {\n                    const varInfo = this.findVariable({ id: id, name: name });\n                    return `${varInfo.scope}.vars[${this.sanitizedString(varInfo.name)}]`;\n                }\n                getListReference({ id, name }) {\n                    const listInfo = this.findList({ id: id, name: name });\n                    return `${listInfo.scope}.lists[${this.sanitizedString(listInfo.name)}]`;\n                }\n                isStringLiteralPotentialNumber(text) {\n                    return /\\d|true|false|Infinity/.test(text);\n                }\n                isNameOfCostumeOrSound(text) {\n                    return this.costumeAndSoundNames.has(text);\n                }\n                compileNativeInput(native, desiredType) {\n                    const type = native[0];\n                    switch (type) {\n                        case 4:\n                        case 5:\n                        case 6:\n                        case 7:\n                        case 8: {\n                            const number = +native[1];\n                            if (isNaN(number) || desiredType === 'string') {\n                                return this.sanitizedInput('' + native[1]);\n                            }\n                            return numberInput(safeNumberToString(number));\n                        }\n                        case 10: {\n                            const value = native[1];\n                            if (desiredType !== 'string' && /\\d|Infinity/.test(value) && !this.isNameOfCostumeOrSound(value)) {\n                                const number = +value;\n                                if (number.toString() === value) {\n                                    if (!isNaN(number)) {\n                                        return numberInput(number.toString());\n                                    }\n                                }\n                            }\n                            const input = this.sanitizedInput(native[1] + '');\n                            input.potentialNumber = this.isStringLiteralPotentialNumber(native[1]);\n                            return input;\n                        }\n                        case 12:\n                            return anyInput(this.getVariableReference({ id: native[2], name: native[1] }));\n                        case 13:\n                            return new CompiledInput(this.getListReference({ id: native[2], name: native[1] }), 'list');\n                        case 11:\n                            return this.sanitizedInput(native[1]);\n                        case 9: {\n                            const color = native[1];\n                            const rgb = P.utils.parseColor(color);\n                            return new CompiledInput('' + rgb, 'color');\n                        }\n                        default:\n                            this.warn('unknown native', type, native);\n                            return stringInput('\"\"');\n                    }\n                }\n                compileInput(parentBlock, inputName, type) {\n                    if (!parentBlock.inputs || !parentBlock.inputs[inputName]) {\n                        this.warn('missing input', inputName);\n                        return new CompiledInput(this.getInputFallback(type), type);\n                    }\n                    const input = parentBlock.inputs[inputName];\n                    if (Array.isArray(input[1])) {\n                        const native = input[1];\n                        return this.convertInputType(this.compileNativeInput(native, type), type);\n                    }\n                    const inputBlockId = input[1];\n                    if (!inputBlockId) {\n                        return new CompiledInput(this.getInputFallback(type), type);\n                    }\n                    const inputBlock = this.blocks[inputBlockId];\n                    if (!inputBlock) {\n                        return new CompiledInput(this.getInputFallback(type), type);\n                    }\n                    const opcode = inputBlock.opcode;\n                    const compiler = this.getInputCompiler(opcode);\n                    if (!compiler) {\n                        this.warn('unknown input', opcode, inputBlock);\n                        return new CompiledInput(this.getInputFallback(type), type);\n                    }\n                    const util = new InputUtil(this, inputBlock);\n                    let result = compiler(util);\n                    if (P.config.debug) {\n                        result.source = this.sanitizedComment(inputBlock.opcode) + result.source;\n                    }\n                    return this.convertInputType(result, type);\n                }\n                getField(block, fieldName) {\n                    const value = block.fields[fieldName];\n                    if (!value) {\n                        this.warn('missing field', fieldName);\n                        return '';\n                    }\n                    return '' + value[0];\n                }\n                getVariableField(block, fieldName) {\n                    const value = block.fields[fieldName];\n                    if (!value) {\n                        this.warn('missing variable field', fieldName);\n                        return { id: '', name: '' };\n                    }\n                    return { id: '' + value[1], name: '' + value[0] };\n                }\n                compileSubstackInput(block, substackName) {\n                    if (!block.inputs[substackName]) {\n                        return '';\n                    }\n                    const substack = block.inputs[substackName];\n                    const type = substack[0];\n                    const id = substack[1];\n                    if (id === null) {\n                        return '';\n                    }\n                    return this.compileStack(id);\n                }\n                getNewState() {\n                    return {\n                        isWarp: false,\n                        isProcedure: false,\n                        argumentNames: []\n                    };\n                }\n                compileStack(startingBlock) {\n                    let script = '';\n                    let block = this.blocks[startingBlock];\n                    while (true) {\n                        var opcode = block.opcode;\n                        const compiler = this.getStatementCompiler(opcode);\n                        if (P.config.debug) {\n                            script += this.sanitizedComment(block.opcode);\n                        }\n                        if (compiler) {\n                            const util = new StatementUtil(this, block);\n                            compiler(util);\n                            script += util.content;\n                        }\n                        else {\n                            script += '/* unknown statement */';\n                            this.warn('unknown statement', opcode, block);\n                        }\n                        if (!block.next) {\n                            break;\n                        }\n                        block = this.blocks[block.next];\n                    }\n                    return script;\n                }\n                compileHat(hat) {\n                    const hatCompiler = this.getHatCompiler(hat.opcode);\n                    if (!hatCompiler) {\n                        if (!this.getInputCompiler(hat.opcode) && !this.getStatementCompiler(hat.opcode)) {\n                            this.warn('unknown hat block', hat.opcode, hat);\n                        }\n                        return;\n                    }\n                    this.labelCount = this.target.fns.length;\n                    const startingBlock = hat.next;\n                    if (!startingBlock) {\n                        return;\n                    }\n                    this.state = this.getNewState();\n                    let script = `{{${this.labelCount++}}}`;\n                    if (hatCompiler.precompile) {\n                        script += hatCompiler.precompile(this, hat);\n                    }\n                    script += this.compileStack(startingBlock);\n                    if (hatCompiler.postcompile) {\n                        script = hatCompiler.postcompile(this, script, hat);\n                    }\n                    const parseResult = this.parseScript(script);\n                    const parsedScript = parseResult.script;\n                    const startFn = this.target.fns.length;\n                    for (let label of Object.keys(parseResult.labels)) {\n                        this.target.fns[label] = P.runtime.createContinuation(parsedScript.slice(parseResult.labels[label]));\n                    }\n                    const startingFunction = this.target.fns[startFn];\n                    const util = new HatUtil(this, hat, startingFunction);\n                    hatCompiler.handle(util);\n                    if (P.config.debug) {\n                        this.log(`[${this.target.name}] compiled sb3 script \"${hat.opcode}\"`, script, this.target);\n                    }\n                }\n                parseScript(script) {\n                    const labels = {};\n                    let index = 0;\n                    let accumulator = 0;\n                    while (true) {\n                        const labelStart = script.indexOf('{{', index);\n                        if (labelStart === -1) {\n                            break;\n                        }\n                        const labelEnd = script.indexOf('}}', index);\n                        const id = script.substring(labelStart + 2, labelEnd);\n                        const length = labelEnd + 2 - labelStart;\n                        accumulator += length;\n                        labels[id] = labelEnd + 2 - accumulator;\n                        index = labelEnd + 2;\n                    }\n                    const fixedScript = script.replace(/{{\\d+}}/g, '');\n                    return {\n                        labels,\n                        script: fixedScript,\n                    };\n                }\n                warn(...args) {\n                    args.unshift(`[sb3 compiler ${this.target.name}]`);\n                    console.warn.apply(console, args);\n                }\n                log(...args) {\n                    args.unshift(`[sb3 compiler ${this.target.name}]`);\n                    console.log.apply(console, args);\n                }\n                compile() {\n                    const hats = this.getHatBlocks();\n                    for (const hatId of hats) {\n                        const hat = this.blocks[hatId];\n                        this.compileHat(hat);\n                    }\n                    this.target.sb3data = null;\n                }\n            }\n            compiler_1.Compiler = Compiler;\n        })(compiler = sb3.compiler || (sb3.compiler = {}));\n    })(sb3 = P.sb3 || (P.sb3 = {}));\n})(P || (P = {}));\n(function () {\n    const statementLibrary = P.sb3.compiler.statementLibrary;\n    const inputLibrary = P.sb3.compiler.inputLibrary;\n    const hatLibrary = P.sb3.compiler.hatLibrary;\n    const watcherLibrary = P.sb3.compiler.watcherLibrary;\n    statementLibrary['control_all_at_once'] = function (util) {\n        const SUBSTACK = util.getSubstack('SUBSTACK');\n        util.write(SUBSTACK);\n    };\n    statementLibrary['control_clear_counter'] = function (util) {\n        util.writeLn('self.counter = 0;');\n    };\n    statementLibrary['control_create_clone_of'] = function (util) {\n        const CLONE_OPTION = util.getInput('CLONE_OPTION', 'any');\n        util.writeLn(`clone(${CLONE_OPTION});`);\n    };\n    statementLibrary['control_delete_this_clone'] = function (util) {\n        util.writeLn('if (S.isClone) {');\n        util.visual('visible');\n        util.writeLn('  S.remove();');\n        util.writeLn('  var i = self.children.indexOf(S);');\n        util.writeLn('  if (i !== -1) self.children.splice(i, 1);');\n        util.writeLn('  for (var i = 0; i < runtime.queue.length; i++) {');\n        util.writeLn('    if (runtime.queue[i] && runtime.queue[i].sprite === S) {');\n        util.writeLn('      runtime.queue[i] = undefined;');\n        util.writeLn('    }');\n        util.writeLn('  }');\n        util.writeLn('  return;');\n        util.writeLn('}');\n    };\n    statementLibrary['control_for_each'] = function (util) {\n        const VARIABLE = util.getVariableReference('VARIABLE');\n        const SUBSTACK = util.getSubstack('SUBSTACK');\n        const VALUE = util.getInput('VALUE', 'number');\n        util.writeLn('save();');\n        util.writeLn(`R.times = ${VALUE};`);\n        util.writeLn('R.current = 0;');\n        const label = util.addLabel();\n        util.writeLn(`if (R.current < R.times) {`);\n        util.writeLn(`  ${VARIABLE} = ++R.current;`);\n        util.write(SUBSTACK);\n        util.queue(label);\n        util.writeLn('} else {');\n        util.writeLn('  restore();');\n        util.writeLn('}');\n    };\n    statementLibrary['control_forever'] = function (util) {\n        const SUBSTACK = util.getSubstack('SUBSTACK');\n        if (util.compiler.state.isWarp && !util.substacksQueue) {\n            util.writeLn('while (true) {');\n            util.write(SUBSTACK);\n            util.writeLn('}');\n        }\n        else {\n            const label = util.addLabel();\n            util.write(SUBSTACK);\n            util.queue(label);\n        }\n    };\n    statementLibrary['control_if'] = function (util) {\n        const CONDITION = util.getInput('CONDITION', 'boolean');\n        const SUBSTACK = util.getSubstack('SUBSTACK');\n        util.writeLn(`if (${CONDITION}) {`);\n        util.write(SUBSTACK);\n        util.writeLn('}');\n    };\n    statementLibrary['control_if_else'] = function (util) {\n        const CONDITION = util.getInput('CONDITION', 'boolean');\n        const SUBSTACK = util.getSubstack('SUBSTACK');\n        const SUBSTACK2 = util.getSubstack('SUBSTACK2');\n        util.writeLn(`if (${CONDITION}) {`);\n        util.write(SUBSTACK);\n        util.writeLn('} else {');\n        util.write(SUBSTACK2);\n        util.writeLn('}');\n    };\n    statementLibrary['control_incr_counter'] = function (util) {\n        util.writeLn('self.counter++;');\n    };\n    statementLibrary['control_repeat'] = function (util) {\n        const TIMES = util.getInput('TIMES', 'any');\n        const SUBSTACK = util.getSubstack('SUBSTACK');\n        if (util.compiler.state.isWarp && !util.substacksQueue) {\n            util.writeLn('save();');\n            util.writeLn(`R.count = ${TIMES};`);\n            util.writeLn('while (R.count >= 0.5) {');\n            util.writeLn('  R.count -= 1;');\n            util.write(SUBSTACK);\n            util.writeLn('}');\n            util.writeLn('restore();');\n        }\n        else {\n            util.writeLn('save();');\n            util.writeLn(`R.count = ${TIMES};`);\n            const label = util.addLabel();\n            util.writeLn('if (R.count >= 0.5) {');\n            util.writeLn('  R.count -= 1;');\n            util.write(SUBSTACK);\n            util.queue(label);\n            util.writeLn('} else {');\n            util.writeLn('  restore();');\n            util.writeLn('}');\n        }\n    };\n    statementLibrary['control_repeat_until'] = function (util) {\n        const CONDITION = util.getInput('CONDITION', 'boolean');\n        const SUBSTACK = util.getSubstack('SUBSTACK');\n        if (util.compiler.state.isWarp && !util.substacksQueue) {\n            util.writeLn(`while (!${CONDITION}) {`);\n            util.write(SUBSTACK);\n            util.writeLn('}');\n        }\n        else {\n            const label = util.addLabel();\n            util.writeLn(`if (!${CONDITION}) {`);\n            util.write(SUBSTACK);\n            util.queue(label);\n            util.writeLn('}');\n        }\n    };\n    statementLibrary['control_stop'] = function (util) {\n        const STOP_OPTION = util.getField('STOP_OPTION');\n        switch (STOP_OPTION) {\n            case 'all':\n                util.writeLn('runtime.stopAll(); return;');\n                break;\n            case 'this script':\n                util.writeLn('endCall(); return;');\n                break;\n            case 'other scripts in sprite':\n            case 'other scripts in stage':\n                util.writeLn('S.stopSoundsExcept(BASE);');\n                util.writeLn('for (var i = 0; i < runtime.queue.length; i++) {');\n                util.writeLn('  if (i !== THREAD && runtime.queue[i] && runtime.queue[i].sprite === S) {');\n                util.writeLn('    runtime.queue[i].stopped = true;');\n                util.writeLn('    runtime.queue[i].fn = undefined;');\n                util.writeLn('  }');\n                util.writeLn('}');\n                break;\n        }\n    };\n    statementLibrary['control_wait'] = function (util) {\n        const DURATION = util.getInput('DURATION', 'any');\n        util.visual('always');\n        util.writeLn('save();');\n        util.writeLn('R.start = runtime.currentMSecs;');\n        util.writeLn(`R.duration = ${DURATION};`);\n        util.writeLn(`var first = !WARP;`);\n        const label = util.addLabel();\n        util.writeLn('if (runtime.currentMSecs - R.start < R.duration * 1000 || first) {');\n        util.writeLn('  var first;');\n        util.forceQueue(label);\n        util.writeLn('}');\n        util.writeLn('restore();');\n    };\n    statementLibrary['control_wait_until'] = function (util) {\n        const CONDITION = util.getInput('CONDITION', 'boolean');\n        const label = util.addLabel();\n        util.writeLn(`if (!${CONDITION}) {`);\n        util.forceQueue(label);\n        util.writeLn('}');\n    };\n    statementLibrary['control_while'] = function (util) {\n        const CONDITION = util.getInput('CONDITION', 'boolean');\n        const SUBSTACK = util.getSubstack('SUBSTACK');\n        if (util.compiler.state.isWarp && !util.substacksQueue) {\n            util.writeLn(`while (${CONDITION}) {`);\n            util.write(SUBSTACK);\n            util.writeLn('}');\n        }\n        else {\n            const label = util.addLabel();\n            util.writeLn(`if (${CONDITION}) {`);\n            util.write(SUBSTACK);\n            util.queue(label);\n            util.writeLn('}');\n        }\n    };\n    statementLibrary['data_addtolist'] = function (util) {\n        const LIST = util.getListReference('LIST');\n        const ITEM = util.getInput('ITEM', 'any');\n        util.writeLn(`watchedAppendToList(${LIST}, ${ITEM});`);\n    };\n    statementLibrary['data_changevariableby'] = function (util) {\n        const VARIABLE = util.getVariableReference('VARIABLE');\n        const VALUE = util.getInput('VALUE', 'number');\n        util.writeLn(`${VARIABLE} = (${util.asType(VARIABLE, 'number')} + ${VALUE});`);\n        if (util.isCloudVariable('VARIABLE')) {\n            util.writeLn(`cloudVariableChanged(${util.sanitizedString(util.getField('VARIABLE'))})`);\n        }\n    };\n    statementLibrary['data_deletealloflist'] = function (util) {\n        const LIST = util.getListReference('LIST');\n        util.writeLn(`watchedDeleteAllOfList(${LIST});`);\n    };\n    statementLibrary['data_deleteoflist'] = function (util) {\n        const LIST = util.getListReference('LIST');\n        const INDEX = util.getInput('INDEX', 'any');\n        util.writeLn(`watchedDeleteLineOfList(${LIST}, ${INDEX});`);\n    };\n    statementLibrary['data_hidelist'] = function (util) {\n        const LIST = util.sanitizedString(util.getField('LIST'));\n        const scope = util.getListScope('LIST');\n        util.writeLn(`${scope}.showList(${LIST}, false);`);\n    };\n    statementLibrary['data_hidevariable'] = function (util) {\n        const VARIABLE = util.sanitizedString(util.getField('VARIABLE'));\n        const scope = util.getVariableScope('VARIABLE');\n        util.writeLn(`${scope}.showVariable(${VARIABLE}, false);`);\n    };\n    statementLibrary['data_insertatlist'] = function (util) {\n        const LIST = util.getListReference('LIST');\n        const INDEX = util.getInput('INDEX', 'any');\n        const ITEM = util.getInput('ITEM', 'any');\n        util.writeLn(`watchedInsertInList(${LIST}, ${INDEX}, ${ITEM});`);\n    };\n    statementLibrary['data_replaceitemoflist'] = function (util) {\n        const LIST = util.getListReference('LIST');\n        const ITEM = util.getInput('ITEM', 'any');\n        const INDEX = util.getInput('INDEX', 'any');\n        util.writeLn(`watchedSetLineOfList(${LIST}, ${INDEX}, ${ITEM});`);\n    };\n    statementLibrary['data_setvariableto'] = function (util) {\n        const VARIABLE = util.getVariableReference('VARIABLE');\n        const VALUE = util.getInput('VALUE', 'any');\n        util.writeLn(`${VARIABLE} = ${VALUE};`);\n        if (util.isCloudVariable('VARIABLE')) {\n            util.writeLn(`cloudVariableChanged(${util.sanitizedString(util.getField('VARIABLE'))})`);\n        }\n    };\n    statementLibrary['data_showlist'] = function (util) {\n        const LIST = util.sanitizedString(util.getField('LIST'));\n        const scope = util.getListScope('LIST');\n        util.writeLn(`${scope}.showList(${LIST}, true);`);\n    };\n    statementLibrary['data_showvariable'] = function (util) {\n        const VARIABLE = util.sanitizedString(util.getField('VARIABLE'));\n        const scope = util.getVariableScope('VARIABLE');\n        util.writeLn(`${scope}.showVariable(${VARIABLE}, true);`);\n    };\n    statementLibrary['event_broadcast'] = function (util) {\n        const BROADCAST_INPUT = util.getInput('BROADCAST_INPUT', 'any');\n        util.writeLn(`var threads = broadcast(${BROADCAST_INPUT});`);\n        util.writeLn(`if (threads.indexOf(BASE) !== -1) {STOPPED = true;}`);\n    };\n    statementLibrary['event_broadcastandwait'] = function (util) {\n        const BROADCAST_INPUT = util.getInput('BROADCAST_INPUT', 'any');\n        util.writeLn('save();');\n        util.writeLn(`R.threads = broadcast(${BROADCAST_INPUT});`);\n        util.writeLn('if (R.threads.indexOf(BASE) !== -1) {return;}');\n        const label = util.addLabel();\n        util.writeLn('if (running(R.threads)) {');\n        util.forceQueue(label);\n        util.writeLn('}');\n        util.writeLn('restore();');\n    };\n    statementLibrary['looks_changeeffectby'] = function (util) {\n        const EFFECT = util.sanitizedString(util.getField('EFFECT')).toLowerCase();\n        const CHANGE = util.getInput('CHANGE', 'number');\n        util.writeLn(`S.changeFilter(${EFFECT}, ${CHANGE});`);\n        util.visual('visible');\n    };\n    statementLibrary['looks_changesizeby'] = function (util) {\n        const CHANGE = util.getInput('CHANGE', 'any');\n        util.writeLn(`var f = S.scale + ${CHANGE} / 100;`);\n        util.writeLn('S.scale = f < 0 ? 0 : f;');\n        util.visual('visible');\n    };\n    statementLibrary['looks_cleargraphiceffects'] = function (util) {\n        util.writeLn('S.resetFilters();');\n        util.visual('visible');\n    };\n    statementLibrary['looks_goforwardbackwardlayers'] = function (util) {\n        const FORWARD_BACKWARD = util.getField('FORWARD_BACKWARD');\n        const NUM = util.getInput('NUM', 'number');\n        util.writeLn('var i = self.children.indexOf(S);');\n        util.writeLn('if (i !== -1) {');\n        util.writeLn('  self.children.splice(i, 1);');\n        if (FORWARD_BACKWARD === 'forward') {\n            util.writeLn(`  self.children.splice(Math.max(0, Math.min(self.children.length, i + ${NUM})), 0, S);`);\n        }\n        else {\n            util.writeLn(`  self.children.splice(Math.max(0, Math.min(self.children.length, i - ${NUM})), 0, S);`);\n        }\n        util.writeLn('}');\n    };\n    statementLibrary['looks_gotofrontback'] = function (util) {\n        const FRONT_BACK = util.getField('FRONT_BACK');\n        util.writeLn('var i = self.children.indexOf(S);');\n        util.writeLn('if (i !== -1) self.children.splice(i, 1);');\n        if (FRONT_BACK === 'front') {\n            util.writeLn('self.children.push(S);');\n        }\n        else {\n            util.writeLn('self.children.unshift(S);');\n        }\n    };\n    statementLibrary['looks_hide'] = function (util) {\n        util.writeLn('S.visible = false;');\n        util.updateBubble();\n    };\n    statementLibrary['looks_nextbackdrop'] = function (util) {\n        util.writeLn('self.showNextCostume();');\n        util.visual('always');\n        util.writeLn('var threads = sceneChange();');\n        util.writeLn('if (threads.indexOf(BASE) !== -1) {return;}');\n    };\n    statementLibrary['looks_nextcostume'] = function (util) {\n        util.writeLn('S.showNextCostume();');\n        util.visual('visible');\n    };\n    statementLibrary['looks_say'] = function (util) {\n        const MESSAGE = util.getInput('MESSAGE', 'any');\n        util.writeLn(`S.say(${MESSAGE}, false);`);\n        util.visual('visible');\n    };\n    statementLibrary['looks_sayforsecs'] = function (util) {\n        const MESSAGE = util.getInput('MESSAGE', 'any');\n        const SECS = util.getInput('SECS', 'number');\n        util.writeLn('save();');\n        util.writeLn(`R.id = S.say(${MESSAGE}, false);`);\n        util.visual('visible');\n        util.writeLn('R.start = runtime.now();');\n        util.writeLn(`R.duration = ${SECS};`);\n        util.writeLn(`var first = true;`);\n        const label = util.addLabel();\n        util.writeLn('if (runtime.now() - R.start < R.duration * 1000 || first) {');\n        util.writeLn('  var first;');\n        util.forceQueue(label);\n        util.writeLn('}');\n        util.writeLn('if (S.sayId === R.id) {');\n        util.writeLn('  S.say(\"\");');\n        util.writeLn('}');\n        util.writeLn('restore();');\n    };\n    statementLibrary['looks_seteffectto'] = function (util) {\n        const EFFECT = util.sanitizedString(util.getField('EFFECT')).toLowerCase();\n        const VALUE = util.getInput('VALUE', 'number');\n        util.writeLn(`S.setFilter(${EFFECT}, ${VALUE});`);\n        util.visual('visible');\n    };\n    statementLibrary['looks_setsizeto'] = function (util) {\n        const SIZE = util.getInput('SIZE', 'number');\n        util.writeLn(`S.scale = Math.max(0, ${SIZE} / 100);`);\n        util.visual('visible');\n    };\n    statementLibrary['looks_show'] = function (util) {\n        util.writeLn('S.visible = true;');\n        util.visual('always');\n        util.updateBubble();\n    };\n    statementLibrary['looks_switchbackdropto'] = function (util) {\n        const BACKDROP = util.getInput('BACKDROP', 'any');\n        util.writeLn(`self.setCostume(${BACKDROP});`);\n        util.visual('always');\n        util.writeLn('var threads = sceneChange();');\n        util.writeLn('if (threads.indexOf(BASE) !== -1) {return;}');\n    };\n    statementLibrary['looks_switchbackdroptoandwait'] = function (util) {\n        const BACKDROP = util.getInput('BACKDROP', 'any');\n        util.writeLn(`self.setCostume(${BACKDROP});`);\n        util.visual('always');\n        util.writeLn('save();');\n        util.writeLn('R.threads = sceneChange();');\n        util.writeLn('if (R.threads.indexOf(BASE) !== -1) {return;}');\n        const label = util.addLabel();\n        util.writeLn('if (running(R.threads)) {');\n        util.forceQueue(label);\n        util.writeLn('}');\n        util.writeLn('restore();');\n    };\n    statementLibrary['looks_switchcostumeto'] = function (util) {\n        const COSTUME = util.getInput('COSTUME', 'any');\n        util.writeLn(`S.setCostume(${COSTUME});`);\n        util.visual('visible');\n    };\n    statementLibrary['looks_think'] = function (util) {\n        const MESSAGE = util.getInput('MESSAGE', 'any');\n        util.writeLn(`S.say(${MESSAGE}, true);`);\n        util.visual('visible');\n    };\n    statementLibrary['looks_thinkforsecs'] = function (util) {\n        const MESSAGE = util.getInput('MESSAGE', 'any');\n        const SECS = util.getInput('SECS', 'number');\n        util.writeLn('save();');\n        util.writeLn(`R.id = S.say(${MESSAGE}, true);`);\n        util.visual('visible');\n        util.writeLn('R.start = runtime.now();');\n        util.writeLn(`R.duration = ${SECS};`);\n        util.writeLn(`var first = true;`);\n        const label = util.addLabel();\n        util.writeLn('if (runtime.now() - R.start < R.duration * 1000 || first) {');\n        util.writeLn('  var first;');\n        util.forceQueue(label);\n        util.writeLn('}');\n        util.writeLn('if (S.sayId === R.id) {');\n        util.writeLn('  S.say(\"\");');\n        util.writeLn('}');\n        util.writeLn('restore();');\n    };\n    statementLibrary['motion_changexby'] = function (util) {\n        const DX = util.getInput('DX', 'number');\n        util.writeLn(`S.moveTo(S.scratchX + ${DX}, S.scratchY);`);\n        util.visual('drawing');\n    };\n    statementLibrary['motion_changeyby'] = function (util) {\n        const DY = util.getInput('DY', 'number');\n        util.writeLn(`S.moveTo(S.scratchX, S.scratchY + ${DY});`);\n        util.visual('drawing');\n    };\n    statementLibrary['motion_glidesecstoxy'] = function (util) {\n        const SECS = util.getInput('SECS', 'any');\n        const X = util.getInput('X', 'any');\n        const Y = util.getInput('Y', 'any');\n        util.visual('drawing');\n        util.writeLn('save();');\n        util.writeLn('R.start = runtime.now();');\n        util.writeLn(`R.duration = ${SECS};`);\n        util.writeLn('R.baseX = S.scratchX;');\n        util.writeLn('R.baseY = S.scratchY;');\n        util.writeLn(`R.deltaX = ${X} - S.scratchX;`);\n        util.writeLn(`R.deltaY = ${Y} - S.scratchY;`);\n        const label = util.addLabel();\n        util.writeLn('var f = (runtime.now() - R.start) / (R.duration * 1000);');\n        util.writeLn('if (f > 1 || isNaN(f)) f = 1;');\n        util.writeLn('S.moveTo(R.baseX + f * R.deltaX, R.baseY + f * R.deltaY);');\n        util.visual('drawing');\n        util.writeLn('if (f < 1) {');\n        util.forceQueue(label);\n        util.writeLn('}');\n        util.writeLn('restore();');\n    };\n    statementLibrary['motion_glideto'] = function (util) {\n        const SECS = util.getInput('SECS', 'any');\n        const TO = util.getInput('TO', 'any');\n        util.visual('drawing');\n        util.writeLn('save();');\n        util.writeLn('R.start = runtime.now();');\n        util.writeLn(`R.duration = ${SECS};`);\n        util.writeLn('R.baseX = S.scratchX;');\n        util.writeLn('R.baseY = S.scratchY;');\n        util.writeLn(`var to = self.getPosition(${TO});`);\n        util.writeLn('if (to) {');\n        util.writeLn('  R.deltaX = to.x - S.scratchX;');\n        util.writeLn('  R.deltaY = to.y - S.scratchY;');\n        const label = util.addLabel();\n        util.writeLn('  var f = (runtime.now() - R.start) / (R.duration * 1000);');\n        util.writeLn('  if (f > 1 || isNaN(f)) f = 1;');\n        util.writeLn('  S.moveTo(R.baseX + f * R.deltaX, R.baseY + f * R.deltaY);');\n        util.visual('drawing');\n        util.writeLn('  if (f < 1) {');\n        util.forceQueue(label);\n        util.writeLn('  }');\n        util.writeLn('  restore();');\n        util.writeLn('}');\n    };\n    statementLibrary['motion_goto'] = function (util) {\n        const TO = util.getInput('TO', 'any');\n        util.writeLn(`S.gotoObject(${TO});`);\n        util.visual('drawing');\n    };\n    statementLibrary['motion_gotoxy'] = function (util) {\n        const X = util.getInput('X', 'number');\n        const Y = util.getInput('Y', 'number');\n        util.writeLn(`S.moveTo(${X}, ${Y});`);\n        util.visual('drawing');\n    };\n    statementLibrary['motion_ifonedgebounce'] = function (util) {\n        util.writeLn('S.bounceOffEdge();');\n    };\n    statementLibrary['motion_movesteps'] = function (util) {\n        const STEPS = util.getInput('STEPS', 'number');\n        util.writeLn(`S.forward(${STEPS});`);\n        util.visual('drawing');\n    };\n    statementLibrary['motion_pointindirection'] = function (util) {\n        const DIRECTION = util.getInput('DIRECTION', 'number');\n        util.visual('visible');\n        util.writeLn(`S.setDirection(${DIRECTION});`);\n    };\n    statementLibrary['motion_pointtowards'] = function (util) {\n        const TOWARDS = util.getInput('TOWARDS', 'any');\n        util.writeLn(`S.pointTowards(${TOWARDS});`);\n        util.visual('visible');\n    };\n    statementLibrary['motion_setrotationstyle'] = function (util) {\n        const STYLE = P.utils.parseRotationStyle(util.getField('STYLE'));\n        util.writeLn(`S.rotationStyle = ${STYLE};`);\n        util.visual('visible');\n    };\n    statementLibrary['motion_setx'] = function (util) {\n        const X = util.getInput('X', 'number');\n        util.writeLn(`S.moveTo(${X}, S.scratchY);`);\n        util.visual('drawing');\n    };\n    statementLibrary['motion_sety'] = function (util) {\n        const Y = util.getInput('Y', 'number');\n        util.writeLn(`S.moveTo(S.scratchX, ${Y});`);\n        util.visual('drawing');\n    };\n    statementLibrary['motion_turnleft'] = function (util) {\n        const DEGREES = util.getInput('DEGREES', 'number');\n        util.writeLn(`S.setDirection(S.direction - ${DEGREES});`);\n        util.visual('visible');\n    };\n    statementLibrary['motion_turnright'] = function (util) {\n        const DEGREES = util.getInput('DEGREES', 'number');\n        util.writeLn(`S.setDirection(S.direction + ${DEGREES});`);\n        util.visual('visible');\n    };\n    statementLibrary['music_changeTempo'] = function (util) {\n        const TEMPO = util.getInput('TEMPO', 'number');\n        util.writeLn(`self.tempoBPM += ${TEMPO};`);\n    };\n    statementLibrary['music_playDrumForBeats'] = function (util) {\n        const BEATS = util.getInput('BEATS', 'number');\n        const DRUM = util.getInput('DRUM', 'number');\n        util.compiler.needsMusic = true;\n        util.writeLn('save();');\n        util.writeLn('R.start = runtime.now();');\n        util.writeLn(`R.duration = ${BEATS} * 60 / self.tempoBPM;`);\n        util.writeLn(`var first = !WARP;`);\n        if (P.audio.context) {\n            util.writeLn(`R.sound = playSpan(DRUMS[Math.round(${DRUM}) - 1] || DRUMS[2], 60, 10);`);\n        }\n        else {\n            util.writeLn('R.sound = { stopped: false };');\n        }\n        const id = util.addLabel();\n        util.writeLn('S.activeSounds.add(R.sound);');\n        util.writeLn('if ((runtime.now() - R.start < R.duration * 1000 || first) && !R.sound.stopped) {');\n        util.writeLn('  var first;');\n        util.forceQueue(id);\n        util.writeLn('}');\n        util.writeLn('S.activeSounds.delete(R.sound);');\n        util.writeLn('restore();');\n    };\n    statementLibrary['music_playNoteForBeats'] = function (util) {\n        const BEATS = util.getInput('BEATS', 'number');\n        const NOTE = util.getInput('NOTE', 'number');\n        util.compiler.needsMusic = true;\n        util.writeLn('save();');\n        util.writeLn('R.start = runtime.now();');\n        util.writeLn(`R.duration = ${BEATS} * 60 / self.tempoBPM;`);\n        if (P.audio.context) {\n            util.writeLn(`R.sound = playNote(${NOTE}, R.duration);`);\n        }\n        else {\n            util.writeLn('R.sound = { stopped: false };');\n        }\n        const id = util.addLabel();\n        util.writeLn('S.activeSounds.add(R.sound);');\n        util.writeLn('if ((runtime.now() - R.start < R.duration * 1000) && !R.sound.stopped) {');\n        util.forceQueue(id);\n        util.writeLn('}');\n        util.writeLn('S.activeSounds.delete(R.sound);');\n        util.writeLn('restore();');\n    };\n    statementLibrary['music_restForBeats'] = function (util) {\n        const BEATS = util.getInput('BEATS', 'number');\n        util.writeLn('save();');\n        util.writeLn('R.start = runtime.now();');\n        util.writeLn(`R.duration = ${BEATS} * 60 / self.tempoBPM;`);\n        util.writeLn(`var first = !WARP;`);\n        const id = util.addLabel();\n        util.writeLn('if (runtime.now() - R.start < R.duration * 1000 || first) {');\n        util.writeLn('  var first;');\n        util.forceQueue(id);\n        util.writeLn('}');\n        util.writeLn('restore();');\n    };\n    statementLibrary['music_setTempo'] = function (util) {\n        const TEMPO = util.getInput('TEMPO', 'number');\n        util.writeLn(`self.tempoBPM = ${TEMPO};`);\n    };\n    statementLibrary['music_setInstrument'] = function (util) {\n        const INSTRUMENT = util.getInput('INSTRUMENT', 'number');\n        util.writeLn(`S.instrument = Math.max(0, Math.min(INSTRUMENTS.length - 1, ${INSTRUMENT} - 1)) | 0;`);\n    };\n    statementLibrary['pen_changePenColorParamBy'] = function (util) {\n        const COLOR_PARAM = util.getInput('COLOR_PARAM', 'string');\n        const VALUE = util.getInput('VALUE', 'number');\n        util.writeLn(`S.penColor.changeParam(${COLOR_PARAM}, ${VALUE});`);\n    };\n    statementLibrary['pen_changePenHueBy'] = function (util) {\n        const HUE = util.getInput('HUE', 'number');\n        util.writeLn('S.penColor.toHSLA();');\n        util.writeLn(`S.penColor.x += ${HUE} * 360 / 200;`);\n        util.writeLn('S.penColor.y = 100;');\n    };\n    statementLibrary['pen_changePenShadeBy'] = function (util) {\n        const SHADE = util.getInput('SHADE', 'number');\n        util.writeLn('S.penColor.toHSLA();');\n        util.writeLn(`S.penColor.z = (S.penColor.z + ${SHADE}) % 200;`);\n        util.writeLn('if (S.penColor.z < 0) S.penColor.z += 200;');\n        util.writeLn('S.penColor.y = 100;');\n    };\n    statementLibrary['pen_changePenSizeBy'] = function (util) {\n        const SIZE = util.getInput('SIZE', 'number');\n        util.writeLn(`S.penSize = Math.max(1, S.penSize + ${SIZE});`);\n    };\n    statementLibrary['pen_clear'] = function (util) {\n        util.writeLn('self.clearPen();');\n        util.visual('always');\n    };\n    statementLibrary['pen_penDown'] = function (util) {\n        util.writeLn('S.isPenDown = true;');\n        util.writeLn('S.dotPen();');\n        util.visual('always');\n    };\n    statementLibrary['pen_penUp'] = function (util) {\n        util.writeLn('S.isPenDown = false;');\n    };\n    statementLibrary['pen_setPenColorParamTo'] = function (util) {\n        const COLOR_PARAM = util.getInput('COLOR_PARAM', 'string');\n        const VALUE = util.getInput('VALUE', 'number');\n        util.writeLn(`S.penColor.setParam(${COLOR_PARAM}, ${VALUE});`);\n    };\n    statementLibrary['pen_setPenColorToColor'] = function (util) {\n        const COLOR = util.getInput('COLOR', 'color');\n        util.writeLn(`S.penColor.setShiftedRGBA(${COLOR});`);\n    };\n    statementLibrary['pen_setPenHueToNumber'] = function (util) {\n        const HUE = util.getInput('HUE', 'number');\n        util.writeLn('S.penColor.toHSLA();');\n        util.writeLn(`S.penColor.x = ${HUE} * 360 / 200;`);\n        util.writeLn('S.penColor.y = 100;');\n        util.writeLn('S.penColor.a = 1;');\n    };\n    statementLibrary['pen_setPenShadeToNumber'] = function (util) {\n        const SHADE = util.getInput('SHADE', 'number');\n        util.writeLn('S.penColor.toHSLA();');\n        util.writeLn(`S.penColor.z = ${SHADE} % 200;`);\n        util.writeLn('if (S.penColor.z < 0) S.penColor.z += 200;');\n        util.writeLn('S.penColor.y = 100;');\n    };\n    statementLibrary['pen_setPenSizeTo'] = function (util) {\n        const SIZE = util.getInput('SIZE', 'number');\n        util.writeLn(`S.penSize = Math.max(1, Math.min(${SIZE}, 1200));`);\n    };\n    statementLibrary['pen_stamp'] = function (util) {\n        util.writeLn('S.stamp();');\n        util.visual('always');\n    };\n    statementLibrary['procedures_call'] = function (util) {\n        const mutation = util.block.mutation;\n        const name = mutation.proccode;\n        if (P.config.debug) {\n            if (name === 'forkphorus:debugger;') {\n                util.writeLn('/* forkphorus */ debugger;');\n                return;\n            }\n            else if (name === 'forkphorus:throw;') {\n                util.writeLn('/* forkphorus */ throw new Error(\"Debug intended crash\");');\n                return;\n            }\n        }\n        const label = util.claimNextLabel();\n        util.write(`call(S.procedures[${util.sanitizedString(name)}], ${label}, [`);\n        const inputNames = JSON.parse(mutation.argumentids);\n        for (const inputName of inputNames) {\n            util.write(`${util.getInput(inputName, 'any')}, `);\n        }\n        util.writeLn(']); return;');\n        util.addLabel(label);\n    };\n    statementLibrary['sound_changeeffectby'] = function (util) {\n        const EFFECT = util.sanitizedString(util.getField('EFFECT'));\n        const VALUE = util.getInput('VALUE', 'number');\n        util.writeLn(`S.changeSoundFilter(${EFFECT}, ${VALUE});`);\n        util.writeLn('if (updateSoundEffectsOnAllSounds) updateSoundEffectsOnAllSounds();');\n        util.waitOneTick();\n    };\n    statementLibrary['sound_changevolumeby'] = function (util) {\n        const VOLUME = util.getInput('VOLUME', 'number');\n        util.writeLn(`S.volume = Math.max(0, Math.min(1, S.volume + ${VOLUME} / 100));`);\n        util.writeLn('if (S.node) S.node.gain.value = S.volume;');\n        util.waitOneTick();\n    };\n    statementLibrary['sound_cleareffects'] = function (util) {\n        util.writeLn('S.resetSoundFilters();');\n    };\n    statementLibrary['sound_play'] = function (util) {\n        const SOUND_MENU = util.getInput('SOUND_MENU', 'any');\n        if (P.audio.context) {\n            util.writeLn(`var sound = S.getSound(${SOUND_MENU});`);\n            util.writeLn('if (sound) startSound(sound);');\n        }\n    };\n    statementLibrary['sound_playuntildone'] = function (util) {\n        const SOUND_MENU = util.getInput('SOUND_MENU', 'any');\n        if (P.audio.context) {\n            util.writeLn(`var sound = S.getSound(${SOUND_MENU});`);\n            util.writeLn('if (sound) {');\n            util.writeLn('  save();');\n            util.writeLn('  R.sound = playSound(sound);');\n            util.writeLn('  S.activeSounds.add(R.sound);');\n            const label = util.addLabel();\n            util.writeLn('  if (!R.sound.node.ended && !R.sound.stopped) {');\n            util.forceQueue(label);\n            util.writeLn('  }');\n            util.writeLn('  S.activeSounds.delete(R.sound);');\n            util.writeLn('  restore();');\n            util.writeLn('}');\n        }\n    };\n    statementLibrary['sound_seteffectto'] = function (util) {\n        const EFFECT = util.sanitizedString(util.getField('EFFECT'));\n        const VALUE = util.getInput('VALUE', 'number');\n        util.writeLn(`S.setSoundFilter(${EFFECT}, ${VALUE});`);\n        util.writeLn('if (updateSoundEffectsOnAllSounds) updateSoundEffectsOnAllSounds();');\n        util.writeLn('if (!self.removeLimits) {');\n        util.waitOneTick();\n        util.writeLn('}');\n    };\n    statementLibrary['sound_setvolumeto'] = function (util) {\n        const VOLUME = util.getInput('VOLUME', 'number');\n        util.writeLn(`S.volume = Math.max(0, Math.min(1, ${VOLUME} / 100));`);\n        util.writeLn('if (S.node) S.node.gain.value = S.volume;');\n        util.writeLn('if (!self.removeLimits) {');\n        util.waitOneTick();\n        util.writeLn('}');\n    };\n    statementLibrary['sound_stopallsounds'] = function (util) {\n        if (P.audio.context) {\n            util.writeLn('self.stopAllSounds();');\n        }\n    };\n    statementLibrary['sensing_askandwait'] = function (util) {\n        const QUESTION = util.getInput('QUESTION', 'string');\n        util.writeLn('R.id = self.nextPromptId++;');\n        const label1 = util.addLabel();\n        util.writeLn('if (self.promptId < R.id) {');\n        util.forceQueue(label1);\n        util.writeLn('}');\n        util.writeLn(`S.ask(${QUESTION});`);\n        const label2 = util.addLabel();\n        util.writeLn('if (self.promptId === R.id) {');\n        util.forceQueue(label2);\n        util.writeLn('}');\n        util.writeLn('S.say(\"\");');\n        util.visual('always');\n    };\n    statementLibrary['sensing_resettimer'] = function (util) {\n        util.writeLn('runtime.resetTimer();');\n    };\n    statementLibrary['sensing_setdragmode'] = function (util) {\n        const DRAG_MODE = util.getField('DRAG_MODE');\n        if (DRAG_MODE === 'draggable') {\n            util.writeLn('S.isDraggable = true;');\n        }\n        else {\n            util.writeLn('S.isDraggable = false;');\n        }\n    };\n    statementLibrary['text2speech_setVoice'] = function (util) {\n        const VOICE = util.getInput('VOICE', 'string');\n        util.stage.initTextToSpeech();\n        util.writeLn(`self.tts.setVoice(${VOICE});`);\n    };\n    statementLibrary['text2speech_setLanguage'] = function (util) {\n        const LANGUAGE = util.getInput('LANGUAGE', 'string');\n        util.stage.initTextToSpeech();\n        util.writeLn(`self.tts.setLanguage(${LANGUAGE});`);\n    };\n    statementLibrary['text2speech_speakAndWait'] = function (util) {\n        const WORDS = util.getInput('WORDS', 'string');\n        util.stage.initTextToSpeech();\n        util.waitUntilSettles(`self.tts.speak(${WORDS})`);\n    };\n    statementLibrary['videoSensing_videoToggle'] = function (util) {\n        const VIDEO_STATE = util.getInput('VIDEO_STATE', 'string');\n        util.writeLn(`switch (${VIDEO_STATE}) {`);\n        util.writeLn('  case \"off\": self.showVideo(false); break;');\n        util.writeLn('  case \"on\": self.showVideo(true); break;');\n        util.writeLn('}');\n    };\n    const noopStatement = (util) => util.writeLn('/* noop */');\n    statementLibrary['motion_align_scene'] = noopStatement;\n    statementLibrary['motion_scroll_right'] = noopStatement;\n    statementLibrary['motion_scroll_up'] = noopStatement;\n    statementLibrary['looks_changestretchby'] = noopStatement;\n    statementLibrary['looks_hideallsprites'] = noopStatement;\n    statementLibrary['looks_setstretchto'] = noopStatement;\n    inputLibrary['argument_reporter_boolean'] = function (util) {\n        const VALUE = util.getField('VALUE');\n        if (!util.compiler.state.isProcedure || util.compiler.state.argumentNames.indexOf(VALUE) === -1) {\n            const lowerCaseName = VALUE.toLowerCase();\n            if (lowerCaseName === 'is compiled?' || lowerCaseName === 'is forkphorus?') {\n                return util.booleanInput('true');\n            }\n            return util.numberInput('0');\n        }\n        return util.booleanInput(util.asType(`C.args[${util.sanitizedString(VALUE)}]`, 'boolean'));\n    };\n    inputLibrary['argument_reporter_string_number'] = function (util) {\n        const VALUE = util.getField('VALUE');\n        if (!util.compiler.state.isProcedure || util.compiler.state.argumentNames.indexOf(VALUE) === -1) {\n            return util.numberInput('0');\n        }\n        return util.anyInput(`C.args[${util.sanitizedString(VALUE)}]`);\n    };\n    inputLibrary['control_create_clone_of_menu'] = function (util) {\n        return util.fieldInput('CLONE_OPTION');\n    };\n    inputLibrary['control_get_counter'] = function (util) {\n        return util.numberInput('self.counter');\n    };\n    inputLibrary['data_itemoflist'] = function (util) {\n        const LIST = util.getListReference('LIST');\n        const INDEX = util.getInput('INDEX', 'any');\n        return util.anyInput(`getLineOfList(${LIST}, ${INDEX})`);\n    };\n    inputLibrary['data_itemnumoflist'] = function (util) {\n        const LIST = util.getListReference('LIST');\n        const ITEM = util.getInput('ITEM', 'any');\n        return util.numberInput(`listIndexOf(${LIST}, ${ITEM})`);\n    };\n    inputLibrary['data_lengthoflist'] = function (util) {\n        const LIST = util.getListReference('LIST');\n        return util.numberInput(`${LIST}.length`);\n    };\n    inputLibrary['data_listcontainsitem'] = function (util) {\n        const LIST = util.getListReference('LIST');\n        const ITEM = util.getInput('ITEM', 'any');\n        return util.booleanInput(`listContains(${LIST}, ${ITEM})`);\n    };\n    inputLibrary['looks_backdropnumbername'] = function (util) {\n        const NUMBER_NAME = util.getField('NUMBER_NAME');\n        if (NUMBER_NAME === 'number') {\n            return util.numberInput('(self.currentCostumeIndex + 1)');\n        }\n        else {\n            return util.stringInput('self.costumes[self.currentCostumeIndex].name');\n        }\n    };\n    inputLibrary['looks_backdrops'] = function (util) {\n        return util.fieldInput('BACKDROP');\n    };\n    inputLibrary['looks_costume'] = function (util) {\n        return util.fieldInput('COSTUME');\n    };\n    inputLibrary['looks_costumenumbername'] = function (util) {\n        const NUMBER_NAME = util.getField('NUMBER_NAME');\n        if (NUMBER_NAME === 'number') {\n            return util.numberInput('(S.currentCostumeIndex + 1)');\n        }\n        else {\n            return util.stringInput('S.costumes[S.currentCostumeIndex].name');\n        }\n    };\n    inputLibrary['looks_size'] = function (util) {\n        return util.numberInput('Math.round(S.scale * 100)');\n    };\n    inputLibrary['makeymakey_menu_KEY'] = function (util) {\n        return util.fieldInput('KEY');\n    };\n    inputLibrary['makeymakey_menu_SEQUENCE'] = function (util) {\n        return util.fieldInput('SEQUENCE');\n    };\n    inputLibrary['matrix'] = function (util) {\n        return util.fieldInput('MATRIX');\n    };\n    inputLibrary['motion_direction'] = function (util) {\n        return util.numberInput('S.direction');\n    };\n    inputLibrary['motion_glideto_menu'] = function (util) {\n        return util.fieldInput('TO');\n    };\n    inputLibrary['motion_goto_menu'] = function (util) {\n        return util.fieldInput('TO');\n    };\n    inputLibrary['motion_pointtowards_menu'] = function (util) {\n        return util.fieldInput('TOWARDS');\n    };\n    inputLibrary['motion_xposition'] = function (util) {\n        return util.numberInput('S.scratchX');\n    };\n    inputLibrary['motion_yposition'] = function (util) {\n        return util.numberInput('S.scratchY');\n    };\n    inputLibrary['music_getTempo'] = function (util) {\n        return util.numberInput('self.tempoBPM');\n    };\n    inputLibrary['music_menu_DRUM'] = function (util) {\n        return util.fieldInput('DRUM');\n    };\n    inputLibrary['music_menu_INSTRUMENT'] = function (util) {\n        return util.fieldInput('INSTRUMENT');\n    };\n    inputLibrary['note'] = function (util) {\n        return util.fieldInput('NOTE');\n    };\n    inputLibrary['operator_add'] = function (util) {\n        const NUM1 = util.getInput('NUM1', 'number');\n        const NUM2 = util.getInput('NUM2', 'number');\n        const input = util.numberInput(`(${NUM1} + ${NUM2})`);\n        input.enableFlag(1);\n        return input;\n    };\n    inputLibrary['operator_and'] = function (util) {\n        const OPERAND1 = util.getInput('OPERAND1', 'any');\n        const OPERAND2 = util.getInput('OPERAND2', 'any');\n        return util.booleanInput(`(${OPERAND1} && ${OPERAND2})`);\n    };\n    inputLibrary['operator_contains'] = function (util) {\n        const STRING1 = util.getInput('STRING1', 'string');\n        const STRING2 = util.getInput('STRING2', 'string');\n        return util.booleanInput(`stringContains(${STRING1}, ${STRING2})`);\n    };\n    inputLibrary['operator_divide'] = function (util) {\n        const NUM1 = util.getInput('NUM1', 'number');\n        const NUM2 = util.getInput('NUM2', 'number');\n        const input = util.numberInput(`(${NUM1} / ${NUM2})`);\n        input.enableFlag(1);\n        return input;\n    };\n    inputLibrary['operator_equals'] = function (util) {\n        const OPERAND1 = util.getInput('OPERAND1', 'any');\n        const OPERAND2 = util.getInput('OPERAND2', 'any');\n        if (!OPERAND1.potentialNumber || !OPERAND2.potentialNumber) {\n            return util.booleanInput(`strEqual(${OPERAND1}, ${OPERAND2})`);\n        }\n        if (P.config.experimentalOptimizations) {\n            if (OPERAND1.type === 'number') {\n                return util.booleanInput(`numEqualExperimental(${OPERAND1}, ${OPERAND2})`);\n            }\n            if (OPERAND2.type === 'number') {\n                return util.booleanInput(`numEqualExperimental(${OPERAND2}, ${OPERAND1})`);\n            }\n        }\n        return util.booleanInput(`equal(${OPERAND1}, ${OPERAND2})`);\n    };\n    inputLibrary['operator_gt'] = function (util) {\n        const OPERAND1 = util.getInput('OPERAND1', 'any');\n        const OPERAND2 = util.getInput('OPERAND2', 'any');\n        if (P.config.experimentalOptimizations) {\n            if (OPERAND1.type === 'number') {\n                return util.booleanInput(`numGreaterExperimental(${OPERAND1}, ${OPERAND2})`);\n            }\n        }\n        return util.booleanInput(`(compare(${OPERAND1}, ${OPERAND2}) === 1)`);\n    };\n    inputLibrary['operator_join'] = function (util) {\n        const STRING1 = util.getInput('STRING1', 'string');\n        const STRING2 = util.getInput('STRING2', 'string');\n        return util.stringInput(`(${STRING1} + ${STRING2})`);\n    };\n    inputLibrary['operator_length'] = function (util) {\n        const STRING = util.getInput('STRING', 'string');\n        return util.numberInput(`(${STRING}).length`);\n    };\n    inputLibrary['operator_letter_of'] = function (util) {\n        const STRING = util.getInput('STRING', 'string');\n        const LETTER = util.getInput('LETTER', 'number');\n        return util.stringInput(`((${STRING})[(${LETTER} | 0) - 1] || \"\")`);\n    };\n    inputLibrary['operator_lt'] = function (util) {\n        const OPERAND1 = util.getInput('OPERAND1', 'any');\n        const OPERAND2 = util.getInput('OPERAND2', 'any');\n        if (P.config.experimentalOptimizations) {\n            if (OPERAND1.type === 'number') {\n                return util.booleanInput(`numLessExperimental(${OPERAND1}, ${OPERAND2})`);\n            }\n        }\n        return util.booleanInput(`(compare(${OPERAND1}, ${OPERAND2}) === -1)`);\n    };\n    inputLibrary['operator_mathop'] = function (util) {\n        const OPERATOR = util.getField('OPERATOR');\n        const NUM = util.getInput('NUM', 'number');\n        switch (OPERATOR) {\n            case 'abs':\n                return util.numberInput(`Math.abs(${NUM})`);\n            case 'floor':\n                return util.numberInput(`Math.floor(${NUM})`);\n            case 'sqrt': {\n                const input = util.numberInput(`Math.sqrt(${NUM})`);\n                input.enableFlag(1);\n                return input;\n            }\n            case 'ceiling':\n                return util.numberInput(`Math.ceil(${NUM})`);\n            case 'cos':\n                return util.numberInput(`(Math.round(Math.cos(${NUM} * Math.PI / 180) * 1e10) / 1e10)`);\n            case 'sin':\n                return util.numberInput(`(Math.round(Math.sin(${NUM} * Math.PI / 180) * 1e10) / 1e10)`);\n            case 'tan':\n                return util.numberInput(`tan3(${NUM})`);\n            case 'asin':\n                return util.numberInput(`(Math.asin(${NUM}) * 180 / Math.PI)`);\n            case 'acos':\n                return util.numberInput(`(Math.acos(${NUM}) * 180 / Math.PI)`);\n            case 'atan':\n                return util.numberInput(`(Math.atan(${NUM}) * 180 / Math.PI)`);\n            case 'ln':\n                return util.numberInput(`Math.log(${NUM})`);\n            case 'log':\n                return util.numberInput(`(Math.log(${NUM}) / Math.LN10)`);\n            case 'e ^':\n                return util.numberInput(`Math.exp(${NUM})`);\n            case '10 ^':\n                return util.numberInput(`Math.pow(10, ${NUM})`);\n            default:\n                return util.numberInput('0');\n        }\n    };\n    inputLibrary['operator_mod'] = function (util) {\n        const NUM1 = util.getInput('NUM1', 'number');\n        const NUM2 = util.getInput('NUM2', 'number');\n        return util.numberInput(`mod(${NUM1}, ${NUM2})`);\n    };\n    inputLibrary['operator_multiply'] = function (util) {\n        const NUM1 = util.getInput('NUM1', 'number');\n        const NUM2 = util.getInput('NUM2', 'number');\n        const input = util.numberInput(`(${NUM1} * ${NUM2})`);\n        input.enableFlag(1);\n        return input;\n    };\n    inputLibrary['operator_not'] = function (util) {\n        const OPERAND = util.getInput('OPERAND', 'any');\n        return util.booleanInput(`!${OPERAND}`);\n    };\n    inputLibrary['operator_or'] = function (util) {\n        const OPERAND1 = util.getInput('OPERAND1', 'any');\n        const OPERAND2 = util.getInput('OPERAND2', 'any');\n        return util.booleanInput(`(${OPERAND1} || ${OPERAND2})`);\n    };\n    inputLibrary['operator_random'] = function (util) {\n        const FROM = util.getInput('FROM', 'string');\n        const TO = util.getInput('TO', 'string');\n        return util.numberInput(`random3(${FROM}, ${TO})`);\n    };\n    inputLibrary['operator_round'] = function (util) {\n        const NUM = util.getInput('NUM', 'number');\n        return util.numberInput(`Math.round(${NUM})`);\n    };\n    inputLibrary['operator_subtract'] = function (util) {\n        const NUM1 = util.getInput('NUM1', 'number');\n        const NUM2 = util.getInput('NUM2', 'number');\n        const input = util.numberInput(`(${NUM1} - ${NUM2})`);\n        input.enableFlag(1);\n        return input;\n    };\n    inputLibrary['pen_menu_colorParam'] = function (util) {\n        return util.fieldInput('colorParam');\n    };\n    inputLibrary['sensing_answer'] = function (util) {\n        return util.stringInput('self.answer');\n    };\n    inputLibrary['sensing_coloristouchingcolor'] = function (util) {\n        const COLOR = util.getInput('COLOR', 'color');\n        const COLOR2 = util.getInput('COLOR2', 'color');\n        return util.booleanInput(`S.colorTouchingColor(${COLOR}, ${COLOR2})`);\n    };\n    inputLibrary['sensing_current'] = function (util) {\n        const CURRENTMENU = util.getField('CURRENTMENU').toLowerCase();\n        switch (CURRENTMENU) {\n            case 'year': return util.numberInput('new Date().getFullYear()');\n            case 'month': return util.numberInput('(new Date().getMonth() + 1)');\n            case 'date': return util.numberInput('new Date().getDate()');\n            case 'dayofweek': return util.numberInput('(new Date().getDay() + 1)');\n            case 'hour': return util.numberInput('new Date().getHours()');\n            case 'minute': return util.numberInput('new Date().getMinutes()');\n            case 'second': return util.numberInput('new Date().getSeconds()');\n        }\n        return util.numberInput('0');\n    };\n    inputLibrary['sensing_dayssince2000'] = function (util) {\n        return util.numberInput('((Date.now() - epoch) / 86400000)');\n    };\n    inputLibrary['sensing_distanceto'] = function (util) {\n        const DISTANCETOMENU = util.getInput('DISTANCETOMENU', 'any');\n        return util.numberInput(`S.distanceTo(${DISTANCETOMENU})`);\n    };\n    inputLibrary['sensing_distancetomenu'] = function (util) {\n        return util.fieldInput('DISTANCETOMENU');\n    };\n    inputLibrary['sensing_keyoptions'] = function (util) {\n        return util.fieldInput('KEY_OPTION');\n    };\n    inputLibrary['sensing_keypressed'] = function (util) {\n        const KEY_OPTION = util.getInput('KEY_OPTION', 'string');\n        return util.booleanInput(`!!self.keys[getKeyCode3(${KEY_OPTION})]`);\n    };\n    inputLibrary['sensing_loud'] = function (util) {\n        util.stage.initMicrophone();\n        return util.booleanInput('(self.microphone.getLoudness() > 10)');\n    };\n    inputLibrary['sensing_loudness'] = function (util) {\n        util.stage.initMicrophone();\n        return util.numberInput('self.microphone.getLoudness()');\n    };\n    inputLibrary['sensing_mousedown'] = function (util) {\n        return util.booleanInput('self.mousePressed');\n    };\n    inputLibrary['sensing_mousex'] = function (util) {\n        return util.numberInput('self.mouseX');\n    };\n    inputLibrary['sensing_mousey'] = function (util) {\n        return util.numberInput('self.mouseY');\n    };\n    inputLibrary['sensing_of'] = function (util) {\n        const PROPERTY = util.sanitizedString(util.getField('PROPERTY'));\n        const OBJECT = util.getInput('OBJECT', 'string');\n        return util.anyInput(`attribute(${PROPERTY}, ${OBJECT})`);\n    };\n    inputLibrary['sensing_of_object_menu'] = function (util) {\n        return util.fieldInput('OBJECT');\n    };\n    inputLibrary['sensing_timer'] = function (util) {\n        return util.numberInput('((runtime.now() - runtime.timerStart) / 1000)');\n    };\n    inputLibrary['sensing_touchingcolor'] = function (util) {\n        const COLOR = util.getInput('COLOR', 'color');\n        return util.booleanInput(`S.touchingColor(${COLOR})`);\n    };\n    inputLibrary['sensing_touchingobject'] = function (util) {\n        const TOUCHINGOBJECTMENU = util.getInput('TOUCHINGOBJECTMENU', 'string');\n        return util.booleanInput(`S.touching(${TOUCHINGOBJECTMENU})`);\n    };\n    inputLibrary['sensing_touchingobjectmenu'] = function (util) {\n        return util.fieldInput('TOUCHINGOBJECTMENU');\n    };\n    inputLibrary['sound_sounds_menu'] = function (util) {\n        return util.fieldInput('SOUND_MENU');\n    };\n    inputLibrary['sensing_username'] = function (util) {\n        return util.stringInput('self.username');\n    };\n    inputLibrary['sound_volume'] = function (util) {\n        return util.numberInput('(S.volume * 100)');\n    };\n    inputLibrary['text2speech_menu_voices'] = function (util) {\n        return util.fieldInput('voices');\n    };\n    inputLibrary['text2speech_menu_languages'] = function (util) {\n        return util.fieldInput('languages');\n    };\n    inputLibrary['translate_menu_languages'] = function (util) {\n        return util.fieldInput('languages');\n    };\n    inputLibrary['translate_getTranslate'] = function (util) {\n        const WORDS = util.getInput('WORDS', 'string');\n        const LANGUAGE = util.getInput('LANGUAGE', 'string');\n        return WORDS;\n    };\n    inputLibrary['translate_getViewerLanguage'] = function (util) {\n        return util.sanitizedInput('English');\n    };\n    inputLibrary['videoSensing_menu_VIDEO_STATE'] = function (util) {\n        return util.fieldInput('VIDEO_STATE');\n    };\n    const noopInput = (util) => util.anyInput('undefined');\n    inputLibrary['motion_yscroll'] = noopInput;\n    inputLibrary['motion_xscroll'] = noopInput;\n    inputLibrary['sensing_userid'] = noopInput;\n    hatLibrary['control_start_as_clone'] = {\n        handle(util) {\n            util.target.listeners.whenCloned.push(util.startingFunction);\n        },\n    };\n    hatLibrary['event_whenbackdropswitchesto'] = {\n        handle(util) {\n            const BACKDROP = util.getField('BACKDROP').toLowerCase();\n            if (!util.target.listeners.whenSceneStarts[BACKDROP]) {\n                util.target.listeners.whenSceneStarts[BACKDROP] = [];\n            }\n            util.target.listeners.whenSceneStarts[BACKDROP].push(util.startingFunction);\n        },\n    };\n    hatLibrary['event_whenbroadcastreceived'] = {\n        handle(util) {\n            const BROADCAST_OPTION = util.getField('BROADCAST_OPTION').toLowerCase();\n            if (!util.target.listeners.whenIReceive[BROADCAST_OPTION]) {\n                util.target.listeners.whenIReceive[BROADCAST_OPTION] = [];\n            }\n            util.target.listeners.whenIReceive[BROADCAST_OPTION].push(util.startingFunction);\n        },\n    };\n    hatLibrary['event_whenflagclicked'] = {\n        handle(util) {\n            util.target.listeners.whenGreenFlag.push(util.startingFunction);\n        },\n    };\n    hatLibrary['event_whengreaterthan'] = {\n        precompile(compiler, hat) {\n            const WHENGREATERTHANMENU = compiler.getField(hat, 'WHENGREATERTHANMENU');\n            const VALUE = compiler.compileInput(hat, 'VALUE', 'number');\n            let executeWhen = 'false';\n            let stallUntil = 'false';\n            switch (WHENGREATERTHANMENU.toLowerCase()) {\n                case 'timer':\n                    executeWhen = `runtime.whenTimerMSecs / 1000 > ${VALUE}`;\n                    stallUntil = `runtime.whenTimerMSecs / 1000 <= ${VALUE}`;\n                    break;\n                case 'loudness':\n                    compiler.target.stage.initMicrophone();\n                    executeWhen = `self.microphone.getLoudness() > ${VALUE}`;\n                    stallUntil = `self.microphone.getLoudness() <= ${VALUE}`;\n                    break;\n                default:\n                    console.warn('unknown WHENGREATERTHANMENU', WHENGREATERTHANMENU);\n            }\n            let source = '';\n            source += 'if (!R.init) { R.init = true; R.stalled = false; }\\n';\n            source += `if (R.stalled && (${stallUntil})) { R.stalled = false; }\\n`;\n            source += `else if (!R.stalled && (${executeWhen})) { R.stalled = true;\\n`;\n            return source;\n        },\n        postcompile(compiler, source, hat) {\n            source += '}\\n';\n            source += `forceQueue(${compiler.target.fns.length});`;\n            return source;\n        },\n        handle(util) {\n            util.target.listeners.edgeActivated.push(util.startingFunction);\n        },\n    };\n    hatLibrary['event_whenkeypressed'] = {\n        handle(util) {\n            const KEY_OPTION = util.getField('KEY_OPTION');\n            const key = P.runtime.getKeyCode(KEY_OPTION);\n            util.target.addWhenKeyPressedHandler(key, util.startingFunction);\n        },\n    };\n    hatLibrary['event_whenstageclicked'] = {\n        handle(util) {\n            util.target.listeners.whenClicked.push(util.startingFunction);\n        },\n    };\n    hatLibrary['event_whenthisspriteclicked'] = {\n        handle(util) {\n            util.target.listeners.whenClicked.push(util.startingFunction);\n        },\n    };\n    function makeymakeyParseKey(key) {\n        key = key.toLowerCase();\n        if (key === 'up' || key === 'down' || key === 'left' || key === 'right') {\n            return P.runtime.getKeyCode(key + ' arrow');\n        }\n        return P.runtime.getKeyCode(key);\n    }\n    hatLibrary['makeymakey_whenMakeyKeyPressed'] = {\n        handle(util) {\n            const KEY = util.getInput('KEY', 'string');\n            try {\n                const keyValue = '' + util.evaluateInputOnce(KEY);\n                if (typeof keyValue !== 'string')\n                    throw new Error('cannot accept type: ' + typeof keyValue);\n                var keyCode = makeymakeyParseKey(keyValue);\n            }\n            catch (e) {\n                util.compiler.warn('makeymakey key generation error', e);\n                return;\n            }\n            const key = P.runtime.getKeyCode(keyCode);\n            util.target.addWhenKeyPressedHandler(key, util.startingFunction);\n        },\n    };\n    hatLibrary['procedures_definition'] = {\n        handle(util) {\n            const customBlockId = util.block.inputs.custom_block[1];\n            const mutation = util.compiler.blocks[customBlockId].mutation;\n            const proccode = mutation.proccode;\n            if (!util.target.procedures[proccode]) {\n                const warp = typeof mutation.warp === 'string' ? mutation.warp === 'true' : mutation.warp;\n                const argumentNames = JSON.parse(mutation.argumentnames);\n                const procedure = new P.sb3.Scratch3Procedure(util.startingFunction, warp, argumentNames);\n                util.target.procedures[proccode] = procedure;\n            }\n        },\n        postcompile(compiler, source, hat) {\n            return source + 'endCall(); return;\\n';\n        },\n        precompile(compiler, hat) {\n            const customBlockId = hat.inputs.custom_block[1];\n            const mutation = compiler.blocks[customBlockId].mutation;\n            const warp = typeof mutation.warp === 'string' ? mutation.warp === 'true' : mutation.warp;\n            const argumentNames = JSON.parse(mutation.argumentnames);\n            compiler.state.isProcedure = true;\n            compiler.state.argumentNames = argumentNames;\n            if (warp) {\n                compiler.state.isWarp = true;\n            }\n            return '';\n        },\n    };\n    watcherLibrary['data_variable'] = {\n        init(watcher) {\n            const name = watcher.params.VARIABLE;\n            watcher.target.watchers[name] = watcher;\n        },\n        set(watcher, value) {\n            const name = watcher.params.VARIABLE;\n            watcher.target.vars[name] = value;\n        },\n        evaluate(watcher) {\n            const name = watcher.params.VARIABLE;\n            return watcher.target.vars[name];\n        },\n        getLabel(watcher) {\n            return watcher.params.VARIABLE;\n        },\n    };\n    watcherLibrary['looks_backdropnumbername'] = {\n        evaluate(watcher) {\n            const target = watcher.stage;\n            const param = watcher.params.NUMBER_NAME;\n            if (param === 'number') {\n                return target.currentCostumeIndex + 1;\n            }\n            else {\n                return target.costumes[target.currentCostumeIndex].name;\n            }\n        },\n        getLabel(watcher) {\n            return 'backdrop ' + watcher.params.NUMBER_NAME;\n        },\n    };\n    watcherLibrary['looks_costumenumbername'] = {\n        evaluate(watcher) {\n            const target = watcher.target;\n            const param = watcher.params.NUMBER_NAME;\n            if (param === 'number') {\n                return target.currentCostumeIndex + 1;\n            }\n            else {\n                return target.costumes[target.currentCostumeIndex].name;\n            }\n        },\n        getLabel(watcher) {\n            return 'costume ' + watcher.params.NUMBER_NAME;\n        },\n    };\n    watcherLibrary['looks_size'] = {\n        evaluate(watcher) { return P.core.isSprite(watcher.target) ? watcher.target.scale * 100 : 100; },\n        getLabel() { return 'size'; },\n    };\n    watcherLibrary['motion_direction'] = {\n        evaluate(watcher) { return P.core.isSprite(watcher.target) ? watcher.target.direction : 0; },\n        getLabel() { return 'direction'; },\n    };\n    watcherLibrary['motion_xposition'] = {\n        evaluate(watcher) { return watcher.target.scratchX; },\n        getLabel() { return 'x position'; },\n    };\n    watcherLibrary['motion_yposition'] = {\n        evaluate(watcher) { return watcher.target.scratchY; },\n        getLabel() { return 'y position'; },\n    };\n    watcherLibrary['music_getTempo'] = {\n        evaluate(watcher) { return watcher.stage.tempoBPM; },\n        getLabel() { return 'Music: tempo'; },\n    };\n    watcherLibrary['sensing_answer'] = {\n        evaluate(watcher) { return watcher.stage.answer; },\n        getLabel() { return 'answer'; },\n    };\n    watcherLibrary['sensing_current'] = {\n        evaluate(watcher) {\n            const param = watcher.params.CURRENTMENU.toLowerCase();\n            switch (param) {\n                case 'year': return new Date().getFullYear();\n                case 'month': return new Date().getMonth() + 1;\n                case 'date': return new Date().getDate();\n                case 'dayofweek': return new Date().getDay() + 1;\n                case 'hour': return new Date().getHours();\n                case 'minute': return new Date().getMinutes();\n                case 'second': return new Date().getSeconds();\n            }\n            return 0;\n        },\n        getLabel(watcher) {\n            const param = watcher.params.CURRENTMENU.toLowerCase();\n            if (param === 'dayofweek') {\n                return 'day of week';\n            }\n            return param;\n        }\n    };\n    watcherLibrary['sensing_loudness'] = {\n        init(watcher) {\n            watcher.stage.initMicrophone();\n        },\n        evaluate(watcher) {\n            if (watcher.stage.microphone) {\n                return watcher.stage.microphone.getLoudness();\n            }\n            else {\n                return -1;\n            }\n        },\n        getLabel() { return 'loudness'; },\n    };\n    watcherLibrary['sensing_timer'] = {\n        evaluate(watcher) {\n            return (watcher.stage.runtime.now() - watcher.stage.runtime.timerStart) / 1000;\n        },\n        getLabel() { return 'timer'; },\n    };\n    watcherLibrary['sensing_username'] = {\n        evaluate(watcher) { return watcher.stage.username; },\n        getLabel() { return 'username'; },\n    };\n    watcherLibrary['sound_volume'] = {\n        evaluate(watcher) { return watcher.target.volume * 100; },\n        getLabel() { return 'volume'; },\n    };\n}());\nvar P;\n(function (P) {\n    var ext;\n    (function (ext) {\n        class Extension {\n            constructor(stage) {\n                this.stage = stage;\n            }\n            destroy() {\n            }\n            onstart() {\n            }\n            onpause() {\n            }\n            update() {\n            }\n        }\n        ext.Extension = Extension;\n    })(ext = P.ext || (P.ext = {}));\n})(P || (P = {}));\nvar P;\n(function (P) {\n    var ext;\n    (function (ext) {\n        var cloud;\n        (function (cloud) {\n            const UPDATE_INTERVAL = 1000 / 15;\n            function getAllCloudVariables(stage) {\n                const result = {};\n                for (const variable of stage.cloudVariables) {\n                    result[variable] = stage.vars[variable];\n                }\n                return result;\n            }\n            cloud.getAllCloudVariables = getAllCloudVariables;\n            function isCloudDataMessage(data) {\n                if (typeof data !== 'object' || !data) {\n                    return false;\n                }\n                return typeof data.method === 'string';\n            }\n            function isCloudSetMessage(data) {\n                return isCloudDataMessage(data) &&\n                    typeof data.name === 'string' &&\n                    typeof data.value !== 'undefined';\n            }\n            class WebSocketCloudHandler extends P.ext.Extension {\n                constructor(stage, hosts, id) {\n                    super(stage);\n                    this.id = id;\n                    this.ws = null;\n                    this.queuedVariableChanges = [];\n                    this.updateInterval = null;\n                    this.reconnectTimeout = null;\n                    this.shouldReconnect = true;\n                    this.failures = 0;\n                    this.hosts = Array.isArray(hosts) ? hosts : [hosts];\n                    this.logPrefix = '[cloud-ws ' + this.hosts[0] + ']';\n                    this.username = this.stage.username;\n                    this.interfaceStatusIndicator = document.createElement('div');\n                    this.interfaceStatusIndicator.className = 'phosphorus-cloud-status-indicator';\n                    stage.ui.appendChild(this.interfaceStatusIndicator);\n                    this.handleUpdateInterval = this.handleUpdateInterval.bind(this);\n                    this.connect();\n                }\n                variableChanged(name) {\n                    if (this.queuedVariableChanges.indexOf(name) > -1) {\n                        return;\n                    }\n                    this.queuedVariableChanges.push(name);\n                    if (this.updateInterval === null) {\n                        this.handleUpdateInterval();\n                        this.startUpdateInterval();\n                    }\n                }\n                handleUpdateInterval() {\n                    if (this.queuedVariableChanges.length === 0) {\n                        this.stopUpdateInterval();\n                        return;\n                    }\n                    if (this.ws === null || this.ws.readyState !== this.ws.OPEN || this.ws.bufferedAmount > 16384) {\n                        return;\n                    }\n                    const variableName = this.queuedVariableChanges.shift();\n                    const value = this.getVariable(variableName);\n                    this.send({\n                        method: 'set',\n                        name: variableName,\n                        value: value,\n                    });\n                }\n                send(data) {\n                    if (!this.ws)\n                        return;\n                    this.ws.send(JSON.stringify(data));\n                }\n                getVariable(name) {\n                    return this.stage.vars[name];\n                }\n                setVariable(name, value) {\n                    this.stage.vars[name] = value;\n                }\n                terminateConnection(code = 1000) {\n                    if (this.ws !== null) {\n                        this.ws.close(code);\n                        this.ws = null;\n                    }\n                }\n                connect() {\n                    if (this.ws !== null) {\n                        throw new Error('already connected');\n                    }\n                    this.setStatusText('Connecting...');\n                    console.log(this.logPrefix, 'connecting');\n                    this.ws = new WebSocket(this.hosts[this.failures % this.hosts.length]);\n                    this.shouldReconnect = true;\n                    this.ws.onopen = () => {\n                        console.log(this.logPrefix, 'connected');\n                        this.setStatusText('Connected');\n                        this.setStatusVisible(false);\n                        this.failures = 0;\n                        this.send({\n                            method: 'handshake',\n                            project_id: this.id,\n                            user: this.username\n                        });\n                    };\n                    this.ws.onmessage = (e) => {\n                        try {\n                            const lines = e.data.split('\\n');\n                            for (const line of lines) {\n                                const data = JSON.parse(line);\n                                this.handleMessage(data);\n                            }\n                            if (!this.stage.runtime.isRunning) {\n                                this.stage.draw();\n                            }\n                        }\n                        catch (err) {\n                            console.warn('error parsing cloud server message', e.data, err);\n                        }\n                    };\n                    this.ws.onclose = (e) => {\n                        const code = e.code;\n                        this.ws = null;\n                        console.warn(this.logPrefix, 'closed', code);\n                        if (code === 4002) {\n                            this.setStatusText('Username is invalid. Change your username to connect.');\n                            this.hideStatusAfterDelay();\n                            console.error(this.logPrefix, 'error: Username');\n                        }\n                        else if (code === 4004) {\n                            this.setStatusText('Cloud variables are disabled for this project.');\n                            this.hideStatusAfterDelay();\n                            console.error(this.logPrefix, 'error: Project is disabled.');\n                        }\n                        else {\n                            this.reconnect();\n                        }\n                    };\n                    this.ws.onerror = (e) => {\n                        console.warn(this.logPrefix, 'error', e);\n                    };\n                }\n                reconnect() {\n                    if (!this.shouldReconnect) {\n                        return;\n                    }\n                    this.terminateConnection();\n                    if (this.reconnectTimeout) {\n                        clearTimeout(this.reconnectTimeout);\n                    }\n                    else {\n                        this.failures++;\n                    }\n                    this.setStatusText('Connection lost, reconnecting...');\n                    const delayTime = 2 ** this.failures * 1000 * Math.random();\n                    console.log(this.logPrefix, 'reconnecting in', delayTime);\n                    this.reconnectTimeout = setTimeout(() => {\n                        this.reconnectTimeout = null;\n                        this.connect();\n                    }, delayTime);\n                }\n                disconnect() {\n                    console.log(this.logPrefix, 'disconnecting');\n                    this.shouldReconnect = false;\n                    this.terminateConnection();\n                }\n                handleMessage(data) {\n                    if (!isCloudSetMessage(data)) {\n                        return;\n                    }\n                    const { name: variableName, value } = data;\n                    if (this.stage.cloudVariables.indexOf(variableName) === -1) {\n                        throw new Error('invalid variable name');\n                    }\n                    this.setVariable(variableName, value);\n                }\n                startUpdateInterval() {\n                    if (this.updateInterval !== null) {\n                        return;\n                    }\n                    this.updateInterval = setInterval(this.handleUpdateInterval, UPDATE_INTERVAL);\n                }\n                stopUpdateInterval() {\n                    if (this.updateInterval === null) {\n                        return;\n                    }\n                    clearInterval(this.updateInterval);\n                    this.updateInterval = null;\n                }\n                setStatusText(text) {\n                    this.interfaceStatusIndicator.textContent = ` ${text}`;\n                    this.setStatusVisible(true);\n                }\n                setStatusVisible(visible) {\n                    clearTimeout(this.hideStatusTimeout);\n                    this.interfaceStatusIndicator.classList.toggle('phosphorus-cloud-status-indicator-hidden', !visible);\n                }\n                hideStatusAfterDelay() {\n                    this.hideStatusTimeout = setTimeout(() => {\n                        this.setStatusVisible(false);\n                    }, 4000);\n                }\n                onstart() {\n                    if (this.queuedVariableChanges.length > 0) {\n                        this.startUpdateInterval();\n                    }\n                }\n                onpause() {\n                    this.stopUpdateInterval();\n                }\n                update() {\n                    if (this.stage.username !== this.username) {\n                        console.log(this.logPrefix, 'username changed to', this.stage.username);\n                        this.username = this.stage.username;\n                        this.terminateConnection(4100);\n                        this.reconnect();\n                    }\n                }\n                destroy() {\n                    this.stopUpdateInterval();\n                    this.disconnect();\n                }\n            }\n            cloud.WebSocketCloudHandler = WebSocketCloudHandler;\n            class LocalStorageCloudHandler extends P.ext.Extension {\n                constructor(stage, id) {\n                    super(stage);\n                    this.storageKey = 'cloud-data:' + id;\n                    this.load();\n                    this.save = this.save.bind(this);\n                }\n                variableChanged(name) {\n                    this.save();\n                }\n                load() {\n                    try {\n                        const savedData = localStorage.getItem(this.storageKey);\n                        if (savedData === null) {\n                            return;\n                        }\n                        const parsedData = JSON.parse(savedData);\n                        for (const key of Object.keys(parsedData)) {\n                            if (this.stage.cloudVariables.indexOf(key) > -1) {\n                                this.stage.vars[key] = parsedData[key];\n                            }\n                        }\n                    }\n                    catch (e) {\n                        console.warn('cannot read from localStorage', e);\n                    }\n                }\n                save() {\n                    try {\n                        localStorage.setItem(this.storageKey, JSON.stringify(getAllCloudVariables(this.stage)));\n                    }\n                    catch (e) {\n                        console.warn('cannot save to localStorage', e);\n                    }\n                }\n            }\n            cloud.LocalStorageCloudHandler = LocalStorageCloudHandler;\n        })(cloud = ext.cloud || (ext.cloud = {}));\n    })(ext = P.ext || (P.ext = {}));\n})(P || (P = {}));\n/*!\nParts of this file (microphone.ts) are derived from https://github.com/LLK/scratch-audio/blob/develop/src/Loudness.js\n*/\nvar P;\n(function (P) {\n    var ext;\n    (function (ext) {\n        var microphone;\n        (function (microphone_1) {\n            let microphone = null;\n            let state = 0;\n            const CACHE_TIME = 1000 / 30;\n            function createAnalyzerDataArray(analyzer) {\n                if (!!analyzer.getFloatTimeDomainData) {\n                    return new Float32Array(analyzer.fftSize);\n                }\n                else if (!!analyzer.getByteTimeDomainData) {\n                    return new Uint8Array(analyzer.fftSize);\n                }\n                else {\n                    throw new Error('Analyzer node does not support getFloatTimeDomainData or getByteTimeDomainData');\n                }\n            }\n            function connect() {\n                if (state !== 0) {\n                    return;\n                }\n                if (!P.audio.context) {\n                    console.warn('Cannot connect to microphone without audio context.');\n                    state = 3;\n                    return;\n                }\n                if (!navigator.mediaDevices) {\n                    console.warn('Cannot access media devices, probably running in insecure (non-HTTPS) context.');\n                    state = 3;\n                    return;\n                }\n                state = 2;\n                navigator.mediaDevices.getUserMedia({ audio: true })\n                    .then((mediaStream) => {\n                    const source = P.audio.context.createMediaStreamSource(mediaStream);\n                    const analyzer = P.audio.context.createAnalyser();\n                    if (!analyzer.getFloatTimeDomainData) {\n                        throw new Error('Missing API getFloatTimeDomainData');\n                    }\n                    source.connect(analyzer);\n                    microphone = {\n                        source: source,\n                        stream: mediaStream,\n                        analyzer,\n                        dataArray: createAnalyzerDataArray(analyzer),\n                        lastValue: -1,\n                        lastCheck: 0,\n                    };\n                    state = 1;\n                })\n                    .catch((err) => {\n                    console.warn('Cannot connect to microphone: ' + err);\n                    state = 3;\n                });\n            }\n            function reinitAnalyser() {\n                if (!microphone) {\n                    throw new Error('Microphone not connected; cannot re-init something that does not exist!');\n                }\n                const analyzer = P.audio.context.createAnalyser();\n                microphone.source.disconnect();\n                microphone.source.connect(analyzer);\n                microphone.analyzer = analyzer;\n                if (microphone.dataArray.length !== analyzer.fftSize) {\n                    microphone.dataArray = createAnalyzerDataArray(analyzer);\n                }\n            }\n            function getLoudness() {\n                if (microphone === null) {\n                    connect();\n                    return -1;\n                }\n                if (!microphone.stream.active) {\n                    return -1;\n                }\n                if (Date.now() - microphone.lastCheck < CACHE_TIME) {\n                    return microphone.lastValue;\n                }\n                let sum = 0;\n                if (microphone.dataArray instanceof Float32Array) {\n                    microphone.analyzer.getFloatTimeDomainData(microphone.dataArray);\n                    for (let i = 0; i < microphone.dataArray.length; i++) {\n                        sum += Math.pow(microphone.dataArray[i], 2);\n                    }\n                }\n                else {\n                    microphone.analyzer.getByteTimeDomainData(microphone.dataArray);\n                    for (let i = 0; i < microphone.dataArray.length; i++) {\n                        sum += Math.pow((microphone.dataArray[i] - 128) / 128, 2);\n                    }\n                }\n                let rms = Math.sqrt(sum / microphone.dataArray.length);\n                if (microphone.lastValue !== -1) {\n                    rms = Math.max(rms, microphone.lastValue * 0.6);\n                }\n                microphone.lastValue = rms;\n                rms *= 1.63;\n                rms = Math.sqrt(rms);\n                rms = Math.round(rms * 100);\n                rms = Math.min(rms, 100);\n                return rms;\n            }\n            class MicrophoneExtension extends P.ext.Extension {\n                getLoudness() {\n                    return getLoudness();\n                }\n                onstart() {\n                    if (microphone) {\n                        reinitAnalyser();\n                    }\n                }\n            }\n            microphone_1.MicrophoneExtension = MicrophoneExtension;\n        })(microphone = ext.microphone || (ext.microphone = {}));\n    })(ext = P.ext || (P.ext = {}));\n})(P || (P = {}));\nvar P;\n(function (P) {\n    var ext;\n    (function (ext) {\n        var tts;\n        (function (tts) {\n            let Gender;\n            (function (Gender) {\n                Gender[Gender[\"Male\"] = 0] = \"Male\";\n                Gender[Gender[\"Female\"] = 1] = \"Female\";\n                Gender[Gender[\"Unknown\"] = 2] = \"Unknown\";\n            })(Gender = tts.Gender || (tts.Gender = {}));\n            const femaleVoices = [\n                /Zira/,\n                /female/i,\n            ];\n            const maleVoices = [\n                /David/,\n                /\\bmale/i,\n            ];\n            const scratchVoices = {\n                ALTO: { gender: Gender.Female, pitch: 1, rate: 1 },\n                TENOR: { gender: Gender.Male, pitch: 1.5, rate: 1 },\n                GIANT: { gender: Gender.Male, pitch: 0.5, rate: 0.75 },\n                SQUEAK: { gender: Gender.Female, pitch: 2, rate: 1.5 },\n                KITTEN: { gender: Gender.Female, pitch: 2, rate: 1 },\n            };\n            class TextToSpeechExtension extends P.ext.Extension {\n                constructor(stage) {\n                    super(stage);\n                    this.language = 'en';\n                    this.voice = 'ALTO';\n                    this.supported = 'speechSynthesis' in window;\n                    if (!this.supported) {\n                        console.warn('TTS extension is not supported in this browser: it requires the speechSynthesis API https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesis');\n                    }\n                    else {\n                        speechSynthesis.getVoices();\n                    }\n                }\n                getVoiceGender(voice) {\n                    if (femaleVoices.some((i) => i.test(voice.name)))\n                        return Gender.Female;\n                    if (maleVoices.some((i) => i.test(voice.name)))\n                        return Gender.Male;\n                    return Gender.Unknown;\n                }\n                getVoiceData(voiceName) {\n                    const matchesGender = (voice) => this.getVoiceGender(voice) === voiceGender;\n                    const voice = scratchVoices[voiceName];\n                    const rate = voice.rate;\n                    const pitch = voice.pitch;\n                    const voiceGender = scratchVoices[this.voice].gender;\n                    const voices = speechSynthesis.getVoices();\n                    const matchesLanguage = voices.filter((i) => i.lang.substr(0, 2) === this.language.substr(0, 2));\n                    let candidates = matchesLanguage.filter(matchesGender);\n                    if (candidates.length === 0)\n                        candidates = matchesLanguage;\n                    if (candidates.length === 0)\n                        candidates = voices;\n                    const defaultVoice = candidates.find((i) => i.default);\n                    return {\n                        voice: defaultVoice || candidates[0] || null,\n                        pitch,\n                        rate,\n                    };\n                }\n                setVoice(voice) {\n                    if (!scratchVoices.hasOwnProperty(voice)) {\n                        return;\n                    }\n                    this.voice = voice;\n                }\n                setLanguage(language) {\n                    this.language = language;\n                }\n                speak(text) {\n                    if (!this.supported) {\n                        return Promise.resolve();\n                    }\n                    if (this.voice === 'KITTEN')\n                        text = text.replace(/\\w+?\\b/g, 'meow');\n                    return new Promise((resolve, reject) => {\n                        const end = () => resolve();\n                        const utterance = new SpeechSynthesisUtterance(text);\n                        utterance.lang = this.language;\n                        const { voice, rate, pitch } = this.getVoiceData(this.voice);\n                        utterance.voice = voice;\n                        utterance.rate = rate;\n                        utterance.pitch = pitch;\n                        utterance.onerror = end;\n                        utterance.onend = end;\n                        speechSynthesis.speak(utterance);\n                        speechSynthesis.resume();\n                    });\n                }\n                onstart() {\n                    if (this.supported) {\n                        speechSynthesis.resume();\n                    }\n                }\n                onpause() {\n                    if (this.supported) {\n                        speechSynthesis.pause();\n                    }\n                }\n                destroy() {\n                    if (this.supported) {\n                        speechSynthesis.cancel();\n                    }\n                }\n            }\n            tts.TextToSpeechExtension = TextToSpeechExtension;\n        })(tts = ext.tts || (ext.tts = {}));\n    })(ext = P.ext || (P.ext = {}));\n})(P || (P = {}));\nvar P;\n(function (P) {\n    var renderer;\n    (function (renderer_1) {\n        var canvas2d;\n        (function (canvas2d) {\n            function getCSSFilter(filters) {\n                let filter = '';\n                if (filters.brightness) {\n                    filter += 'brightness(' + (100 + filters.brightness) + '%) ';\n                }\n                if (filters.color) {\n                    if (filters.color === Infinity) {\n                        filter += 'grayscale(100%) ';\n                    }\n                    else {\n                        filter += 'hue-rotate(' + (filters.color / 200 * 360) + 'deg) ';\n                    }\n                }\n                return filter;\n            }\n            function create2dCanvas() {\n                const canvas = document.createElement('canvas');\n                canvas.width = 480;\n                canvas.height = 360;\n                const ctx = canvas.getContext('2d');\n                if (!ctx) {\n                    throw new Error('Cannot get 2d rendering context in create2dCanvas');\n                }\n                ctx.imageSmoothingEnabled = false;\n                return { canvas, ctx };\n            }\n            const COLOR_MASK = 0b111110001111100011110000;\n            class SpriteRenderer2D {\n                constructor() {\n                    this.noEffects = false;\n                    this.imageSmoothingEnabled = false;\n                    const { canvas, ctx } = create2dCanvas();\n                    this.canvas = canvas;\n                    this.ctx = ctx;\n                }\n                reset(scale) {\n                    this._reset(this.ctx, scale);\n                }\n                drawChild(c) {\n                    this._drawChild(c, this.ctx);\n                }\n                drawObjects(children) {\n                    for (var i = 0; i < children.length; i++) {\n                        var child = children[i];\n                        if (!child.visible) {\n                            continue;\n                        }\n                        this.drawChild(child);\n                    }\n                }\n                _reset(ctx, scale) {\n                    const effectiveScale = scale * P.config.scale;\n                    const width = Math.max(1, 480 * effectiveScale);\n                    const height = Math.max(1, 360 * effectiveScale);\n                    ctx.canvas.width = width;\n                    ctx.canvas.height = height;\n                    ctx.scale(effectiveScale, effectiveScale);\n                }\n                _drawChild(c, ctx) {\n                    const costume = c.costumes[c.currentCostumeIndex];\n                    if (!costume) {\n                        return;\n                    }\n                    ctx.save();\n                    const globalScale = c.stage.zoom * P.config.scale;\n                    ctx.translate(((c.scratchX + 240) * globalScale | 0) / globalScale, ((180 - c.scratchY) * globalScale | 0) / globalScale);\n                    let objectScale = costume.scale;\n                    if (P.core.isSprite(c)) {\n                        if (c.rotationStyle === 0) {\n                            ctx.rotate((c.direction - 90) * Math.PI / 180);\n                        }\n                        else if (c.rotationStyle === 1 && c.direction < 0) {\n                            ctx.scale(-1, 1);\n                        }\n                        objectScale *= c.scale;\n                    }\n                    if (costume.isScalable) {\n                        costume.requestSize(objectScale * globalScale);\n                    }\n                    ctx.imageSmoothingEnabled = costume.isScalable || this.imageSmoothingEnabled;\n                    const image = costume.getImage();\n                    const x = -costume.rotationCenterX * objectScale | 0;\n                    const y = -costume.rotationCenterY * objectScale | 0;\n                    const w = costume.width * objectScale | 0;\n                    const h = costume.height * objectScale | 0;\n                    if (w < 1 || h < 1) {\n                        ctx.restore();\n                        return;\n                    }\n                    if (!this.noEffects) {\n                        ctx.globalAlpha = Math.max(0, Math.min(1, 1 - c.filters.ghost / 100));\n                        if (c.filters.brightness !== 0 && c.filters.color === 0) {\n                            const ws = w * globalScale;\n                            const hs = h * globalScale;\n                            workingRenderer.canvas.width = ws;\n                            workingRenderer.canvas.height = hs;\n                            workingRenderer.ctx.save();\n                            workingRenderer.ctx.imageSmoothingEnabled = false;\n                            workingRenderer.ctx.translate(0, 0);\n                            workingRenderer.ctx.drawImage(image, 0, 0, ws, hs);\n                            workingRenderer.ctx.globalCompositeOperation = 'source-atop';\n                            workingRenderer.ctx.globalAlpha = Math.abs(c.filters.brightness / 100);\n                            if (c.filters.brightness > 0) {\n                                workingRenderer.ctx.fillStyle = 'white';\n                            }\n                            else {\n                                workingRenderer.ctx.fillStyle = 'black';\n                            }\n                            workingRenderer.ctx.fillRect(0, 0, ws, hs);\n                            ctx.drawImage(workingRenderer.canvas, x, y, w, h);\n                            workingRenderer.ctx.restore();\n                        }\n                        else {\n                            const filter = getCSSFilter(c.filters);\n                            if (filter !== '') {\n                                ctx.filter = filter;\n                            }\n                            ctx.drawImage(image, x, y, w, h);\n                        }\n                    }\n                    else {\n                        ctx.drawImage(image, x, y, w, h);\n                    }\n                    ctx.restore();\n                }\n            }\n            canvas2d.SpriteRenderer2D = SpriteRenderer2D;\n            const workingRenderer = new SpriteRenderer2D();\n            const workingRenderer2 = new SpriteRenderer2D();\n            class ProjectRenderer2D extends SpriteRenderer2D {\n                constructor(stage) {\n                    super();\n                    this.stage = stage;\n                    this.zoom = 1;\n                    this.penScalingEnabled = true;\n                    this.penModified = false;\n                    this.penTargetZoom = -1;\n                    this.penZoom = 1;\n                    this.stageCostumeIndex = -1;\n                    const { ctx: stageContext, canvas: stageLayer } = create2dCanvas();\n                    this.stageContext = stageContext;\n                    this.stageLayer = stageLayer;\n                    const { ctx: penContext, canvas: penLayer } = create2dCanvas();\n                    this.penContext = penContext;\n                    this.penLayer = penLayer;\n                }\n                onStageFiltersChanged() {\n                    this.renderStageCostume(this.zoom);\n                }\n                renderStageCostume(scale) {\n                    this._reset(this.stageContext, scale);\n                    this._drawChild(this.stage, this.stageContext);\n                }\n                init(root) {\n                    root.appendChild(this.stageLayer);\n                    root.appendChild(this.penLayer);\n                    root.appendChild(this.canvas);\n                }\n                destroy() {\n                }\n                drawFrame() {\n                    this.reset(this.zoom);\n                    this.drawObjects(this.stage.children);\n                    if (this.stage.currentCostumeIndex !== this.stageCostumeIndex) {\n                        this.stageCostumeIndex = this.stage.currentCostumeIndex;\n                        this.renderStageCostume(this.zoom);\n                    }\n                }\n                drawAllExcept(renderer, skip) {\n                    renderer.drawChild(this.stage);\n                    renderer.ctx.drawImage(this.penLayer, 0, 0, 480, 360);\n                    for (var i = 0; i < this.stage.children.length; i++) {\n                        var child = this.stage.children[i];\n                        if (!child.visible || child === skip) {\n                            continue;\n                        }\n                        renderer.drawChild(child);\n                    }\n                }\n                resize(zoom) {\n                    this.zoom = zoom;\n                    this.resizePen(zoom);\n                    this.renderStageCostume(this.zoom);\n                }\n                resizePen(zoom) {\n                    if (!this.penScalingEnabled) {\n                        return;\n                    }\n                    if (zoom > this.penZoom) {\n                        this.penZoom = zoom;\n                        workingRenderer.canvas.width = this.penLayer.width;\n                        workingRenderer.canvas.height = this.penLayer.height;\n                        workingRenderer.ctx.drawImage(this.penLayer, 0, 0);\n                        this._reset(this.penContext, zoom);\n                        this.penContext.drawImage(workingRenderer.canvas, 0, 0, 480, 360);\n                    }\n                    else if (!this.penModified) {\n                        this.penZoom = zoom;\n                        this._reset(this.penContext, zoom);\n                    }\n                    else {\n                        this.penTargetZoom = zoom;\n                    }\n                }\n                penClear() {\n                    this.penModified = false;\n                    if (this.penTargetZoom !== -1) {\n                        this._reset(this.penContext, this.penTargetZoom);\n                        this.penZoom = this.penTargetZoom;\n                        this.penTargetZoom = -1;\n                    }\n                    this.penContext.clearRect(0, 0, 480, 360);\n                }\n                penDot(color, size, x, y) {\n                    this.penModified = true;\n                    this.penContext.fillStyle = color.toCSS();\n                    this.penContext.beginPath();\n                    this.penContext.arc(240 + x, 180 - y, size / 2, 0, 2 * Math.PI, false);\n                    this.penContext.fill();\n                }\n                penLine(color, size, x1, y1, x2, y2) {\n                    this.penModified = true;\n                    this.penContext.lineCap = 'round';\n                    if (this.penZoom === 1) {\n                        if (size % 2 > .5 && size % 2 < 1.5) {\n                            x1 -= .5;\n                            y1 -= .5;\n                            x2 -= .5;\n                            y2 -= .5;\n                        }\n                    }\n                    this.penContext.strokeStyle = color.toCSS();\n                    this.penContext.lineWidth = size;\n                    this.penContext.beginPath();\n                    this.penContext.moveTo(240 + x1, 180 - y1);\n                    this.penContext.lineTo(240 + x2, 180 - y2);\n                    this.penContext.stroke();\n                }\n                penStamp(sprite) {\n                    this.penModified = true;\n                    this._drawChild(sprite, this.penContext);\n                }\n                spriteTouchesPoint(sprite, x, y) {\n                    const bounds = sprite.rotatedBounds();\n                    if (x < bounds.left || y < bounds.bottom || x > bounds.right || y > bounds.top || sprite.scale === 0) {\n                        return false;\n                    }\n                    const costume = sprite.costumes[sprite.currentCostumeIndex];\n                    var cx = (x - sprite.scratchX) / sprite.scale;\n                    var cy = (sprite.scratchY - y) / sprite.scale;\n                    if (sprite.rotationStyle === 0 && sprite.direction !== 90) {\n                        const d = (90 - sprite.direction) * Math.PI / 180;\n                        const ox = cx;\n                        const s = Math.sin(d), c = Math.cos(d);\n                        cx = c * ox - s * cy;\n                        cy = s * ox + c * cy;\n                    }\n                    else if (sprite.rotationStyle === 1 && sprite.direction < 0) {\n                        cx = -cx;\n                    }\n                    let positionX = Math.round(cx / costume.scale + costume.rotationCenterX);\n                    let positionY = Math.round(cy / costume.scale + costume.rotationCenterY);\n                    if (costume instanceof P.core.VectorCostume) {\n                        positionX *= costume.currentScale;\n                        positionY *= costume.currentScale;\n                    }\n                    if (!Number.isFinite(positionX) || !Number.isFinite(positionY)) {\n                        return false;\n                    }\n                    const data = costume.getContext().getImageData(positionX, positionY, 1, 1).data;\n                    return data[3] !== 0;\n                }\n                spritesIntersect(spriteA, otherSprites) {\n                    const mb = spriteA.rotatedBounds();\n                    for (var i = 0; i < otherSprites.length; i++) {\n                        const spriteB = otherSprites[i];\n                        if (!spriteB.visible || spriteA === spriteB) {\n                            continue;\n                        }\n                        const ob = spriteB.rotatedBounds();\n                        if (mb.bottom >= ob.top || ob.bottom >= mb.top || mb.left >= ob.right || ob.left >= mb.right) {\n                            continue;\n                        }\n                        const left = Math.max(mb.left, ob.left);\n                        const top = Math.min(mb.top, ob.top);\n                        const right = Math.min(mb.right, ob.right);\n                        const bottom = Math.max(mb.bottom, ob.bottom);\n                        const width = right - left;\n                        const height = top - bottom;\n                        if (width < 1 || height < 1 || width !== width || height !== height) {\n                            continue;\n                        }\n                        workingRenderer.canvas.width = width;\n                        workingRenderer.canvas.height = height;\n                        workingRenderer.ctx.save();\n                        workingRenderer.noEffects = true;\n                        workingRenderer.ctx.translate(-(left + 240), -(180 - top));\n                        workingRenderer.drawChild(spriteA);\n                        workingRenderer.ctx.globalCompositeOperation = 'source-in';\n                        workingRenderer.drawChild(spriteB);\n                        workingRenderer.noEffects = false;\n                        workingRenderer.ctx.restore();\n                        const data = workingRenderer.ctx.getImageData(0, 0, width, height).data;\n                        const length = data.length;\n                        for (var j = 0; j < length; j += 4) {\n                            if (data[j + 3]) {\n                                return true;\n                            }\n                        }\n                    }\n                    return false;\n                }\n                spriteTouchesColor(sprite, color) {\n                    const b = sprite.rotatedBounds();\n                    const width = b.right - b.left;\n                    const height = b.top - b.bottom;\n                    if (width < 1 || height < 1 || width !== width || height !== height) {\n                        return false;\n                    }\n                    workingRenderer.canvas.width = width;\n                    workingRenderer.canvas.height = height;\n                    workingRenderer.ctx.fillStyle = 'white';\n                    workingRenderer.ctx.fillRect(0, 0, width, height);\n                    workingRenderer.ctx.save();\n                    workingRenderer.ctx.translate(-(240 + b.left), -(180 - b.top));\n                    this.drawAllExcept(workingRenderer, sprite);\n                    workingRenderer.ctx.globalCompositeOperation = 'destination-in';\n                    workingRenderer.noEffects = true;\n                    workingRenderer.drawChild(sprite);\n                    workingRenderer.noEffects = false;\n                    workingRenderer.ctx.restore();\n                    const data = workingRenderer.ctx.getImageData(0, 0, width, height).data;\n                    color = color & COLOR_MASK;\n                    const length = data.length;\n                    for (var i = 0; i < length; i += 4) {\n                        if (((data[i] << 16 | data[i + 1] << 8 | data[i + 2]) & COLOR_MASK) === color && data[i + 3]) {\n                            return true;\n                        }\n                    }\n                    return false;\n                }\n                spriteColorTouchesColor(sprite, spriteColor, otherColor) {\n                    var rb = sprite.rotatedBounds();\n                    const width = rb.right - rb.left;\n                    const height = rb.top - rb.bottom;\n                    if (width < 1 || height < 1 || width !== width || height !== height) {\n                        return false;\n                    }\n                    workingRenderer.canvas.width = workingRenderer2.canvas.width = width;\n                    workingRenderer.canvas.height = workingRenderer2.canvas.height = height;\n                    workingRenderer.ctx.save();\n                    workingRenderer2.ctx.save();\n                    workingRenderer.ctx.translate(-(240 + rb.left), -(180 - rb.top));\n                    workingRenderer2.ctx.translate(-(240 + rb.left), -(180 - rb.top));\n                    this.drawAllExcept(workingRenderer, sprite);\n                    workingRenderer2.noEffects = true;\n                    workingRenderer2.drawChild(sprite);\n                    workingRenderer2.noEffects = false;\n                    workingRenderer.ctx.restore();\n                    workingRenderer2.ctx.restore();\n                    var dataA = workingRenderer.ctx.getImageData(0, 0, width, height).data;\n                    var dataB = workingRenderer2.ctx.getImageData(0, 0, width, height).data;\n                    spriteColor = spriteColor & COLOR_MASK;\n                    otherColor = otherColor & COLOR_MASK;\n                    var length = dataA.length;\n                    for (var i = 0; i < length; i += 4) {\n                        var touchesSource = ((dataB[i] << 16 | dataB[i + 1] << 8 | dataB[i + 2]) & COLOR_MASK) === spriteColor && dataB[i + 3];\n                        var touchesOther = ((dataA[i] << 16 | dataA[i + 1] << 8 | dataA[i + 2]) & COLOR_MASK) === otherColor && dataA[i + 3];\n                        if (touchesSource && touchesOther) {\n                            return true;\n                        }\n                    }\n                    return false;\n                }\n            }\n            canvas2d.ProjectRenderer2D = ProjectRenderer2D;\n        })(canvas2d = renderer_1.canvas2d || (renderer_1.canvas2d = {}));\n    })(renderer = P.renderer || (P.renderer = {}));\n})(P || (P = {}));\nvar P;\n(function (P) {\n    var m3;\n    (function (m3) {\n        function multiply(out, other) {\n            const a0 = out[0];\n            const a1 = out[1];\n            const a2 = out[2];\n            const a3 = out[3];\n            const a4 = out[4];\n            const a5 = out[5];\n            const a6 = out[6];\n            const a7 = out[7];\n            const a8 = out[8];\n            const b0 = other[0];\n            const b1 = other[1];\n            const b2 = other[2];\n            const b3 = other[3];\n            const b4 = other[4];\n            const b5 = other[5];\n            const b6 = other[6];\n            const b7 = other[7];\n            const b8 = other[8];\n            out[0] = b0 * a0 + b1 * a3 + b2 * a6;\n            out[1] = b0 * a1 + b1 * a4 + b2 * a7;\n            out[2] = b0 * a2 + b1 * a5 + b2 * a8;\n            out[3] = b3 * a0 + b4 * a3 + b5 * a6;\n            out[4] = b3 * a1 + b4 * a4 + b5 * a7;\n            out[5] = b3 * a2 + b4 * a5 + b5 * a8;\n            out[6] = b6 * a0 + b7 * a3 + b8 * a6;\n            out[7] = b6 * a1 + b7 * a4 + b8 * a7;\n            out[8] = b6 * a2 + b7 * a5 + b8 * a8;\n        }\n        m3.multiply = multiply;\n        function translation(x, y) {\n            return [\n                1, 0, 0,\n                0, 1, 0,\n                x, y, 1,\n            ];\n        }\n        m3.translation = translation;\n        function rotation(degrees) {\n            const radians = degrees * Math.PI / 180;\n            const cos = Math.cos(radians);\n            const sin = Math.sin(radians);\n            return [\n                cos, -sin, 0,\n                sin, cos, 0,\n                0, 0, 1,\n            ];\n        }\n        m3.rotation = rotation;\n        function scaling(x, y) {\n            return [\n                x, 0, 0,\n                0, y, 0,\n                0, 0, 1,\n            ];\n        }\n        m3.scaling = scaling;\n        function projection(width, height) {\n            return [\n                2 / width, 0, 0,\n                0, -2 / height, 0,\n                -1, 1, 1,\n            ];\n        }\n        m3.projection = projection;\n    })(m3 = P.m3 || (P.m3 = {}));\n})(P || (P = {}));\nvar P;\n(function (P) {\n    var renderer;\n    (function (renderer) {\n        var webgl;\n        (function (webgl) {\n            function createCanvas() {\n                const canvas = document.createElement('canvas');\n                canvas.width = 480;\n                canvas.height = 360;\n                return canvas;\n            }\n            const horizontalInvertMatrix = P.m3.scaling(-1, 1);\n            class Shader {\n                constructor(gl, program) {\n                    this.gl = gl;\n                    this.program = program;\n                    this.uniformLocations = {};\n                    this.attributeLocations = {};\n                    const activeUniforms = gl.getProgramParameter(program, this.gl.ACTIVE_UNIFORMS);\n                    for (let index = 0; index < activeUniforms; index++) {\n                        const info = gl.getActiveUniform(program, index);\n                        if (!info) {\n                            throw new Error('uniform at index ' + index + ' does not exist');\n                        }\n                        const name = info.name;\n                        const location = gl.getUniformLocation(program, name);\n                        if (!location) {\n                            throw new Error('uniform named ' + name + ' does not exist');\n                        }\n                        this.uniformLocations[name] = location;\n                    }\n                    const activeAttributes = gl.getProgramParameter(program, this.gl.ACTIVE_ATTRIBUTES);\n                    for (let index = 0; index < activeAttributes; index++) {\n                        const info = gl.getActiveAttrib(program, index);\n                        if (!info) {\n                            throw new Error('attribute at index ' + index + ' does not exist');\n                        }\n                        this.attributeLocations[info.name] = gl.getAttribLocation(program, info.name);\n                    }\n                }\n                uniform1f(name, value) {\n                    const location = this.getUniform(name);\n                    this.gl.uniform1f(location, value);\n                }\n                uniform2f(name, a, b) {\n                    const location = this.getUniform(name);\n                    this.gl.uniform2f(location, a, b);\n                }\n                uniform4f(name, a, b, c, d) {\n                    const location = this.getUniform(name);\n                    this.gl.uniform4f(location, a, b, c, d);\n                }\n                uniformMatrix3(name, value) {\n                    const location = this.getUniform(name);\n                    this.gl.uniformMatrix3fv(location, false, value);\n                }\n                hasUniform(name) {\n                    return this.uniformLocations.hasOwnProperty(name);\n                }\n                getUniform(name) {\n                    if (!this.hasUniform(name)) {\n                        throw new Error('uniform of name ' + name + ' does not exist');\n                    }\n                    return this.uniformLocations[name];\n                }\n                attributeBuffer(name, value) {\n                    if (!this.hasAttribute(name)) {\n                        throw new Error('attribute of name ' + name + ' does not exist');\n                    }\n                    const location = this.attributeLocations[name];\n                    this.gl.enableVertexAttribArray(location);\n                    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, value);\n                    this.gl.vertexAttribPointer(location, 2, this.gl.FLOAT, false, 0, 0);\n                }\n                hasAttribute(name) {\n                    return this.attributeLocations.hasOwnProperty(name);\n                }\n                getAttribute(name) {\n                    if (!this.hasAttribute(name)) {\n                        throw new Error('attribute of name ' + name + ' does not exist');\n                    }\n                    return this.attributeLocations[name];\n                }\n            }\n            class WebGLSpriteRenderer {\n                constructor() {\n                    this.globalScaleMatrix = P.m3.scaling(1, 1);\n                    this.costumeTextures = new Map();\n                    this.canvas = createCanvas();\n                    const gl = this.canvas.getContext('webgl', this.getContextOptions());\n                    if (!gl) {\n                        throw new Error('cannot get webgl rendering context');\n                    }\n                    this.gl = gl;\n                    this.noFiltersShader = this.createShader(WebGLSpriteRenderer.vertexShader, WebGLSpriteRenderer.fragmentShader, []);\n                    this.allFiltersShader = this.createShader(WebGLSpriteRenderer.vertexShader, WebGLSpriteRenderer.fragmentShader, [\n                        'ENABLE_BRIGHTNESS',\n                        'ENABLE_COLOR',\n                        'ENABLE_GHOST',\n                        'ENABLE_FISHEYE',\n                        'ENABLE_MOSAIC',\n                        'ENABLE_PIXELATE',\n                    ]);\n                    this.gl.enable(this.gl.BLEND);\n                    this.gl.blendFuncSeparate(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA, this.gl.ONE, this.gl.ONE_MINUS_SRC_ALPHA);\n                    this.quadBuffer = this.gl.createBuffer();\n                    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.quadBuffer);\n                    this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array([\n                        0, 0,\n                        0, 1,\n                        1, 0,\n                        1, 0,\n                        0, 1,\n                        1, 1,\n                    ]), this.gl.STATIC_DRAW);\n                    this.reset(1);\n                }\n                getContextOptions() {\n                    return {\n                        alpha: false,\n                    };\n                }\n                compileShader(type, source, definitions) {\n                    if (definitions) {\n                        for (const def of definitions) {\n                            source = '#define ' + def + '\\n' + source;\n                        }\n                    }\n                    const shader = this.gl.createShader(type);\n                    if (!shader) {\n                        throw new Error('Cannot create shader');\n                    }\n                    this.gl.shaderSource(shader, source);\n                    this.gl.compileShader(shader);\n                    if (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {\n                        const error = this.gl.getShaderInfoLog(shader);\n                        this.gl.deleteShader(shader);\n                        throw new Error('Shader compilation error: ' + error);\n                    }\n                    return shader;\n                }\n                compileProgram(vs, fs, definitions) {\n                    const vertexShader = this.compileShader(this.gl.VERTEX_SHADER, vs, definitions);\n                    const fragmentShader = this.compileShader(this.gl.FRAGMENT_SHADER, fs, definitions);\n                    const program = this.gl.createProgram();\n                    if (!program) {\n                        throw new Error('Cannot create program');\n                    }\n                    this.gl.attachShader(program, vertexShader);\n                    this.gl.attachShader(program, fragmentShader);\n                    this.gl.linkProgram(program);\n                    if (!this.gl.getProgramParameter(program, this.gl.LINK_STATUS)) {\n                        const error = this.gl.getProgramInfoLog(program);\n                        this.gl.deleteProgram(program);\n                        throw new Error('Program compilation error: ' + error);\n                    }\n                    return program;\n                }\n                createShader(vs, fs, definitions) {\n                    const program = this.compileProgram(vs, fs, definitions);\n                    return new Shader(this.gl, program);\n                }\n                convertToTexture(canvas) {\n                    const texture = this.gl.createTexture();\n                    if (!texture) {\n                        throw new Error('Cannot create texture');\n                    }\n                    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n                    this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, this.gl.RGBA, this.gl.UNSIGNED_BYTE, canvas);\n                    this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE);\n                    this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE);\n                    this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.NEAREST);\n                    this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.NEAREST);\n                    return texture;\n                }\n                destroy() {\n                    const extension = this.gl.getExtension('WEBGL_lose_context');\n                    if (extension) {\n                        extension.loseContext();\n                    }\n                }\n                reset(scale) {\n                    this.canvas.width = scale * 480;\n                    this.canvas.height = scale * 360;\n                    this.gl.viewport(0, 0, scale * 480, scale * 360);\n                    if (this.globalScaleMatrix[0] !== scale) {\n                        this.globalScaleMatrix = P.m3.scaling(scale, scale);\n                    }\n                    this.gl.clearColor(1, 1, 1, 1);\n                    this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n                }\n                useShader(shader) {\n                    this.gl.useProgram(shader.program);\n                    this.shader = shader;\n                }\n                drawChild(child) {\n                    const costume = child.costumes[child.currentCostumeIndex];\n                    if (!this.costumeTextures.has(costume)) {\n                        const image = costume.getImage();\n                        const texture = this.convertToTexture(image);\n                        this.costumeTextures.set(costume, texture);\n                    }\n                    this.gl.bindTexture(this.gl.TEXTURE_2D, this.costumeTextures.get(costume));\n                    this.shader.attributeBuffer('a_position', this.quadBuffer);\n                    const matrix = P.m3.projection(this.canvas.width, this.canvas.height);\n                    P.m3.multiply(matrix, this.globalScaleMatrix);\n                    P.m3.multiply(matrix, P.m3.translation(240 + child.scratchX | 0, 180 - child.scratchY | 0));\n                    if (P.core.isSprite(child)) {\n                        if (child.rotationStyle === 0 && child.direction !== 90) {\n                            P.m3.multiply(matrix, P.m3.rotation(90 - child.direction));\n                        }\n                        else if (child.rotationStyle === 1 && child.direction < 0) {\n                            P.m3.multiply(matrix, horizontalInvertMatrix);\n                        }\n                        if (child.scale !== 1) {\n                            P.m3.multiply(matrix, P.m3.scaling(child.scale, child.scale));\n                        }\n                    }\n                    if (costume.scale !== 1) {\n                        P.m3.multiply(matrix, P.m3.scaling(costume.scale, costume.scale));\n                    }\n                    P.m3.multiply(matrix, P.m3.translation(-costume.rotationCenterX, -costume.rotationCenterY));\n                    P.m3.multiply(matrix, P.m3.scaling(costume.width, costume.height));\n                    this.shader.uniformMatrix3('u_matrix', matrix);\n                    if (this.shader.hasUniform('u_opacity')) {\n                        this.shader.uniform1f('u_opacity', 1 - child.filters.ghost / 100);\n                    }\n                    if (this.shader.hasUniform('u_brightness')) {\n                        this.shader.uniform1f('u_brightness', child.filters.brightness / 100);\n                    }\n                    if (this.shader.hasUniform('u_color')) {\n                        this.shader.uniform1f('u_color', child.filters.color / 200);\n                    }\n                    if (this.shader.hasUniform('u_mosaic')) {\n                        const mosaic = Math.round((Math.abs(child.filters.mosaic) + 10) / 10);\n                        this.shader.uniform1f('u_mosaic', P.utils.clamp(mosaic, 1, 512));\n                    }\n                    if (this.shader.hasUniform('u_whirl')) {\n                        this.shader.uniform1f('u_whirl', child.filters.whirl * Math.PI / -180);\n                    }\n                    if (this.shader.hasUniform('u_fisheye')) {\n                        this.shader.uniform1f('u_fisheye', Math.max(0, (child.filters.fisheye + 100) / 100));\n                    }\n                    if (this.shader.hasUniform('u_pixelate')) {\n                        this.shader.uniform1f('u_pixelate', Math.abs(child.filters.pixelate) / 10);\n                    }\n                    if (this.shader.hasUniform('u_size')) {\n                        this.shader.uniform2f('u_size', costume.width, costume.height);\n                    }\n                    this.gl.drawArrays(this.gl.TRIANGLES, 0, 6);\n                }\n                drawTextureOverlay(texture) {\n                    const shader = this.noFiltersShader;\n                    this.gl.useProgram(shader.program);\n                    this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n                    shader.attributeBuffer('a_position', this.quadBuffer);\n                    const matrix = P.m3.projection(this.canvas.width, this.canvas.height);\n                    P.m3.multiply(matrix, this.globalScaleMatrix);\n                    P.m3.multiply(matrix, P.m3.translation(240, 180));\n                    P.m3.multiply(matrix, P.m3.scaling(1, 1));\n                    P.m3.multiply(matrix, P.m3.translation(-240, -180));\n                    P.m3.multiply(matrix, P.m3.scaling(480, 360));\n                    shader.uniformMatrix3('u_matrix', matrix);\n                    this.gl.drawArrays(this.gl.TRIANGLES, 0, 6);\n                }\n            }\n            WebGLSpriteRenderer.vertexShader = `\n    attribute vec2 a_position;\n\n    uniform mat3 u_matrix;\n\n    varying vec2 v_texcoord;\n\n    void main() {\n      gl_Position = vec4((u_matrix * vec3(a_position, 1)).xy, 0, 1);\n      v_texcoord = a_position;\n    }\n    `;\n            WebGLSpriteRenderer.fragmentShader = `\n    precision mediump float;\n\n    varying vec2 v_texcoord;\n\n    uniform sampler2D u_texture;\n\n    #ifdef ENABLE_BRIGHTNESS\n      uniform float u_brightness;\n    #endif\n    #ifdef ENABLE_COLOR\n      uniform float u_color;\n    #endif\n    #ifdef ENABLE_GHOST\n      uniform float u_opacity;\n    #endif\n    #ifdef ENABLE_MOSAIC\n      uniform float u_mosaic;\n    #endif\n    #ifdef ENABLE_WHIRL\n      uniform float u_whirl;\n    #endif\n    #ifdef ENABLE_FISHEYE\n      uniform float u_fisheye;\n    #endif\n    #ifdef ENABLE_PIXELATE\n      uniform float u_pixelate;\n      uniform vec2 u_size;\n    #endif\n    #ifdef ENABLE_COLOR_TEST\n      uniform vec3 u_colorTest;\n    #endif\n\n    const float minimumAlpha = 1.0 / 250.0;\n    const vec2 vecCenter = vec2(0.5, 0.5);\n\n    // http://lolengine.net/blog/2013/07/27/rgb-to-hsv-in-glsl\n    vec3 rgb2hsv(vec3 c) {\n      vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n      vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n      vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n      float d = q.x - min(q.w, q.y);\n      float e = 1.0e-10;\n      return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n    }\n    vec3 hsv2rgb(vec3 c) {\n      vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n      vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n      return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n    }\n\n    void main() {\n      // varyings cannot be modified\n      vec2 texcoord = v_texcoord;\n\n      #ifdef ENABLE_MOSAIC\n      if (u_mosaic != 1.0) {\n        texcoord = fract(u_mosaic * v_texcoord);\n      }\n      #endif\n\n      #ifdef ENABLE_PIXELATE\n      if (u_pixelate != 0.0) {\n        vec2 texelSize = u_size / u_pixelate;\n        texcoord = (floor(texcoord * texelSize) + vecCenter) / texelSize;\n      }\n      #endif\n\n      #ifdef ENABLE_WHIRL\n      {\n        const float radius = 0.5;\n        vec2 offset = texcoord - vecCenter;\n        float offsetMagnitude = length(offset);\n        float whirlFactor = max(1.0 - (offsetMagnitude / radius), 0.0);\n        float whirlActual = u_whirl * whirlFactor * whirlFactor;\n        float sinWhirl = sin(whirlActual);\n        float cosWhirl = cos(whirlActual);\n        mat2 rotationMatrix = mat2(\n          cosWhirl, -sinWhirl,\n          sinWhirl, cosWhirl\n        );\n        texcoord = rotationMatrix * offset + vecCenter;\n      }\n      #endif\n\n      #ifdef ENABLE_FISHEYE\n      {\n        vec2 vec = (texcoord - vecCenter) / vecCenter;\n        float vecLength = length(vec);\n        float r = pow(min(vecLength, 1.0), u_fisheye) * max(1.0, vecLength);\n        vec2 unit = vec / vecLength;\n        texcoord = vecCenter + r * unit * vecCenter;\n      }\n      #endif\n\n      vec4 color = texture2D(u_texture, texcoord);\n      #ifndef DISABLE_MINIMUM_ALPHA\n      if (color.a < minimumAlpha) {\n        discard;\n      }\n      #endif\n\n      #ifdef ENABLE_GHOST\n        color.a *= u_opacity;\n      #endif\n\n      #ifdef ENABLE_COLOR\n      if (u_color != 0.0) {\n        vec3 hsv = rgb2hsv(color.rgb);\n        // hsv.x = hue\n        // hsv.y = saturation\n        // hsv.z = value\n\n        // scratch forces all colors to have some minimal amount saturation so there is a visual change\n        const float minValue = 0.11 / 2.0;\n        const float minSaturation = 0.09;\n        if (hsv.z < minValue) hsv = vec3(0.0, 1.0, minValue);\n        else if (hsv.y < minSaturation) hsv = vec3(0.0, minSaturation, hsv.z);\n\n        hsv.x = mod(hsv.x + u_color, 1.0);\n        if (hsv.x < 0.0) hsv.x += 1.0;\n        color = vec4(hsv2rgb(hsv), color.a);\n      }\n      #endif\n\n      #ifdef ENABLE_BRIGHTNESS\n        color.rgb = clamp(color.rgb + vec3(u_brightness), 0.0, 1.0);\n      #endif\n\n      #ifdef ENABLE_COLOR_TEST\n        if (color.rgb != u_colorTest) {\n          color = vec4(0.0, 0.0, 0.0, 0.0);\n        }\n      #endif\n\n      gl_FragColor = color;\n    }\n    `;\n            class CollisionRenderer extends WebGLSpriteRenderer {\n                constructor() {\n                    super();\n                    this.gl.enable(this.gl.SCISSOR_TEST);\n                    this.gl.scissor(0, 0, 480, 360);\n                    this.gl.clearColor(0, 0, 0, 0);\n                    this.touchingShader = this.createShader(CollisionRenderer.vertexShader, WebGLSpriteRenderer.fragmentShader, ['DISABLE_MINIMUM_ALPHA']);\n                    this.shapeFiltersShader = this.createShader(CollisionRenderer.vertexShader, WebGLSpriteRenderer.fragmentShader, [\n                        'ENABLE_FISHEYE',\n                        'ENABLE_PIXELATE',\n                        'ENABLE_MOSAIC',\n                    ]);\n                    this.touchingColorShader = this.createShader(CollisionRenderer.vertexShader, WebGLSpriteRenderer.fragmentShader, [\n                        'DISABLE_MINIMUM_ALPHA',\n                        'ENABLE_COLOR_TEST',\n                    ]);\n                }\n                getContextOptions() {\n                    return {\n                        alpha: true\n                    };\n                }\n                spritesIntersect(spriteA, otherSprites) {\n                    const mb = spriteA.rotatedBounds();\n                    for (const spriteB of otherSprites) {\n                        if (!spriteB.visible || spriteA === spriteB) {\n                            continue;\n                        }\n                        const ob = spriteB.rotatedBounds();\n                        if (mb.bottom >= ob.top || ob.bottom >= mb.top || mb.left >= ob.right || ob.left >= mb.right) {\n                            continue;\n                        }\n                        const left = Math.max(mb.left, ob.left);\n                        const top = Math.min(mb.top, ob.top);\n                        const right = Math.min(mb.right, ob.right);\n                        const bottom = Math.max(mb.bottom, ob.bottom);\n                        const width = Math.max(right - left, 1);\n                        const height = Math.max(top - bottom, 1);\n                        this.gl.scissor(240 + left, 180 + bottom, width, height);\n                        this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n                        this.useShader(this.allFiltersShader);\n                        this.drawChild(spriteA);\n                        this.gl.blendFunc(this.gl.DST_ALPHA, this.gl.ZERO);\n                        this.useShader(this.touchingShader);\n                        this.drawChild(spriteB);\n                        this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n                        var data = new Uint8Array(width * height * 4);\n                        this.gl.readPixels(240 + left, 180 + bottom, width, height, this.gl.RGBA, this.gl.UNSIGNED_BYTE, data);\n                        this.gl.scissor(0, 0, 480, 360);\n                        var length = data.length;\n                        for (var j = 0; j < length; j += 4) {\n                            if (data[j + 3]) {\n                                return true;\n                            }\n                        }\n                    }\n                    return false;\n                }\n                spriteTouchesPoint(sprite, x, y) {\n                    const bounds = sprite.rotatedBounds();\n                    if (x < bounds.left || y < bounds.bottom || x > bounds.right || y > bounds.top || sprite.scale === 0) {\n                        return false;\n                    }\n                    const cx = 240 + x | 0;\n                    const cy = 180 + y | 0;\n                    this.gl.scissor(cx, cy, 1, 1);\n                    this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n                    this.useShader(this.shapeFiltersShader);\n                    this.drawChild(sprite);\n                    const result = new Uint8Array(4);\n                    this.gl.readPixels(cx, cy, 1, 1, this.gl.RGBA, this.gl.UNSIGNED_BYTE, result);\n                    this.gl.scissor(0, 0, 480, 360);\n                    return result[3] !== 0;\n                }\n            }\n            class PenRenderer extends WebGLSpriteRenderer {\n                constructor() {\n                    super();\n                    this.dirty = false;\n                    this.penCoords = new Float32Array(65536);\n                    this.penLines = new Float32Array(32768);\n                    this.penColors = new Float32Array(65536);\n                    this.penCoordsIndex = 0;\n                    this.penLinesIndex = 0;\n                    this.penColorsIndex = 0;\n                    this.penShader = this.createShader(PenRenderer.PEN_VERTEX_SHADER, PenRenderer.PEN_FRAGMENT_SHADER);\n                    this.positionBuffer = this.gl.createBuffer();\n                    this.lineBuffer = this.gl.createBuffer();\n                    this.colorBuffer = this.gl.createBuffer();\n                    this.gl.viewport(0, 0, this.canvas.width, this.canvas.height);\n                }\n                getContextOptions() {\n                    return {\n                        alpha: true,\n                        preserveDrawingBuffer: true,\n                    };\n                }\n                pendingPenOperations() {\n                    return this.penLinesIndex > 0;\n                }\n                drawPendingOperations() {\n                    const gl = this.gl;\n                    this.dirty = true;\n                    this.useShader(this.penShader);\n                    gl.bindBuffer(gl.ARRAY_BUFFER, this.positionBuffer);\n                    gl.bufferData(gl.ARRAY_BUFFER, this.penCoords, gl.STREAM_DRAW);\n                    gl.vertexAttribPointer(this.penShader.getAttribute('a_vertexData'), 4, gl.FLOAT, false, 0, 0);\n                    gl.enableVertexAttribArray(this.penShader.getAttribute('a_vertexData'));\n                    gl.bindBuffer(gl.ARRAY_BUFFER, this.lineBuffer);\n                    gl.bufferData(gl.ARRAY_BUFFER, this.penLines, gl.STREAM_DRAW);\n                    gl.vertexAttribPointer(this.penShader.getAttribute('a_lineData'), 2, gl.FLOAT, false, 0, 0);\n                    gl.enableVertexAttribArray(this.penShader.getAttribute('a_lineData'));\n                    gl.bindBuffer(gl.ARRAY_BUFFER, this.colorBuffer);\n                    gl.bufferData(gl.ARRAY_BUFFER, this.penColors, gl.STREAM_DRAW);\n                    gl.vertexAttribPointer(this.penShader.getAttribute('a_color'), 4, gl.FLOAT, false, 0, 0);\n                    gl.enableVertexAttribArray(this.penShader.getAttribute('a_color'));\n                    gl.drawArrays(gl.TRIANGLES, 0, (this.penCoordsIndex + 1) / 4);\n                    this.penCoordsIndex = 0;\n                    this.penLinesIndex = 0;\n                    this.penColorsIndex = 0;\n                }\n                buffersCanFit(size) {\n                    return this.penCoordsIndex + size > this.penCoords.length;\n                }\n                getCircleResolution(size) {\n                    return Math.max(Math.ceil(size), 3);\n                }\n                penLine(color, size, x1, y1, x2, y2) {\n                    const circleRes = this.getCircleResolution(size);\n                    if (this.buffersCanFit(24 * (circleRes + 1))) {\n                        this.drawPendingOperations();\n                    }\n                    this.penCoords[this.penCoordsIndex] = x1;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = y1;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = x2;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = y2;\n                    this.penCoordsIndex++;\n                    this.penLines[this.penLinesIndex] = -Math.PI / 2;\n                    this.penLinesIndex++;\n                    this.penLines[this.penLinesIndex] = size / 2;\n                    this.penLinesIndex++;\n                    this.penCoords[this.penCoordsIndex] = x2;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = y2;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = x1;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = y1;\n                    this.penCoordsIndex++;\n                    this.penLines[this.penLinesIndex] = Math.PI / 2;\n                    this.penLinesIndex++;\n                    this.penLines[this.penLinesIndex] = size / 2;\n                    this.penLinesIndex++;\n                    this.penCoords[this.penCoordsIndex] = x1;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = y1;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = x2;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = y2;\n                    this.penCoordsIndex++;\n                    this.penLines[this.penLinesIndex] = Math.PI / 2;\n                    this.penLinesIndex++;\n                    this.penLines[this.penLinesIndex] = size / 2;\n                    this.penLinesIndex++;\n                    this.penCoords[this.penCoordsIndex] = x1;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = y1;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = x2;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = y2;\n                    this.penCoordsIndex++;\n                    this.penLines[this.penLinesIndex] = Math.PI / 2;\n                    this.penLinesIndex++;\n                    this.penLines[this.penLinesIndex] = size / 2;\n                    this.penLinesIndex++;\n                    this.penCoords[this.penCoordsIndex] = x2;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = y2;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = x1;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = y1;\n                    this.penCoordsIndex++;\n                    this.penLines[this.penLinesIndex] = -Math.PI / 2;\n                    this.penLinesIndex++;\n                    this.penLines[this.penLinesIndex] = size / 2;\n                    this.penLinesIndex++;\n                    this.penCoords[this.penCoordsIndex] = x2;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = y2;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = x1;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = y1;\n                    this.penCoordsIndex++;\n                    this.penLines[this.penLinesIndex] = Math.PI / 2;\n                    this.penLinesIndex++;\n                    this.penLines[this.penLinesIndex] = size / 2;\n                    this.penLinesIndex++;\n                    for (var i = 0; i < circleRes; i++) {\n                        this.penCoords[this.penCoordsIndex] = x2;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = y2;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = x1;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = y1;\n                        this.penCoordsIndex++;\n                        this.penLines[this.penLinesIndex] = 0;\n                        this.penLinesIndex++;\n                        this.penLines[this.penLinesIndex] = 0;\n                        this.penLinesIndex++;\n                        this.penCoords[this.penCoordsIndex] = x2;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = y2;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = x1;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = y1;\n                        this.penCoordsIndex++;\n                        this.penLines[this.penLinesIndex] = Math.PI / 2 + i / circleRes * Math.PI;\n                        this.penLinesIndex++;\n                        this.penLines[this.penLinesIndex] = size / 2;\n                        this.penLinesIndex++;\n                        this.penCoords[this.penCoordsIndex] = x2;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = y2;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = x1;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = y1;\n                        this.penCoordsIndex++;\n                        this.penLines[this.penLinesIndex] = Math.PI / 2 + (i + 1) / circleRes * Math.PI;\n                        this.penLinesIndex++;\n                        this.penLines[this.penLinesIndex] = size / 2;\n                        this.penLinesIndex++;\n                        this.penCoords[this.penCoordsIndex] = x1;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = y1;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = x2;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = y2;\n                        this.penCoordsIndex++;\n                        this.penLines[this.penLinesIndex] = 0;\n                        this.penLinesIndex++;\n                        this.penLines[this.penLinesIndex] = 0;\n                        this.penLinesIndex++;\n                        this.penCoords[this.penCoordsIndex] = x1;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = y1;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = x2;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = y2;\n                        this.penCoordsIndex++;\n                        this.penLines[this.penLinesIndex] = Math.PI / 2 + i / circleRes * Math.PI;\n                        this.penLinesIndex++;\n                        this.penLines[this.penLinesIndex] = size / 2;\n                        this.penLinesIndex++;\n                        this.penCoords[this.penCoordsIndex] = x1;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = y1;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = x2;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = y2;\n                        this.penCoordsIndex++;\n                        this.penLines[this.penLinesIndex] = Math.PI / 2 + (i + 1) / circleRes * Math.PI;\n                        this.penLinesIndex++;\n                        this.penLines[this.penLinesIndex] = size / 2;\n                        this.penLinesIndex++;\n                    }\n                    const [r, g, b, a] = color.toParts();\n                    for (var i = 0; i < circleRes * 6 + 6; i++) {\n                        this.penColors[this.penColorsIndex] = r;\n                        this.penColorsIndex++;\n                        this.penColors[this.penColorsIndex] = g;\n                        this.penColorsIndex++;\n                        this.penColors[this.penColorsIndex] = b;\n                        this.penColorsIndex++;\n                        this.penColors[this.penColorsIndex] = a;\n                        this.penColorsIndex++;\n                    }\n                }\n                penDot(color, size, x, y) {\n                    const circleRes = this.getCircleResolution(size);\n                    if (this.buffersCanFit(12 * circleRes)) {\n                        this.drawPendingOperations();\n                    }\n                    for (var i = 1; i < circleRes; i++) {\n                        this.penCoords[this.penCoordsIndex] = x;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = y;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = x;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = x;\n                        this.penCoordsIndex++;\n                        this.penLines[this.penLinesIndex] = 0;\n                        this.penLinesIndex++;\n                        this.penLines[this.penLinesIndex] = 0;\n                        this.penLinesIndex++;\n                        this.penCoords[this.penCoordsIndex] = x;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = y;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = x + 1;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = y + 1;\n                        this.penCoordsIndex++;\n                        this.penLines[this.penLinesIndex] = Math.PI / 2 + (i - 1) / circleRes * 2 * Math.PI;\n                        this.penLinesIndex++;\n                        this.penLines[this.penLinesIndex] = size / 2;\n                        this.penLinesIndex++;\n                        this.penCoords[this.penCoordsIndex] = x;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = y;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = x + 1;\n                        this.penCoordsIndex++;\n                        this.penCoords[this.penCoordsIndex] = y + 1;\n                        this.penCoordsIndex++;\n                        this.penLines[this.penLinesIndex] = Math.PI / 2 + i / circleRes * 2 * Math.PI;\n                        this.penLinesIndex++;\n                        this.penLines[this.penLinesIndex] = size / 2;\n                        this.penLinesIndex++;\n                    }\n                    this.penCoords[this.penCoordsIndex] = x;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = y;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = x;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = x;\n                    this.penCoordsIndex++;\n                    this.penLines[this.penLinesIndex] = 0;\n                    this.penLinesIndex++;\n                    this.penLines[this.penLinesIndex] = 0;\n                    this.penLinesIndex++;\n                    this.penCoords[this.penCoordsIndex] = x;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = y;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = x + 1;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = y + 1;\n                    this.penCoordsIndex++;\n                    this.penLines[this.penLinesIndex] = Math.PI / 2 + (circleRes - 1) / circleRes * 2 * Math.PI;\n                    this.penLinesIndex++;\n                    this.penLines[this.penLinesIndex] = size / 2;\n                    this.penLinesIndex++;\n                    this.penCoords[this.penCoordsIndex] = x;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = y;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = x + 1;\n                    this.penCoordsIndex++;\n                    this.penCoords[this.penCoordsIndex] = y + 1;\n                    this.penCoordsIndex++;\n                    this.penLines[this.penLinesIndex] = Math.PI / 2;\n                    this.penLinesIndex++;\n                    this.penLines[this.penLinesIndex] = size / 2;\n                    this.penLinesIndex++;\n                    const [r, g, b, a] = color.toParts();\n                    for (var i = 0; i < circleRes * 3; i++) {\n                        this.penColors[this.penColorsIndex] = r;\n                        this.penColorsIndex++;\n                        this.penColors[this.penColorsIndex] = g;\n                        this.penColorsIndex++;\n                        this.penColors[this.penColorsIndex] = b;\n                        this.penColorsIndex++;\n                        this.penColors[this.penColorsIndex] = a;\n                        this.penColorsIndex++;\n                    }\n                }\n                penStamp(sprite) {\n                    this.dirty = true;\n                    if (this.pendingPenOperations()) {\n                        this.drawPendingOperations();\n                    }\n                    this.useShader(this.allFiltersShader);\n                    this.drawChild(sprite);\n                }\n                penClear() {\n                    this.dirty = true;\n                    this.penCoordsIndex = 0;\n                    this.penLinesIndex = 0;\n                    this.penColorsIndex = 0;\n                    this.gl.clearColor(0, 0, 0, 0);\n                    this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n                }\n            }\n            PenRenderer.PEN_VERTEX_SHADER = `\n    precision mediump float;\n\n    // [0] = x1\n    // [1] = y1\n    // [2] = x2\n    // [3] = y2\n    attribute vec4 a_vertexData;\n    // [0] = thickened vertex direction\n    // [1] = thickened vertex distance\n    attribute vec2 a_lineData;\n    // [0] = red\n    // [1] = green\n    // [2] = blue\n    // [3] = alpha\n    attribute vec4 a_color;\n\n    varying vec4 v_color;\n\n    void main() {\n      vec2 lineDir = normalize(a_vertexData.zw - a_vertexData.xy);\n\n      mat2 rot;\n      rot[0] = vec2(cos(a_lineData.x), sin(a_lineData.x));\n      rot[1] = vec2(-sin(a_lineData.x), cos(a_lineData.x));\n\n      lineDir *= rot * a_lineData.y;\n\n      vec2 p = (a_vertexData.xy + lineDir);\n      p.x /= 240.0;\n      p.y /= 180.0;\n\n      gl_Position = vec4(p, 0.0, 1.0);\n      v_color = vec4(a_color.xyz / 255.0, a_color.w);\n    }`;\n            PenRenderer.PEN_FRAGMENT_SHADER = `\n    precision mediump float;\n\n    varying vec4 v_color;\n\n    void main() {\n      gl_FragColor = v_color;\n    }`;\n            class WebGLProjectRenderer extends WebGLSpriteRenderer {\n                constructor(stage) {\n                    super();\n                    this.stage = stage;\n                    this.zoom = 1;\n                    this.collisionRenderer = new CollisionRenderer();\n                    this.penRenderer = new PenRenderer();\n                    this.fallbackRenderer = new P.renderer.canvas2d.ProjectRenderer2D(stage);\n                }\n                drawFrame() {\n                    if (this.penRenderer.pendingPenOperations()) {\n                        this.penRenderer.drawPendingOperations();\n                    }\n                    if (this.penRenderer.dirty) {\n                        this.updatePenTexture();\n                        this.penRenderer.dirty = false;\n                    }\n                    this.reset(this.zoom);\n                    this.useShader(this.allFiltersShader);\n                    this.drawChild(this.stage);\n                    if (this.penTexture) {\n                        this.drawTextureOverlay(this.penTexture);\n                        this.useShader(this.allFiltersShader);\n                    }\n                    for (var i = 0; i < this.stage.children.length; i++) {\n                        var child = this.stage.children[i];\n                        if (!child.visible) {\n                            continue;\n                        }\n                        this.drawChild(child);\n                    }\n                    this.gl.flush();\n                }\n                init(root) {\n                    root.appendChild(this.canvas);\n                }\n                destroy() {\n                    super.destroy();\n                    this.penRenderer.destroy();\n                    this.collisionRenderer.destroy();\n                }\n                onStageFiltersChanged() {\n                }\n                penLine(color, size, x1, y1, x2, y2) {\n                    this.penRenderer.penLine(color, size, x1, y1, x2, y2);\n                }\n                penDot(color, size, x, y) {\n                    this.penRenderer.penDot(color, size, x, y);\n                }\n                penStamp(sprite) {\n                    this.penRenderer.penStamp(sprite);\n                }\n                penClear() {\n                    this.penRenderer.penClear();\n                }\n                updatePenTexture() {\n                    if (this.penTexture) {\n                        this.gl.bindTexture(this.gl.TEXTURE_2D, this.penTexture);\n                        this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, this.gl.RGBA, this.gl.UNSIGNED_BYTE, this.penRenderer.canvas);\n                    }\n                    else {\n                        this.penTexture = this.convertToTexture(this.penRenderer.canvas);\n                    }\n                }\n                resize(scale) {\n                    this.zoom = scale * P.config.scale;\n                }\n                spriteTouchesPoint(sprite, x, y) {\n                    return this.collisionRenderer.spriteTouchesPoint(sprite, x, y);\n                }\n                spritesIntersect(spriteA, otherSprites) {\n                    return this.collisionRenderer.spritesIntersect(spriteA, otherSprites);\n                }\n                spriteTouchesColor(sprite, color) {\n                    return this.fallbackRenderer.spriteTouchesColor(sprite, color);\n                }\n                spriteColorTouchesColor(sprite, spriteColor, otherColor) {\n                    return this.fallbackRenderer.spriteColorTouchesColor(sprite, spriteColor, otherColor);\n                }\n            }\n            webgl.WebGLProjectRenderer = WebGLProjectRenderer;\n        })(webgl = renderer.webgl || (renderer.webgl = {}));\n    })(renderer = P.renderer || (P.renderer = {}));\n})(P || (P = {}));\n//# sourceMappingURL=phosphorus.dist.js.map"],"names":["window","Error","P","config","debug","useWebGL","supportVideoSensing","experimentalOptimizations","scale","devicePixelRatio","PROJECT_API","audio","context","AudioContext","webkitAudioContext","globalNode","createGain","gain","value","connect","destination","drums","name","baseRatio","loop","loopStart","loopEnd","attackEnd","holdEnd","decayEnd","instruments","top","SB2_SOUNDBANK_FILES","AcousticGuitar_F3","AcousticPiano_As3","AcousticPiano_C4","AcousticPiano_G4","AcousticPiano_F5","AcousticPiano_C6","AcousticPiano_Ds6","AcousticPiano_D7","AltoSax_A3","AltoSax_C6","Bassoon_C3","BassTrombone_A2_2","BassTrombone_A2_3","Cello_C2","Cello_As2","Choir_F3","Choir_F4","Choir_F5","Clarinet_C4","ElectricBass_G1","ElectricGuitar_F3","ElectricPiano_C2","ElectricPiano_C4","EnglishHorn_D4","EnglishHorn_F3","Flute_B5_1","Flute_B5_2","Marimba_C4","MusicBox_C4","Organ_G2","Pizz_A3","Pizz_E4","Pizz_G2","SteelDrum_D5","SynthLead_C4","SynthLead_C6","SynthPad_A3","SynthPad_C6","TenorSax_C3","Trombone_B3","Trumpet_E5","Vibraphone_C3","Violin_D4","Violin_A4","Violin_E5","WoodenFlute_C5","BassDrum","Bongo","Cabasa","Clap","Claves","Conga","Cowbell","Crash","Cuica","GuiroLong","GuiroShort","HiHatClosed","HiHatOpen","HiHatPedal","Maracas","SideStick","SnareDrum","Tambourine","Tom","Triangle","Vibraslap","WoodBlock","soundbank","loadSoundbankBuffer","io","getAssetManager","loadSoundbankFile","then","buffer","decodeAudio","sound","loadSoundbankSB2","loader","Promise","resolve","promises","promise","utils","settled","push","addTask","PromiseTask","all","playSpan","span","key","duration","connection","source","createBufferSource","note","time","currentTime","playbackRate","Math","pow","setValueAtTime","linearRampToValueAtTime","decayTime","start","stop","connectNode","node","ADPCM_STEPS","ADPCM_INDEX","ab","reject","cb","dv","DataView","getUint32","blocks","i","l","byteLength","String","fromCharCode","getUint8","format","getUint16","sampleRate","sample","step","code","delta","blockSize","frameCount","fact","createBuffer","channel","getChannelData","index","lastByte","offset","data","j","getInt16","decodeADPCMAudio","err1","decodeAudioData","err2","core","PenColor","constructor","this","x","y","z","a","mode","css","setRGBA","rgba","setShiftedRGBA","toHSVA","toHSLA","hsl","rgbToHSL","hsl1","hsvToHSL","hsv","rgbToHSV","hsv1","hslToHSV","toParts","rgb","hsvToRGB","rgb1","hslToRGB","toCSS","setParam","param","clamp","changeParam","max","min","copy","other","Base","isStage","isSprite","isClone","visible","scratchX","scratchY","costumes","currentCostumeIndex","sounds","soundRefs","instrument","volume","activeSounds","Set","watchers","listWatchers","vars","lists","saying","thinking","sayId","procedures","listeners","whenClicked","whenCloned","whenGreenFlag","whenIReceive","whenKeyPressed","whenSceneStarts","edgeActivated","fns","filters","color","fisheye","whirl","pixelate","mosaic","brightness","ghost","soundFilters","pitch","penSize","penColor","isPenDown","addSound","showVariable","watcher","newWatcher","createVariableWatcher","init","stage","allWatchers","setVisible","showList","createListWatcher","showNextCostume","length","updateBubble","showPreviousCostume","getCostumeName","setCostume","costume","isFinite","test","Number","isNaN","Infinity","floor","setFilter","changeFilter","resetFilters","setSoundFilter","toLowerCase","removeLimits","changeSoundFilter","resetSoundFilters","getSound","s","parseInt","round","stopSounds","stopped","disconnect","clear","stopSoundsExcept","originBase","base","delete","ask","question","say","promptTitle","style","display","textContent","hidePrompt","prompter","prompt","focus","text","bubbleContainer","document","createElement","maxWidth","minWidth","padding","border","borderRadius","background","position","font","whiteSpace","wordWrap","textAlign","cursor","pointerEvents","appendChild","bubbleText","createTextNode","bubblePointer","height","width","localPath","backgroundSize","backgroundPositionY","ui","backgroundPositionX","nodeValue","b","rotatedBounds","left","right","bottom","bcr","getBoundingClientRect","zoom","d","remove","removeChild","getAudioNode","target","variableName","listName","dotPen","renderer","penDot","stamp","penStamp","addWhenKeyPressedHandler","fn","Stage","super","children","answer","promptId","nextPromptId","rawMouseX","rawMouseY","mouseX","mouseY","mousePressed","tempoBPM","username","counter","cloudHandler","cloudVariables","microphone","tts","extensions","useSpriteFencing","runtime","Runtime","keys","any","root","classList","add","webgl","WebGLProjectRenderer","canvas2d","ProjectRenderer2D","resize","canvas","tabIndex","outline","zIndex","margin","overflow","textOverflow","boxSizing","boxShadow","webkitAppearance","promptButton","addEventListeners","_onmousedown","bind","_onmouseup","_onmousemove","_ontouchstart","_ontouchend","_ontouchmove","addEventListener","passive","_onwheel","_onkeyup","_onkeydown","submitPrompt","e","keyCode","removeEventListeners","removeEventListener","deltaY","trigger","keyEventToCode","charCodeAt","c","stopPropagation","preventDefault","shiftKey","ctrlKey","altKey","metaKey","isRunning","updateMousePosition","clickMouse","onmousedown","releaseMouse","onmouseup","onmousemove","changedTouches","t","ontouch","destroy","stopAll","pause","stopAllSounds","extension","pauseExtensions","onpause","startExtensions","onstart","updateExtensions","update","rect","clientX","clientY","setZoom","fontSize","sb3","Scratch3ListWatcher","updateList","mouseSprite","undefined","touching","isDraggable","mouseDown","triggerFor","mouseUp","onStageFiltersChanged","getObject","getObjects","result","getPosition","random","sprite","draw","drawFrame","w","showVideo","videoElement","onloadedmetadata","play","opacity","insertBefore","navigator","mediaDevices","getUserMedia","video","stream","srcObject","addExtension","initMicrophone","ext","MicrophoneExtension","initTextToSpeech","TextToSpeechExtension","setCloudHandler","removeAllClones","splice","moveTo","gotoObject","forward","setDirection","direction","thing","touchingColor","colorTouchingColor","colorA","colorB","clearPen","penClear","Sprite","rotationStyle","isDragging","dragStartX","dragStartY","dragOffsetX","dragOffsetY","rotationCenterX","rotationCenterY","mSin","sin","PI","mCos","cos","tlX","tlY","trX","trY","blX","blY","brX","brY","showRotatedBounds","bounds","div","parentNode","steps","keepInView","rb","ox","oy","penLine","degrees","clone","_clone","Object","key1","slice","spriteTouchesPoint","sprites","spritesIntersect","spriteTouchesColor","sourceColor","spriteColorTouchesColor","bounceOffEdge","dl","dt","dr","db","dir","dx","dy","abs","atan2","distanceTo","p","sqrt","pointTowards","Costume","costumeData","bitmapResolution","BitmapCostume","image","options","tagName","ctx","getContext","isScalable","drawImage","getImage","requestSize","VectorCostume","svg","Image","maxScale","calculateMaxScale","currentScale","MAX_SIZE","MAX_SCALE","render","fmt","n","costumeScale","DISABLE_RASTERIZE","ceil","userAgent","console","log","Sound","createSourceNode","ended","Watcher","targetName","valid","Procedure","warp","inputs","fonts_1","fontFamilyCache","getCSSFontFace","fontFamily","src","scratch3","Marker","Handwriting","Pixel","Curly","Serif","loadLocalFont","loadFont","blob","readers","toDataURL","url","addFontRules","fonts","cssRules","fontName","warn","doc","ownerDocument","defs","createElementNS","innerHTML","join","loadWebFont","FontFaceObserver","load","i18n","SUPPORTED_LANGUAGES","translations","defaultTranslations","language","indexOf","substring","getLanguage","translate","messageId","merge","into","addTranslations","importedLanguage","importedTranslations","translateElement","element","translatable","querySelectorAll","el","getAttribute","location","protocol","toArrayBuffer","object","fileReader","FileReader","onloadend","onerror","err","readAsArrayBuffer","readAsDataURL","toText","readAsText","globalAssetManager","soundbankSource","loadArrayBuffer","loadBlob","Request","setAssetManager","newManager","requestThrottler","maxConcurrentTasks","concurrentTasks","queue","startNextTask","shift","run","r","catch","AbstractTask","setLoader","updateLoaderProgress","updateProgress","Retry","arguments","aborted","retries","maxAttempts","async","handle","lastErr","retryIn","getRetryWarningDescription","sleep","setMaxAttempts","attempts","abort","HTTPError","message","status","urls","shouldIgnoreErrors","complete","xhr","Array","isArray","isComplete","ignoreErrors","getStatus","tryURL","XMLHttpRequest","open","responseType","onload","acceptableResponseCodes","response","readyState","statusText","onabort","send","errorToThrow","type","try","_load","Img","crossOrigin","setTimeout","Manual","markComplete","Loader","_tasks","error","calculateProgress","totalTasks","finishedTasks","task","progress","onprogress","resetTasks","cleanup","json","JSONParser","parse","parseValue","lineInfo","line","column","SyntaxError","char","charAt","next","expect","peek","skipWhitespace","parseString","parseObject","parseList","parseNumber","parseWord","NaN","number","hexString","char1","hexNumber","create","JSON","firstError","secondError","parseRotationStyle","g","h","v","f","q","hue2rgb","_reject","ms","parseColor","nValue","startsWith","hex","substr","parsedHex","player_1","PlayerError","handledByPlayer","ProjectDoesNotExistError","id","CannotAccessProjectError","LoaderIdentifier","active","cancel","isActive","Slot","_listeners","subscribe","emit","listener","LocalProjectMeta","filename","getTitle","getId","isFromScratch","getToken","isUnshared","BinaryProjectMeta","RemoteProjectMeta","title","token","unshared","loadCallbacks","startedLoading","request","replace","project_token","callback","Player","onstartload","oncleanup","onthemechange","onresume","onoptionschange","MAGIC","LARGE_Z_INDEX","projectMeta","currentLoader","fullscreenEnabled","clickToPlayContainer","className","playerContainer","setOptions","assign","DEFAULT_OPTIONS","updateFullscreen","onfullscreenchange","handleError","enableAttribute","setAttribute","disableAttribute","removeAttribute","enabled","changedOptions","turbo","theme","hasStage","applyOptionsToStage","getOptions","addControls","controlsContainer","flagTouchTimeout","clickStop","throwWithoutStage","clickPause","toggleRunning","clickFullscreen","fullscreenMode","exitFullscreen","enterFullscreen","clickFlag","clearTimeout","triggerGreenFlag","startTouchFlag","ontouchstart","enableFlag","flagButton","enablePause","pauseButton","enableStop","stopButton","enableTurbo","turboText","innerText","enableFullscreen","fullscreenButton","firstChild","framerate","fps","resetInterval","isTurbo","spriteFencing","imageSmoothingEnabled","imageSmoothing","generateUsernameIfMissing","toFixed","resume","removeClickToPlayContainer","getStage","hasProjectMeta","getProjectMeta","body","focusOnLoad","savedTheme","fullscreenElement","webkitFullscreenElement","mozCancelFullScreen","webkitCancelFullScreen","webkitExitFullscreen","paddingLeft","paddingTop","controlsHeight","offsetHeight","scrollTo","innerWidth","fullscreenPadding","innerHeight","fullscreenMaxWidth","setProperty","fullscreen","webkitIsFullScreen","applyCloudVariablesSocket","handler","cloud","WebSocketCloudHandler","cloudHost","applyCloudVariablesLocalStorage","LocalStorageCloudHandler","applyCloudVariables","policy","meta","applyAutoplayPolicy","state","showClickToPlayContainer","onclick","content","beginLoadingProject","loaderId","determineProjectType","isScratch1Project","array","Uint8Array","convertScratch1Project","sb1","ScratchSB1Converter","SB1File","projectData","zipFiles","zip","files","JSZip","file","stringify","fileName","bytes","generateAsync","fetchProject","projectHost","setStage","autoplayPolicy","getLoader","projectText","projectJson","sb2","Scratch2Loader","Scratch3Loader","projectJSON","loadAsync","projectDataText","SB3FileLoader","e1","SB2FileLoader","needsToken","loadLoader","split","pop","loadProjectFromBufferWithType","ErrorHandler","player","errorEl","errorContainer","generatedErrorLink","container","stringifyError","stack","createBugReportLink","getBugReportTitle","getBugReportBody","BUG_REPORT_LINK","encodeURIComponent","sections","getProjectInformation","href","map","trim","errorLink","attributes","handleCannotAccessProjectError","section1","marginBottom","section2","section3","handleDoesNotExistError","ProgressBar","bar","setTheme","setProgress","runtime_1","self","S","R","STACK","C","CALLS","WARP","BASE","THREAD","IMMEDIATE","VISUAL","STOPPED","epoch","Date","UTC","INSTRUMENTS","DRUMS","DIGIT","bool","compare","nx","ny","xs","ys","numLess","numGreater","equal","numEqual","numEqualExperimental","numLessExperimental","numGreaterExperimental","strEqual","stringContains","baseString","needle","mod","fractional","tmp","random3","parent","getVars","getLists","listIndex","list","contentsOfList","isSingle","getLineOfList","listContains","listIndexOf","appendToList","deleteLineOfList","insertInList","setLineOfList","watchedAppendToList","modified","watchedDeleteLineOfList","watchedDeleteAllOfList","watchedInsertInList","watchedSetLineOfList","mathFunc","tan","asin","acos","atan","LN10","exp","tan3","angle","attribute","attr","objName","o","timeAndDate","getFullYear","getMonth","getDate","getDay","getHours","getMinutes","getSeconds","getKeyCode","keyName","getKeyCode3","audioContext","playNote","spans","applySoundEffects","updateSoundEffectsOnAllSounds","playSound","startSound","save","restore","call","procedure","values","args","numargs","boolargs","calls","endCall","cloudVariableChanged","variableChanged","sceneChange","broadcast","running","bases","forceQueue","timerStart","baseTime","baseNow","currentMSecs","whenTimerMSecs","onError","startThread","replaceExisting","thread","event","arg","threads","anyThreads","concat","now","interval","setInterval","clearInterval","suspend","resetTimer","evaluateExpression","i1","thread1","createContinuation","brackets","delBrackets","shouldDelete","here","k","scopedEval","eval","ASSET_URL","Scratch2VariableWatcher","cmd","toString","isDiscrete","label","sliderMax","sliderMin","getLabel","layout","costumeIndex","xpos","ypos","heading","backgroundIndex","sceneName","tempo","timer","soundLevel","isLoud","xScroll","yScroll","getLoudness","readout","slider","buttonWrap","transform","dataset","labelEl","verticalAlign","marginLeft","button","paddingRight","Scratch2Stage","dragging","defaultWatcherX","defaultWatcherY","watcherStart","parentElement","offsetWidth","watcherMove","sw","bw","watcherEnd","touch","identifier","Scratch2Sprite","BaseSB2Loader","loadImage","loadFonts","loadBase","loadArray","loadCostume","loadSound","variables","variable","isPersistent","contents","forEach","scripts","process","ind","loadObject","loadVariableWatcher","loadMD5","baseLayerMD5","baseLayerID","asset","$image","textLayerMD5","textLayerID","$text","layers","costumeName","layer","md5","soundID","soundName","loadSVG","parser","DOMParser","parseFromString","documentElement","querySelector","DOMPurify","sanitize","IN_PLACE","USE_PROFILES","visibility","viewBox","baseVal","patchSVG","canvg","Canvg","from","XMLSerializer","serializeToString","ignoreMouse","ignoreAnimation","ignoreClear","filter","compiler","compile","hash","isAudio","btoa","project","FONTS","Donegal","Gloria","Mystery","LINE_HEIGHTS","Helvetica","nodeType","nodeName","fontWeight","size","bb","getBBox","consolidate","matrix","lines","lineHeight","tspan","hasAttribute","childNodes","idOrData","projectId","Scratch2Procedure","warnings","EVENT_SELECTORS","compileScripts","compileListener","script","nextLabel","visual","seq","varRef","val","isCloudVar","listRef","usenum","usebool","types","kind","used","numval","boolval","num","val2","less","x1","y1","beatHead","dur","beatTail","block","ref","isShow","wait","startfn","match","pre","i2","i3","variant","ASSETS_API","Scratch3Stage","listIds","varIds","Scratch3Sprite","Scratch3VariableWatcher","spriteName","opcode","params","libraryEntry","watcherLibrary","sliderStep","getValue","valueEl","sliderInput","updateLayout","evaluate","setValue","set","containerEl","row","input","sliderChanged","ListWatcherRow","indexEl","setIndex","setY","rows","firstUpdateComplete","_rowHeight","scrollTop","lastZoomLevel","scrollAhead","scrollBack","scrollDirection","_contentHeight","shouldUpdate","contentEl","bottomLabelText","getBottomLabel","bottomLabelEl","getRowHeight","endpointEl","topVisible","bottomVisible","getContentHeight","startingIndex","endingIndex","visibleRows","addRow","rowIndex","listId","createList","getTopLabel","LIST","PADDING","createLayout","topLabelEl","middleContainerEl","scrollChange","Scratch3Procedure","SVG_NAMESPACE","costumeOptions","namespaceURI","newSVG","implementation","createHTMLDocument","fixSVGNamespace","firstElementChild","unitType","SVG_LENGTHTYPE_PERCENTAGE","group","createSVGTransform","setTranslate","appendItem","every","width1","height1","textElements","usedFonts","addFont","el1","found","family","BaseSB3Loader","needsMusic","getSVG","path","getAsText","getBitmapImage","getAsImage","assetId","dataFormat","getAudioBuffer","getAsArrayBuffer","md5ext","loadWatcher","loadTarget","id1","name1","scratchList","currentCostume","sb3data","draggable","costumesPromise","soundsPromise","loadRequiredAssets","loadSoundbank","compileTargets","targets","Compiler","timeEnd","sort","layerOrder","monitors","getAsBase64","imageData","compiler_1","assertNever","CompiledInput","potentialNumber","flags","flag","hasFlag","stringInput","numberInput","anyInput","BlockUtil","getInput","compileInput","getField","fieldInput","sanitizedInput","string","sanitizedString","getVariableReference","field","getVariableField","getListReference","getVariableScope","findVariable","scope","isCloudVariable","getListScope","findList","asType","evaluateInputOnce","StatementUtil","substacksQueue","getSubstack","labelsBefore","labelCount","substack","compileSubstackInput","claimNextLabel","addLabel","write","writeLn","waitUntilSettles","waitOneTick","InputUtil","booleanInput","HatUtil","startingFunction","statementLibrary","inputLibrary","hatLibrary","costumeAndSoundNames","getHatBlocks","topLevel","getStatementCompiler","getInputCompiler","getHatCompiler","getInputFallback","convertInputType","sanitizedComment","hasOwnProperty","varInfo","listInfo","isStringLiteralPotentialNumber","isNameOfCostumeOrSound","has","compileNativeInput","native","desiredType","is","number1","parentBlock","inputName","inputBlockId","inputBlock","fieldName","fields","substackName","compileStack","getNewState","isWarp","isProcedure","argumentNames","startingBlock","util","compileHat","hat","hatCompiler","precompile","postcompile","parseResult","parseScript","parsedScript","startFn","labels","accumulator","labelStart","labelEnd","unshift","apply","hats","hatId","SUBSTACK","CLONE_OPTION","VARIABLE","VALUE","CONDITION","SUBSTACK2","TIMES","DURATION","ITEM","INDEX","BROADCAST_INPUT","EFFECT","CHANGE","FORWARD_BACKWARD","NUM","FRONT_BACK","MESSAGE","SECS","SIZE","BACKDROP","COSTUME","DX","DY","X","Y","TO","STEPS","DIRECTION","TOWARDS","STYLE","DEGREES","TEMPO","BEATS","DRUM","NOTE","INSTRUMENT","COLOR_PARAM","HUE","SHADE","COLOR","mutation","proccode","inputNames","argumentids","VOLUME","SOUND_MENU","QUESTION","label1","label2","VOICE","LANGUAGE","WORDS","VIDEO_STATE","noopStatement","lowerCaseName","NUM1","NUM2","OPERAND1","OPERAND2","STRING1","STRING2","STRING","LETTER","OPERATOR","OPERAND","FROM","COLOR2","DISTANCETOMENU","KEY_OPTION","PROPERTY","OBJECT","TOUCHINGOBJECTMENU","noopInput","BROADCAST_OPTION","WHENGREATERTHANMENU","executeWhen","stallUntil","KEY","keyValue","makeymakeyParseKey","customBlockId","custom_block","argumentnames","NUMBER_NAME","CURRENTMENU","Extension","getAllCloudVariables","hosts","ws","queuedVariableChanges","updateInterval","reconnectTimeout","shouldReconnect","failures","logPrefix","interfaceStatusIndicator","handleUpdateInterval","startUpdateInterval","stopUpdateInterval","OPEN","bufferedAmount","getVariable","method","setVariable","terminateConnection","close","setStatusText","WebSocket","onopen","setStatusVisible","project_id","user","onmessage","handleMessage","onclose","hideStatusAfterDelay","reconnect","delayTime","isCloudDataMessage","isCloudSetMessage","hideStatusTimeout","toggle","storageKey","savedData","localStorage","getItem","parsedData","setItem","microphone_1","createAnalyzerDataArray","analyzer","getFloatTimeDomainData","Float32Array","fftSize","getByteTimeDomainData","mediaStream","createMediaStreamSource","createAnalyser","dataArray","lastValue","lastCheck","sum","rms","reinitAnalyser","Gender","femaleVoices","maleVoices","scratchVoices","ALTO","gender","Female","rate","TENOR","Male","GIANT","SQUEAK","KITTEN","voice","supported","speechSynthesis","getVoices","getVoiceGender","some","Unknown","getVoiceData","voiceName","voiceGender","voices","matchesLanguage","lang","candidates","find","default","setVoice","setLanguage","speak","end","utterance","SpeechSynthesisUtterance","onend","renderer_1","create2dCanvas","COLOR_MASK","SpriteRenderer2D","noEffects","reset","_reset","drawChild","_drawChild","drawObjects","child","effectiveScale","globalScale","objectScale","rotate","globalAlpha","hs","workingRenderer","globalCompositeOperation","fillStyle","fillRect","getCSSFilter","workingRenderer2","penScalingEnabled","penModified","penTargetZoom","penZoom","stageCostumeIndex","stageContext","stageLayer","penContext","penLayer","renderStageCostume","drawAllExcept","skip","resizePen","clearRect","beginPath","arc","fill","x2","y2","lineCap","strokeStyle","lineWidth","lineTo","stroke","cx","cy","positionX","positionY","getImageData","spriteA","otherSprites","mb","spriteB","ob","spriteColor","otherColor","dataA","dataB","touchesSource","touchesOther","m3","multiply","out","a0","a1","a2","a3","a4","a5","a6","a7","a8","b0","b1","b2","b3","b4","b5","b6","b7","b8","translation","rotation","radians","scaling","projection","horizontalInvertMatrix","Shader","gl","program","uniformLocations","attributeLocations","activeUniforms","getProgramParameter","ACTIVE_UNIFORMS","info","getActiveUniform","location1","getUniformLocation","activeAttributes","ACTIVE_ATTRIBUTES","index1","info1","getActiveAttrib","getAttribLocation","uniform1f","getUniform","uniform2f","uniform4f","uniformMatrix3","uniformMatrix3fv","hasUniform","attributeBuffer","enableVertexAttribArray","bindBuffer","ARRAY_BUFFER","vertexAttribPointer","FLOAT","WebGLSpriteRenderer","globalScaleMatrix","costumeTextures","Map","createCanvas","getContextOptions","noFiltersShader","createShader","vertexShader","fragmentShader","allFiltersShader","enable","BLEND","blendFuncSeparate","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","ONE","quadBuffer","bufferData","STATIC_DRAW","alpha","compileShader","definitions","def","shader","shaderSource","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","compileProgram","vs","fs","VERTEX_SHADER","FRAGMENT_SHADER","createProgram","attachShader","linkProgram","LINK_STATUS","getProgramInfoLog","deleteProgram","convertToTexture","texture","createTexture","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","getExtension","loseContext","viewport","clearColor","COLOR_BUFFER_BIT","useShader","useProgram","get","drawArrays","TRIANGLES","drawTextureOverlay","CollisionRenderer","SCISSOR_TEST","scissor","touchingShader","shapeFiltersShader","touchingColorShader","blendFunc","DST_ALPHA","ZERO","readPixels","PenRenderer","dirty","penCoords","penLines","penColors","penCoordsIndex","penLinesIndex","penColorsIndex","penShader","PEN_VERTEX_SHADER","PEN_FRAGMENT_SHADER","positionBuffer","lineBuffer","colorBuffer","preserveDrawingBuffer","pendingPenOperations","drawPendingOperations","STREAM_DRAW","buffersCanFit","getCircleResolution","circleRes","collisionRenderer","penRenderer","fallbackRenderer","updatePenTexture","penTexture","flush"],"version":3,"file":"index.6c7bd701.js.map"}