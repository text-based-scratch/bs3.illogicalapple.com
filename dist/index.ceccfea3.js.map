{"mappings":"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","sources":["Documents/GitHub/bs3.illogicalapple.com/src/js/index.js"],"sourcesContent":["const $ = (...args) => document.querySelector(...args)\n\nvar caretPosition = [0, 0]\nvar code = [\"\"]\nvar caretAnimationTimeoutID = null\nvar indentation = 0\n\nasync function openProject(event) {\n  let file = event.target.files[0]\n  if(file) player.loadProjectFromFile(file)\n}\n\nfunction indent(amount) {\n  code[caretPosition[1]] = \"  \".repeat(amount) + code[caretPosition[1]]\n  caretPosition[0] += 2 * amount\n}\n\nfunction inputHandler(thing) {\n  let caret = document.createElement(\"div\")\n  let textToAdd = $(\"div.contenteditable\").innerText.substring(0, $(\"div.contenteditable\").innerText.length - 1)\n  let editor = $(\"div.text-editor pre.text\")\n  editor.replaceChildren()\n  caret.classList.add(\"caret\", \"animation\")\n  if(textToAdd == \"\\n\") {\n    if([...code[caretPosition[1]]].pop() == \":\") {\n      indentation++\n    }\n    caretPosition[1]++\n    caretPosition[0] = 0\n    code.push(\"\")\n    textToAdd = \"\"\n    indent(indentation)\n  }\n  code.forEach((element, index) => {\n    let line = document.createElement(\"div\")\n    line.classList.add(\"line\")\n    line.dataset.lineId = index // would make it lineID but then the attribute would be data-line-i-d\n    editor.append(line)\n    if(index == caretPosition[1]) {\n      line.classList.add(\"active\")\n      line.append(caret)\n      line.insertBefore(document.createTextNode(element.substring(0, caretPosition[0])), caret)\n      line.insertBefore(document.createTextNode(textToAdd), caret)\n      line.append(document.createTextNode(element.substring(caretPosition[0])))\n    } else {\n      line.append(document.createTextNode(element))\n    }\n  })\n  code[caretPosition[1]] = code[caretPosition[1]].substring(0, caretPosition[0]) + textToAdd + code[caretPosition[1]].substring(caretPosition[0])\n  caretPosition[0] += textToAdd.length\n  pauseCaret()\n  $(\"div.contenteditable\").innerHTML = \"&nbsp;\"\n  autocomplete()\n  format()\n}\n\nfunction pauseCaret() {\n  if($(\"div.text-editor div.caret\").classList.contains(\"animation\")) {\n    $(\"div.text-editor div.caret\").classList.remove(\"animation\")\n    if(caretAnimationTimeoutID) clearTimeout(caretAnimationTimeoutID)\n    caretAnimationTimeoutID = setTimeout(() => $(\"div.text-editor div.caret\").classList.add(\"animation\"), 500)\n  }\n}\n\naddEventListener(\"load\", function() {\n  $(\"div.text-editor pre.text\").addEventListener(\"click\", () => {\n    inputHandler()\n    pauseCaret()\n    $(\"div.contenteditable\").focus()\n  })\n  $(\"div.contenteditable\").addEventListener(\"input\", inputHandler)\n  $(\"div.text-editor pre.text\").addEventListener(\"scroll\", autocomplete)\n  $(\"div.contenteditable\").addEventListener(\"keydown\", event => {\n    if(event.key == \"Tab\") {\n      event.preventDefault()\n      indentation++\n      indent(1)\n      inputHandler()\n    } else if(event.key == \"ArrowLeft\") {\n      if(caretPosition[0] > 0) caretPosition[0]--\n      else if(caretPosition[1] > 0) {\n        caretPosition[1]--\n        caretPosition[0] = code[caretPosition[1]].length\n      }\n      inputHandler()\n    } else if(event.key == \"ArrowRight\") {\n      if(caretPosition[0] < code[caretPosition[1]].length) caretPosition[0]++\n      else if(caretPosition[1] < code.length - 1) {\n        caretPosition[1]++\n        caretPosition[0] = 0\n      }\n      inputHandler()\n    } else if(event.key == \"Backspace\") {\n      if(caretPosition[0] > 0) {\n        code[caretPosition[1]] = code[caretPosition[1]].substring(0, caretPosition[0] - 1) + code[caretPosition[1]].substring(caretPosition[0])\n        caretPosition[0]--\n        if(/([\\s\\u00A0]{2})+/.exec(code[caretPosition[1]])) {\n          indentation = /([\\s\\u00A0]{2})+/.exec(code[caretPosition[1]])[0].length / 2\n        } else indentation = 0\n        inputHandler()\n      } else if(caretPosition[1] > 0) {\n        caretPosition[0] = code[caretPosition[1] - 1].length\n        code[caretPosition[1] - 1] += code[caretPosition[1]]\n        code.splice(caretPosition[1], 1)\n        caretPosition[1]--\n        if(/([\\s\\u00A0]{2})+/.exec(code[caretPosition[1]])) {\n          indentation = /([\\s\\u00A0]{2})+/.exec(code[caretPosition[1]])[0].length / 2\n        } else indentation = 0\n        inputHandler()\n      }\n    } else if(event.key == \"Delete\") {\n      if(caretPosition[0] < code[caretPosition[1]].length) {\n        code[caretPosition[1]] = code[caretPosition[1]].substring(0, caretPosition[0]) + code[caretPosition[1]].substring(caretPosition[0] + 1)\n        if(/([\\s\\u00A0]{2})+/.exec(code[caretPosition[1]])) {\n          indentation = /([\\s\\u00A0]{2})+/.exec(code[caretPosition[1]])[0].length / 2\n        } else indentation = 0\n        inputHandler()\n      }\n    }\n  })\n  \n  $(\"input.load-file\").addEventListener(\"change\", openProject)\n  \n  $(\"div.files\").addEventListener(\"click\", event => {\n    if(event.target.matches(\"div.files span.project-name, li.folder-wrapper\")) event.target.toggleAttribute(\"data-closed\")\n  })\n})"],"names":[],"version":3,"file":"index.ceccfea3.js.map","sourceRoot":"/__parcel_source_root/"}