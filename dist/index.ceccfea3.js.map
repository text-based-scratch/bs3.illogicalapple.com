{"mappings":"AAAA,MAAM,CAAC,GAAG,CAAI,GAAA,IAAI,GAAK,QAAQ,CAAC,aAAa,IAAI,IAAI,CAAC;AAEtD,IAAI,aAAa,GAAG;AAAC,KAAC;AAAE,KAAC;CAAC;AAC1B,IAAI,IAAI,GAAG;IAAC,EAAE;CAAC;AACf,IAAI,uBAAuB,GAAG,IAAI;AAElC,eAAe,WAAW,CAAC,KAAK,EAAE;IAChC,IAAI,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;IAChC,IAAG,IAAI,EAAE,MAAM,CAAC,mBAAmB,CAAC,IAAI,CAAC;CAC1C;AAED,SAAS,YAAY,GAAG;IACtB,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;IACzC,IAAI,SAAS,GAAG,CAAC,CAAC,qBAAqB,CAAC,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,qBAAqB,CAAC,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;IAC9G,IAAI,MAAM,GAAG,CAAC,CAAC,0BAA0B,CAAC;IAC1C,MAAM,CAAC,eAAe,EAAE;IACxB,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,EAAE,WAAW,CAAC;IACzC,IAAG,SAAS,IAAI,IAAI,EAAE;QACpB,aAAa,CAAC,CAAC,CAAC,EAAE;QAClB,aAAa,CAAC,CAAC,CAAC,GAAG,CAAC;QACpB,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;QACb,SAAS,GAAG,EAAE;KACf;IACD,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,KAAK,GAAK;QAC/B,IAAI,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;QACxC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC;QAC1B,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,KAAK,CAAC,qEAAqE;QAAtE;QAC3B,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC;QACnB,IAAG,KAAK,IAAI,aAAa,CAAC,CAAC,CAAC,EAAE;YAC5B,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC;YAC5B,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;YAClB,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC;YACzF,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,cAAc,CAAC,SAAS,CAAC,EAAE,KAAK,CAAC;YAC5D,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SAC1E,MACC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;KAEhD,CAAC;IACF,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,CAAC,CAAC,GAAG,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;IAC/I,aAAa,CAAC,CAAC,CAAC,IAAI,SAAS,CAAC,MAAM;IACpC,UAAU,EAAE;IACZ,CAAC,CAAC,qBAAqB,CAAC,CAAC,SAAS,GAAG,QAAQ;IAC7C,YAAY,EAAE;CACf;AAED,SAAS,UAAU,GAAG;IACpB,IAAG,CAAC,CAAC,2BAA2B,CAAC,CAAC,SAAS,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE;QACjE,CAAC,CAAC,2BAA2B,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,WAAW,CAAC;QAC5D,IAAG,uBAAuB,EAAE,YAAY,CAAC,uBAAuB,CAAC;QACjE,uBAAuB,GAAG,UAAU,CAAC,IAAM,CAAC,CAAC,2BAA2B,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE,GAAG,CAAC;KAC3G;CACF;AAED,gBAAgB,CAAC,MAAM,EAAE,WAAW;IAClC,CAAC,CAAC,0BAA0B,CAAC,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAM;QAC5D,YAAY,EAAE;QACd,UAAU,EAAE;QACZ,CAAC,CAAC,qBAAqB,CAAC,CAAC,KAAK,EAAE;KACjC,CAAC;IACF,CAAC,CAAC,qBAAqB,CAAC,CAAC,gBAAgB,CAAC,OAAO,EAAE,YAAY,CAAC;IAChE,CAAC,CAAC,qBAAqB,CAAC,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAA,KAAK,GAAI;QAC5D,IAAG,KAAK,CAAC,GAAG,IAAI,WAAW,EAAE;YAC3B,IAAG,aAAa,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,aAAa,CAAC,CAAC,CAAC,EAAE;iBACtC,IAAG,aAAa,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;gBAC5B,aAAa,CAAC,CAAC,CAAC,EAAE;gBAClB,aAAa,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM;aACjD;YACD,YAAY,EAAE;SACf;QACD,IAAG,KAAK,CAAC,GAAG,IAAI,YAAY,EAAE;YAC5B,IAAG,aAAa,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,aAAa,CAAC,CAAC,CAAC,EAAE;iBAClE,IAAG,aAAa,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC1C,aAAa,CAAC,CAAC,CAAC,EAAE;gBAClB,aAAa,CAAC,CAAC,CAAC,GAAG,CAAC;aACrB;YACD,YAAY,EAAE;SACf;QACD,IAAG,KAAK,CAAC,GAAG,IAAI,WAAW,EACzB;YAAA,IAAG,aAAa,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;gBACvB,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;gBACvI,aAAa,CAAC,CAAC,CAAC,EAAE;gBAClB,YAAY,EAAE;aACf;SAAA,AACF;QACD,IAAG,KAAK,CAAC,GAAG,IAAI,QAAQ,EACtB;YAAA,IAAG,aAAa,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE;gBACnD,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;gBACvI,YAAY,EAAE;aACf;SAAA,AACF;KACF,CAAC;IAEF,CAAC,CAAC,iBAAiB,CAAC,CAAC,gBAAgB,CAAC,QAAQ,EAAE,WAAW,CAAC;CAC7D,CAAC","sources":["Documents/GitHub/bs3.illogicalapple.com/src/js/index.js"],"sourcesContent":["const $ = (...args) => document.querySelector(...args)\n\nvar caretPosition = [0, 0]\nvar code = [\"\"]\nvar caretAnimationTimeoutID = null\n\nasync function openProject(event) {\n  let file = event.target.files[0]\n  if(file) player.loadProjectFromFile(file)\n}\n\nfunction inputHandler() {\n  let caret = document.createElement(\"div\")\n  let textToAdd = $(\"div.contenteditable\").innerText.substring(0, $(\"div.contenteditable\").innerText.length - 1)\n  let editor = $(\"div.text-editor pre.text\")\n  editor.replaceChildren()\n  caret.classList.add(\"caret\", \"animation\")\n  if(textToAdd == \"\\n\") {\n    caretPosition[1]++\n    caretPosition[0] = 0\n    code.push(\"\")\n    textToAdd = \"\"\n  }\n  code.forEach((element, index) => {\n    let line = document.createElement(\"div\")\n    line.classList.add(\"line\")\n    line.dataset.lineId = index // would make it lineID but then the attribute would be data-line-i-d\n    editor.append(line)\n    if(index == caretPosition[1]) {\n      line.classList.add(\"active\")\n      line.append(caret)\n      line.insertBefore(document.createTextNode(element.substring(0, caretPosition[0])), caret)\n      line.insertBefore(document.createTextNode(textToAdd), caret)\n      line.append(document.createTextNode(element.substring(caretPosition[0])))\n    } else {\n      line.append(document.createTextNode(element))\n    }\n  })\n  code[caretPosition[1]] = code[caretPosition[1]].substring(0, caretPosition[0]) + textToAdd + code[caretPosition[1]].substring(caretPosition[0])\n  caretPosition[0] += textToAdd.length\n  pauseCaret()\n  $(\"div.contenteditable\").innerHTML = \"&nbsp;\"\n  autocomplete()\n}\n\nfunction pauseCaret() {\n  if($(\"div.text-editor div.caret\").classList.contains(\"animation\")) {\n    $(\"div.text-editor div.caret\").classList.remove(\"animation\")\n    if(caretAnimationTimeoutID) clearTimeout(caretAnimationTimeoutID)\n    caretAnimationTimeoutID = setTimeout(() => $(\"div.text-editor div.caret\").classList.add(\"animation\"), 500)\n  }\n}\n\naddEventListener(\"load\", function() {\n  $(\"div.text-editor pre.text\").addEventListener(\"click\", () => {\n    inputHandler()\n    pauseCaret()\n    $(\"div.contenteditable\").focus()\n  })\n  $(\"div.contenteditable\").addEventListener(\"input\", inputHandler)\n  $(\"div.contenteditable\").addEventListener(\"keydown\", event => {\n    if(event.key == \"ArrowLeft\") {\n      if(caretPosition[0] > 0) caretPosition[0]--\n      else if(caretPosition[1] > 0) {\n        caretPosition[1]--\n        caretPosition[0] = code[caretPosition[1]].length\n      }\n      inputHandler()\n    }\n    if(event.key == \"ArrowRight\") {\n      if(caretPosition[0] < code[caretPosition[1]].length) caretPosition[0]++\n      else if(caretPosition[1] < code.length - 1) {\n        caretPosition[1]++\n        caretPosition[0] = 0\n      }\n      inputHandler()\n    }\n    if(event.key == \"Backspace\") {\n      if(caretPosition[0] > 0) {\n        code[caretPosition[1]] = code[caretPosition[1]].substring(0, caretPosition[0] - 1) + code[caretPosition[1]].substring(caretPosition[0])\n        caretPosition[0]--\n        inputHandler()\n      }\n    }\n    if(event.key == \"Delete\") {\n      if(caretPosition[0] < code[caretPosition[1]].length) {\n        code[caretPosition[1]] = code[caretPosition[1]].substring(0, caretPosition[0]) + code[caretPosition[1]].substring(caretPosition[0] + 1)\n        inputHandler()\n      }\n    }\n  })\n  \n  $(\"input.load-file\").addEventListener(\"change\", openProject)\n})"],"names":[],"version":3,"file":"index.ceccfea3.js.map","sourceRoot":"/__parcel_source_root/"}