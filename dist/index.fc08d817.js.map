{"mappings":"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","sources":["Documents/GitHub/bs3.illogicalapple.com/src/js/index.js"],"sourcesContent":["const $ = (...args) => document.querySelector(...args)\n\nvar caretPosition = [21, 0]\nvar code = [\"load assets/empty.svg\"]\nvar caretAnimationTimeoutID = null\nvar indentation = 0\nvar dragElement = null\nvar insertFileAt = null\nvar projectFiles = [\n  {\n    name: \"Untitled Project\",\n    folder: true,\n    children: [\n      {\n        name: \"assets\",\n        folder: true,\n        children: [\n          {\n            name: \"empty.svg\",\n            type: \"image/svg+xml\",\n            data: \"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIwIiBoZWlnaHQ9IjAiIHZpZXdCb3g9IjAsMCwwLDAiPjxnIGRhdGEtcGFwZXItZGF0YT0ieyZxdW90O2lzUGFpbnRpbmdMYXllciZxdW90Ozp0cnVlfSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJub256ZXJvIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iIiBzdHJva2UtZGFzaG9mZnNldD0iMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtd2VpZ2h0PSJub3JtYWwiIGZvbnQtc2l6ZT0iMTIiIHRleHQtYW5jaG9yPSJzdGFydCIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOiBub3JtYWwiLz48L3N2Zz4=\"\n          }\n        ]\n      }\n    ]\n  }\n]\nvar project = {\n  targets: [\n    {\n      name: \"Sprite1\",\n      code: \"\",\n      stage: false\n    },\n    {\n      name: \"Stage\",\n      code: \"\",\n      stage: true\n    }\n  ],\n  assets: [],\n  _: {\n    activeSprite: 0 // use sprite index thing\n  }\n}\n\nfunction toKebabCase(str) {\n  return str.replace(/\\s/g, \"-\").toLowerCase()\n}\n\nfunction indent(amount) {\n  code[caretPosition[1]] = \"  \".repeat(amount) + code[caretPosition[1]]\n  caretPosition[0] += 2 * amount\n}\n\nfunction updateFiles() {\n  function updateFolder(files, element, path) {\n    files.forEach((file, index) => {\n      if(file.folder) {\n        let folderWrapper = document.createElement(\"li\")\n        let folderElement = document.createElement(\"ul\")\n        folderWrapper.classList.add(\"file\", \"folder-wrapper\", \"file-target\")\n        folderElement.classList.add(\"folder\")\n        updateFolder(file.children, folderElement, path.concat([index]))\n        folderWrapper.append(toKebabCase(file.name), folderElement)\n        element.append(folderWrapper)\n      } else {\n        let fileElement = document.createElement(\"li\")\n        fileElement.classList.add(\"file\")\n        fileElement.dataset.path = path.concat([index]).join()\n        fileElement.dataset.type = file.type\n        fileElement.append(file.name)\n        element.append(fileElement)\n      }\n    })\n  }\n  let rootFolder = $(\"ul.root-folder\")\n  $(\"span.project-name\").innerText = toKebabCase(projectFiles[0].name)\n  rootFolder.replaceChildren()\n  updateFolder(projectFiles[0].children, rootFolder, [])\n  project.assets = projectFiles[0].children\n}\n\nfunction inputHandler(thing) {\n  let caret = document.createElement(\"div\")\n  let textToAdd = $(\"div.contenteditable\").innerText.substring(0, $(\"div.contenteditable\").innerText.length - 1)\n  let editor = $(\"div.text-editor pre.text\")\n  editor.replaceChildren()\n  caret.classList.add(\"caret\", \"animation\")\n  if(textToAdd == \"\\n\") {\n    if([...code[caretPosition[1]]].pop() == \":\") {\n      indentation++\n    }\n    caretPosition[1]++\n    caretPosition[0] = 0\n    code.push(\"\")\n    textToAdd = \"\"\n    indent(indentation)\n  }\n  code.forEach((element, index) => {\n    let line = document.createElement(\"div\")\n    line.classList.add(\"line\")\n    line.dataset.lineId = index // would make it lineID but then the attribute would be data-line-i-d\n    editor.append(line)\n    if(index == caretPosition[1]) {\n      line.classList.add(\"active\")\n      line.append(caret)\n      line.insertBefore(document.createTextNode(element.substring(0, caretPosition[0])), caret)\n      line.insertBefore(document.createTextNode(textToAdd), caret)\n      line.append(document.createTextNode(element.substring(caretPosition[0])))\n    } else {\n      line.append(document.createTextNode(element))\n    }\n  })\n  code[caretPosition[1]] = code[caretPosition[1]].substring(0, caretPosition[0]) + textToAdd + code[caretPosition[1]].substring(caretPosition[0])\n  caretPosition[0] += textToAdd.length\n  pauseCaret()\n  $(\"div.contenteditable\").innerHTML = \"&nbsp;\"\n  autocomplete()\n  format()\n  project.targets[project._.activeSprite].code = code.join(\"\\n\")\n}\n\nfunction pauseCaret() {\n  if($(\"div.text-editor div.caret\").classList.contains(\"animation\")) {\n    $(\"div.text-editor div.caret\").classList.remove(\"animation\")\n    if(caretAnimationTimeoutID) clearTimeout(caretAnimationTimeoutID)\n    caretAnimationTimeoutID = setTimeout(() => $(\"div.text-editor div.caret\").classList.add(\"animation\"), 500)\n  }\n}\n\naddEventListener(\"load\", function() {\n  updateFiles()\n  $(\"div.text-editor pre.text\").addEventListener(\"click\", () => {\n    inputHandler()\n    pauseCaret()\n    $(\"div.contenteditable\").focus()\n  })\n  $(\"div.contenteditable\").addEventListener(\"input\", inputHandler)\n  $(\"div.text-editor pre.text\").addEventListener(\"scroll\", autocomplete)\n  $(\"div.contenteditable\").addEventListener(\"keydown\", event => {\n    if(event.key == \"Tab\") {\n      event.preventDefault()\n      indentation++\n      indent(1)\n      inputHandler()\n    } else if(event.key == \"ArrowLeft\") {\n      if(caretPosition[0] > 0) caretPosition[0]--\n      else if(caretPosition[1] > 0) {\n        caretPosition[1]--\n        caretPosition[0] = code[caretPosition[1]].length\n      }\n      inputHandler()\n    } else if(event.key == \"ArrowRight\") {\n      if(caretPosition[0] < code[caretPosition[1]].length) caretPosition[0]++\n      else if(caretPosition[1] < code.length - 1) {\n        caretPosition[1]++\n        caretPosition[0] = 0\n      }\n      inputHandler()\n    } else if(event.key == \"ArrowUp\") {\n      if(caretPosition[1] > 0) {\n        caretPosition[1]--\n        caretPosition[0] = Math.min(caretPosition[0], code[caretPosition[1]].length)\n      } else caretPosition = [0, 0]\n      inputHandler()\n    } else if(event.key == \"ArrowDown\") {\n      if(caretPosition[1] < code.length - 1) {\n        caretPosition[1]++\n        caretPosition[0] = Math.min(caretPosition[0], code[caretPosition[1]].length)\n      } else caretPosition = [code[code.length - 1].length, code.length - 1]\n      inputHandler()\n    } else if(event.key == \"Backspace\") {\n      if(caretPosition[0] > 0) {\n        code[caretPosition[1]] = code[caretPosition[1]].substring(0, caretPosition[0] - 1) + code[caretPosition[1]].substring(caretPosition[0])\n        caretPosition[0]--\n        if(/([\\s\\u00A0]{2})+/.exec(code[caretPosition[1]])) {\n          indentation = /([\\s\\u00A0]{2})+/.exec(code[caretPosition[1]])[0].length / 2\n        } else indentation = 0\n        inputHandler()\n      } else if(caretPosition[1] > 0) {\n        caretPosition[0] = code[caretPosition[1] - 1].length\n        code[caretPosition[1] - 1] += code[caretPosition[1]]\n        code.splice(caretPosition[1], 1)\n        caretPosition[1]--\n        if(/([\\s\\u00A0]{2})+/.exec(code[caretPosition[1]])) {\n          indentation = /([\\s\\u00A0]{2})+/.exec(code[caretPosition[1]])[0].length / 2\n        } else indentation = 0\n        inputHandler()\n      }\n    } else if(event.key == \"Delete\") {\n      if(caretPosition[0] < code[caretPosition[1]].length) {\n        code[caretPosition[1]] = code[caretPosition[1]].substring(0, caretPosition[0]) + code[caretPosition[1]].substring(caretPosition[0] + 1)\n        if(/([\\s\\u00A0]{2})+/.exec(code[caretPosition[1]])) {\n          indentation = /([\\s\\u00A0]{2})+/.exec(code[caretPosition[1]])[0].length / 2\n        } else indentation = 0\n        inputHandler()\n      }\n    }\n  })\n  \n  $(\"div.files\").addEventListener(\"click\", event => {\n    if(event.target.matches(\"div.files span.project-name, li.folder-wrapper\")) event.target.toggleAttribute(\"data-closed\")\n  })\n\n  $(\"div.files\").addEventListener(\"dragenter\", e => {\n    console.log(e.dataTransfer.items[0].getAsFile())\n    // let filename = e.dataTransfer.items[0].getAsFile().name\n    dragElement = e.target\n    e.preventDefault()\n    dragElement.classList.add(\"file-drag\")\n    $(\"div.files\").style.setProperty(\"--filename-to-add\", `\"[drop to add]\"`)\n    insertFileAt = $(\":is(.file-drag.folder li:last-child, .file-drag > ul.folder li:last-child, li.file.file-drag:not(.folder-wrapper))\")\n  })\n  $(\"div.files\").addEventListener(\"dragover\", e => {\n    dragElement = e.target\n    e.preventDefault()\n    dragElement.classList.add(\"file-drag\")\n    insertFileAt = $(\":is(.file-drag.folder li:last-child, .file-drag > ul.folder li:last-child, li.file.file-drag:not(.folder-wrapper))\")\n  })\n  $(\"div.files\").addEventListener(\"dragleave\", e => {\n    if(e.target == dragElement) dragElement = null\n    e.preventDefault()\n    e.target.classList.remove(\"file-drag\")\n    insertFileAt = $(\":is(.file-drag.folder li:last-child, .file-drag > ul.folder li:last-child, li.file.file-drag:not(.folder-wrapper))\")\n  })\n  $(\"div.files\").addEventListener(\"drop\", e => {\n    let thingToChange = projectFiles[0]\n    dragElement = null\n    e.preventDefault()\n    e.target.classList.remove(\"file-drag\")\n    insertFileAt.dataset.path.split(\",\").forEach((element, index, array) => {\n      if(index == array.length - 1) {\n        let reader = new FileReader()\n        let file = e.dataTransfer.items[0].getAsFile()\n        reader.addEventListener(\"load\", () => {\n          thingToChange.children.splice(element + 1, 0, {\n            name: file.name,\n            type: file.type,\n            data: reader.result\n          })\n          updateFiles(projectFiles)\n        })\n        reader.readAsDataURL(file)\n      } else {\n        thingToChange = thingToChange.children[element]\n      }\n    })\n    insertFileAt = null\n  })\n  $(\"input.title\").addEventListener(\"change\", event => {\n    projectFiles[0].name = event.target.value\n    $(\"span.project-name\").innerText = toKebabCase(event.target.value)\n  })\n  $(\"button.new-sprite\").addEventListener(\"click\", () => {\n    let spriteName = 1\n    let newSpriteElement = document.createElement(\"div\")\n    let newSpriteNameElement = document.createElement(\"div\")\n    project._.activeSprite = project.targets.length\n    while(project.targets.find(e => e.name == \"Sprite\" + spriteName)) {\n      spriteName++\n    }\n    project.targets.push({\n      name: \"Sprite\" + spriteName,\n      code: \"load assets/empty.svg\",\n      stage: false\n    })\n    $(\"div.sprites div.sprite.active\").classList.remove(\"active\")\n    newSpriteNameElement.append(\"Sprite\" + spriteName)\n    newSpriteNameElement.classList.add(\"sprite-name\")\n    newSpriteElement.classList.add(\"sprite\", \"flex\", \"active\")\n    newSpriteElement.dataset.index = project.targets.length - 1\n    newSpriteElement.append(newSpriteNameElement)\n    $(\"div.sprites\").append(newSpriteElement)\n    code = [\"load assets/empty.svg\"]\n    caretPosition = [21, 0]\n    inputHandler()\n  })\n  $(\"div.sprites\").addEventListener(\"click\", event => {\n    if(event.target.closest(\".sprite\")) {\n      $(\"div.sprites div.sprite.active\").classList.remove(\"active\")\n      event.target.closest(\".sprite\").classList.add(\"active\")\n      project._.activeSprite = event.target.closest(\".sprite\").dataset.index\n      code = project.targets[project._.activeSprite].code.split(\"\\n\")\n      caretPosition = [code[code.length - 1].length, code.length - 1]\n      inputHandler()\n    }\n  })\n  inputHandler()\n  player.loadProjectById(792509530) // load empty project\n})"],"names":["$","args","document","querySelector","caretPosition","code","caretAnimationTimeoutID","indentation","dragElement","insertFileAt","projectFiles","name","folder","children","type","data","project","targets","stage","assets","_","activeSprite","toKebabCase","str","replace","toLowerCase","indent","amount","repeat","updateFiles","rootFolder","innerText","replaceChildren","updateFolder","files","element","path","forEach","file","index","folderWrapper","createElement","folderElement","classList","add","concat","append","fileElement","dataset","join","inputHandler","thing","caret","textToAdd","substring","length","editor","pop","push","line","lineId","insertBefore","createTextNode","pauseCaret","innerHTML","autocomplete","format","contains","remove","clearTimeout","setTimeout","addEventListener","focus","event","key","preventDefault","Math","min","exec","splice","target","matches","toggleAttribute","e","console","log","dataTransfer","items","getAsFile","style","setProperty","thingToChange","split","array","reader","FileReader","result","readAsDataURL","value","spriteName","newSpriteElement","newSpriteNameElement","find","closest","player","loadProjectById"],"version":3,"file":"index.fc08d817.js.map"}